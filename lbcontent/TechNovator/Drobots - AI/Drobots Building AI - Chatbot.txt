32##STEP_1####INST_1##Introduction%0A%0AIn%20the%20*Navigation%20Algorithm*%20project,%20we%20learnt%20how%20to%20issue%20commands%20to%20the%20car%20by%20calling%20functions,%20specifically,%20the%20*goUp*,%20*goDown*,%20*goLeft*%20&%20*goRight*%20functions.%0A%0AIn%20this%20project,%20a%20chat-bot%20is%20added%20to%20the%20user%20interface,%20currently%20it%20can't%20understand%20anything.%20But%20throughout%20the%20week,%20we%20will%20be%20teaching%20it%20how%20to%20complete%20requests%20and%20talk%20back%20about%20topics%20of%20your%20choice.%0A%0A(***)%0A%0A(!)Type%20a%20message%20into%20the%20chat-bot%20and%20click%20send.%0A(*)*Tip*:%20or%20you%20can%20simply%20press%20%22Enter%22%20on%20your%20keyboard.##INST_1E####CODE_1####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_1E####LOGIC_1####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('displayBotMessage');##JS_E####LOGIC_1E####STEP_1E####STEP_2####INST_2##Adding%20chat-bot's%20first%20command%0A%0AIn%20the%20*readUserInput*%20function,%20the%20variable%20*command*%20represents%20the%20text%20written%20by%20the%20user.%0A%0AIn%20order%20to%20know%20what%20to%20say%20back,%20we%20need%20to%20check%20what's%20inside%20of%20*command.%0A%0AFirst,%20let's%20make%20our%20chat-bot%20able%20to%20respond%20to%20greeting.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A%09(*)%5B#js#else%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20read#+6,%20create%20an%20%60if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22hello%22*.%0A%0A(!)On%20+js#on%20read#+7,%20create%20an%20%60else%60%20statement.##INST_2E####CODE_2####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(command%20==%20'hello')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_2E####LOGIC_2####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(command%20==%20'hello')%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60else%20%7B%7D%60);##JS_E####LOGIC_2E####STEP_2E####STEP_3####INST_3##Adding%20chat-bot's%20first%20response%0A%0AWhen%20*command*%20is%20%22hello%22,%20we%20want%20the%20chat-bot%20to%20say%20something%20back.%0A%0AWe%20can%20make%20the%20chat-bot%20say%20something%20using%20the%20*displayBotMessage*%20function.%20Just%20remember%20the%20message%20has%20to%20go%20between%20the%20brackets%20in%20quotes,%20like%20this:%0A%0A(js)displayBotMessage(%22Hello.%22);(#)%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A%09(*)%5Bstring#js#Data%20type%20-%20string%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hello#+1,%20make%20the%20chat-bot%20say%20*%22Hi,%20how%20can%20I%20help%20you?%22*.%0A(*)*Tip*:%20use%20the%20*displayBotMessage*%20function.##INST_3E####CODE_3####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#displayBotMessage('Hi,%20how%20can%20I%20help%20you?');#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_3E####LOGIC_3####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%60);##JS_E####LOGIC_3E####STEP_3E####STEP_4####INST_4##Testing%20chat-bot's%20first%20response%0A%0ABefore%20we%20move%20on,%20let's%20make%20sure%20what%20we%20have%20so%20far%20is%20working.%0A%0A(***)%0A%0A(!)Type%20*%22hello%22*%20into%20the%20chat-bot%20and%20test%20the%20chat-bot's%20response.##INST_4E####CODE_4####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_4E####LOGIC_4####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('readUserInput').var(%60command%20==%20'hello'%60);##JS_E####LOGIC_4E####STEP_4E####STEP_5####INST_5##Adding%20the%20%22go%20up%22%20command%0A%0ANext%20we'll%20do%20something%20slightly%20more%20complex%20-%20adding%20commands%20that%20will%20have%20the%20chat-bot%20steer%20the%20smart%20car%20for%20us.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20read#+9,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22go%20up%22*.##INST_5E####CODE_5####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20if%20(command%20==%20'go%20up')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkAndMove(dir)%20%7B%0A%20%20%20%20if%20(car.currentCell%5Bdir%5D%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20cannot%20leave%20the%20map.');%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(car.currentCell%5Bdir%5D);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_5E####LOGIC_5####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60else%20if%20(command%20==%20'go%20up')%20%7B%7D%60);##JS_E####LOGIC_5E####STEP_5E####STEP_6####INST_6##Checking%20the%20cell%20above%20the%20car%0A%0AWhen%20*command*%20is%20%22go%20up%22,%20we%20want%20the%20car%20to%20move%20to%20the%20cell%20above%20itself,%20but%20we%20can't%20assume%20the%20car%20can%20always%20go%20up%20-%20it%20may%20already%20be%20on%20the%20top%20edge%20of%20the%20map,%20and%20there%20is%20no%20where%20to%20go.%0A%0AWe%20can%20determine%20this%20by%20checking%20whether%20the%20cell%20above%20the%20car%20is%20%22unknown%22.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A%09(*)%5B#js#else%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20read#+10,%20create%20an%20%60if%60%20statement%20to%20check%20whether%20%60car.currentCell.up%60%20is%20equal%20to%20*%22unkown%22*.%0A%0A(!)On%20+js#on%20read#+11,%20create%20an%20%60else%60%20statement.##INST_6E####CODE_6####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(car.currentCell.up%20==%20'unknown')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_6E####LOGIC_6####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(car.currentCell.up%20==%20'unknown')%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60else%20%7B%7D%60);##JS_E####LOGIC_6E####STEP_6E####STEP_7####INST_7##Responding%20to%20the%20%22go%20up%22%20command%0A%0ANow%20we%20have%202%20potential%20situations:%0A%5B-%0A%09(*)If%20the%20cell%20above%20the%20car%20is%20%22unknown%22,%20we%20want%20the%20chat-bot%20to%20tell%20the%20user%20that%20there%20is%20nothing%20above%20the%20car.%0A%09(*)Other%20wise,%20we%20can%20move%20the%20car%20up.%0A-%5D%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#go%20up#+2,%20make%20the%20chat-bot%20say%20*%22There%20is%20nothing%20above%20the%20car.%22*.%0A%0A(!)On%20+js#go%20up#+5,%20move%20the%20car%20to%20the%20cell%20above%20its%20current%20cell.%0A(*)*Tip*:%20use%20the%20*moveCarTo*%20function.##INST_7E####CODE_7####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#displayBotMessage('There%20is%20nothing%20above%20the%20car.');#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#moveCarTo(car.currentCell.up);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_7E####LOGIC_7####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage('There%20is%20nothing%20above%20the%20car.');%60);%0Apass.if.js.editable(1).equivalent(%60moveCarTo(car.currentCell.up);%60);##JS_E####LOGIC_7E####STEP_7E####STEP_8####INST_8##Checking%20the%20other%203%20cells%20around%20the%20car%0A%0ANow%20we%20just%20need%20to%20do%20similar%20checks%20for%20commands%20requesting%20to%20move%20toward%20the%20other%203%20directions.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#go%20up#+8,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22go%20down%22*.%0A%0A(!)On%20+js#go%20up#+9,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22go%20left%22*.%0A%0A(!)On%20+js#go%20up#+10,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22go%20right%22*.##INST_8E####CODE_8####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20if%20(command%20==%20'go%20down')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20if%20(command%20==%20'go%20left')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20if%20(command%20==%20'go%20right')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_8E####LOGIC_8####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60else%20if%20(command%20==%20'go%20down')%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60else%20if%20(command%20==%20'go%20left')%20%7B%7D%60);%0Apass.if.js.editable(2).equivalent(%60else%20if%20(command%20==%20'go%20right')%20%7B%7D%60);##JS_E####LOGIC_8E####STEP_8E####STEP_9####INST_9##Responding%20to%20the%203%20commands%0A%0AAfter%20checking%20for%20the%20user%20request%20to%20move%20in%20each%20requested%20direction,%20we%20need%20one%20last%20check%20whether%20the%20it%20is%20open%20for%20the%20car%20to%20travel.%0A%0A(***)%0A%0A(!)On%20+js#go%20down#+1%20&%20js#go%20down#+5,%20fill%20in%20the%20correct%20cell%20for%20the%20%22go%20down%22%20command%20to%20work%20properly.%0A%0A(!)On%20+js#go%20left#+1%20&%20js#go%20left#+5,%20fill%20in%20the%20correct%20cell%20for%20the%20%22go%20left%22%20command%20to%20work%20properly.%0A%0A(!)On%20+js#go%20right#+1%20&%20js#go%20right#+5,%20fill%20in%20the%20correct%20cell%20for%20the%20%22go%20right%22%20command%20to%20work%20properly.##INST_9E####CODE_9####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(#BEGIN_EDITABLE#car.currentCell#END_EDITABLE#);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_9E####LOGIC_9####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60car.currentCell.down%60);%0Apass.if.js.editable(1).equivalent(%60car.currentCell.down%60);%0Apass.if.js.editable(2).equivalent(%60car.currentCell.left%60);%0Apass.if.js.editable(3).equivalent(%60car.currentCell.left%60);%0Apass.if.js.editable(4).equivalent(%60car.currentCell.right%60);%0Apass.if.js.editable(5).equivalent(%60car.currentCell.right%60);##JS_E####LOGIC_9E####STEP_9E####STEP_10####INST_10##Testing%20your%20commands%0A%0AYou're%20all%20set%20with%20the%20navigation%20controls,%20now%20take%20it%20for%20a%20spin.%0A%0A(***)%0A%0A(!)Drive%20the%20car%20to%20the%20finish%20line%20using%20the%20chat-bot%20commands.##INST_10E####CODE_10####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%20%20%20%20displayBotMessage('Use%20%22go%20up%22,%20%22go%20down%22,%20%22go%20left%22%20or%20%22go%20right%22%20to%20control%20the%20car.');%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_10E####LOGIC_10####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('checkPrevMove').var(%60car.currentCell.id%20==%20'finish'%60);##JS_E####LOGIC_10E####STEP_10E####STEP_11####INST_11##Conversational%20responses%0A%0AOur%20chat-bot%20just%20learnt%20a%20new%20ability,%20however%20it's%20still%20very%20robotic,%20we%20need%20to%20give%20it%20some%20personality%20or%20it%20won't%20be%20fun%20talking%20with%20it.%0A%0ALet's%20start%20with%20a%20name.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20checkPrev#-9,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22who%20are%20you?%22*.##INST_11E####CODE_11####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20if%20(command%20==%20'who%20are%20you?')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_11E####LOGIC_11####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60else%20if%20(command%20==%20'who%20are%20you?')%20%7B%7D%60);##JS_E####LOGIC_11E####STEP_11E####STEP_12####INST_12##Giving%20your%20chat-bot%20personality%0A%0AGive%20your%20chat-bot%20a%20name!%0A%0ADon't%20worry,%20you%20will%20have%20multiple%20opportunities%20to%20change%20it%20later.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20checkPrev#-10,%20make%20the%20chat-bot%20introduce%20itself.%0A(*)*Tip*:%20use%20the%20*displayBotMessage*%20function.##INST_12E####CODE_12####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#displayBotMessage('I%20am%20B-Bot');#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_12E####LOGIC_12####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage('I%20am%20B-Bot');%60);%0A//%20pass.if.js.editable(0).equivalent(%60displayBotMessage(##STRING##);%60);##JS_E####LOGIC_12E####STEP_12E####STEP_13####INST_13##Add%20your%20own%20commands%20&%20responses%0A%0AOur%20chat-bot%20currently%20understands%20very%20limited%20amount%20of%20commands,%20but%20you%20can%20now%20add%20more%20to%20the%20list.%0A%0AIt's%20up%20to%20you,%20but%20we%20suggest%20giving%20it%20a%20richer%20personality%20so%20the%20user%20can%20learn%20more%20about%20the%20chat-bot,%20such%20as:%0A(js)else%20if%20(command%20==%20%22what%20color%20do%20you%20like?%22)%20%7B%0A%20%20%20%20displayBotMessage(%22I%20like%20red.%22);%0A%7D%0Aelse%20if%20(command%20==%20%22what's%20your%20favourite%20animal%22)%20%7B%0A%20%20%20%20displayBotMessage(%22Cats!%22);%0A%7D(#)%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20checkPrev#-10,%20add%20your%20own%20commands%20and%20responses.##INST_13E####CODE_13####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.1/seedrandom.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0AMath.seedrandom(%60$%7BlocalStorage.id_token%7D$%7BnColumn%7D$%7BnRow%7D%60);%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%09%09//%20%20##%20CUSTOM%20COMMANDS%20##%0A%09%09#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%0A%09%09//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Sorry,%20I%20didn't%20understand%20your%20command:%20$%7Bcommand%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20btnSend.enable();%0A%20%20%20%20%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%60Arrived%20at%20$%7BcurrentCell.location%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20anitClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20anitClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(anitClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20%60rotate($%7Bcar.rotation%7Ddeg)%60;%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20%60$%7BcellSize%7Dvw%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20%60$%7B(100%20/%20nRow)%20*%20rowIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20%60$%7B(100%20/%20nColumn)%20*%20cellIndex%7D%25%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20%60(x:%20$%7BnthColumn%20+%201%7D,%20y:%20$%7BnthRow%20+%201%7D)%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%60url('$%7BimagePath%7D/road_$%7Btype%7D.png')%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20text%20=%20document.createElement('p');%0A%20%20%20%20%0A%20%20%20%20text.className%20=%20type;%0A%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20messages.appendChild(text);%0A%0A%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%20%60$%7B90%20*%20(nRow%20/%20nColumn)%7Dvw%60;%0A%20%20%20%20title.style.fontSize%20=%20%60$%7Bgrid.offsetHeight%20*%200.2%7Dpx%60;%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20%60$%7B(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%7Dpx%60;%0A%20%20%20%20content.style.transform%20=%20%60scale($%7BscaleRatio%7D)%60;%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_13E####LOGIC_13####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'on%20checkPrevMove',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-9%20%7D);%0A//%20output%20=%20insertLine(output,%20'on%20checkPrevMove',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#',%20offset:%20-12%20%7D);%0A//%20output%20=%20insertLine(output,%20'on%20checkPrevMove',%20%7B%20line:%20'%5Ct%5Ct#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-9%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60%60);%0A//%20pass.on('readUserInput').var(%60command%20==%20'blue%20jeans'%60);##JS_E####LOGIC_13E####STEP_13E####STEP_14####INST_14##Chat-bot%20enhancement%0A%0AIn%20the%20%22Auto%20Navigation%22%20project,%20we%20improved%20our%20algorithm%20so%20the%20smart%20car%20can%20navigate%20on%20any%20randomly%20generate%20map.%0A%0AIn%20a%20real%20self-driving%20car,%20the%20ability%20to%20figure%20out%20where%20to%20go%20comes%20from%20understanding%20its%20surroundings,%20and%20sometimes%20it%20is%20useful%20to%20display%20this%20process,%20so%20the%20driver%20knows%20what%20the%20smart%20car%20is%20doing.%0A%0ATo%20continue%20enhancing%20our%20chat-bot,%20we%20will%20start%20with%20adding%20a%20real-time%20feedback%20feature.##INST_14E####CODE_14####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_14E####LOGIC_14####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20%60var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09##CUSTOM_COMMANDS##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D#BEGIN_EDITABLE##END_EDITABLE#%60;%0A%20%20%0Aconst%20customCommands%20=%20codeWithoutMarkup.replace(/%5B%5Cs%5CS%5D*%5C/%5C/%20%20##%20CUSTOM%20COMMANDS%20##/,%20'').split('').reverse().join('').replace(/%5B%5Cs%5CS%5D*##%20SDNAMMOC%20MOTSUC%20FO%20DNE%20##%20%20%5C/%5C//,%20'').split('').reverse().join('').trim();%0A%0Areturn%20output.replace(/##CUSTOM_COMMANDS##/,%20customCommands);%0A##JS_E####LOGIC_14E####STEP_14E####STEP_15####INST_15##Feedback%20toggle%0A%0AFirst%20we%20need%20a%20on/off%20switch%20for%20receiving%20feedback%20from%20the%20chat-bot,%20this%20switch%20will%20be%20initially%20set%20to%20%22off%22%20because%20we%20don't%20always%20want%20this%20information.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A%09(*)%5BBoolean#js#Data%20type%20-%20Boolean%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#var%20autoMode#+1,%20create%20a%20variable%20called%20*showFeedback*%20to%20store%20the%20Boolean%20value%20of%20*false*.##INST_15E####CODE_15####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0A#BEGIN_EDITABLE#var%20showFeedback%20=%20false;#END_EDITABLE#%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_15E####LOGIC_15####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'var%20autoMode',%20%7B%20line:%20'#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%200%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20showFeedback%20=%20false;%60);##JS_E####LOGIC_15E####STEP_15E####STEP_16####INST_16##Feedback%20on/off%20toggle%20commands%0A%0ATo%20turn%20the%20switch%20on%20and%20off,%20we%20will%20be%20using%20the%20%22show%20feedback%22%20and%20%22hide%20feedback%22%20commands.%0A%0ATo%20add%20them%20to%20the%20chat-bot,%20we'll%20use%20%60else%20if%60%20statements%20like%20before.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20readUserInput#+45,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22show%20feedback%22*.%0A%0A(!)On%20+js#on%20readUserInput#+46,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22hide%20feedback%22*.##INST_16E####CODE_16####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09#BEGIN_EDITABLE#else%20if%20(command%20==%20'show%20feedback')%20%7B%7D#END_EDITABLE#%0A%09%09#BEGIN_EDITABLE#else%20if%20(command%20==%20'hide%20feedback')%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_16E####LOGIC_16####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%2044%20%7D);%0Aoutput%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%2045%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60else%20if%20(command%20==%20'show%20feedback')%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60else%20if%20(command%20==%20'hide%20feedback')%20%7B%7D%60);##JS_E####LOGIC_16E####STEP_16E####STEP_17####INST_17##Chat-bot%20responses%0A%0AFor%20each%20of%20the%202%20commands%20we%20added,%20there%20needs%20to%20be%20a%20chat-bot%20response.%0A%0AWe%20can%20add%20them%20using%20the%20%60displayBotMessage%60%20function.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20readUserInput#+46,%20make%20the%20chat-bot%20say%20*%22Sure,%20real-time%20feedback%20is%20now%20turned%20on.%22*.%0A%0A(!)On%20+js#on%20readUserInput#+49,%20make%20the%20chat-bot%20say%20*%22Okay,%20feedback%20is%20turned%20off.%22*.##INST_17E####CODE_17####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09#BEGIN_EDITABLE#displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09#BEGIN_EDITABLE#displayBotMessage('Okay,%20feedback%20is%20turned%20off.');#END_EDITABLE#%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_17E####LOGIC_17####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup.replace(/%5C%7B%5Cs*%5C%7D%5Cs*$/gm,%20'%7B%5Cn%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%7D');%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%60);%0Apass.if.js.editable(1).equivalent(%60displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%60);##JS_E####LOGIC_17E####STEP_17E####STEP_18####INST_18##Toggling%20the%20showFeedback%20switch%0A%0AFor%20each%20of%20the%20user%20commands,%20we%20also%20need%20to%20change%20the%20value%20of%20*showFeedback*%20accordingly,%20so%20it%20can%20be%20used%20later%20in%20conditional%20statements.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20readUserInput#+47,%20change%20the%20value%20of%20*showFeedback*%20to%20*true*.%0A%0A(!)On%20+js#on%20readUserInput#+51,%20change%20the%20value%20of%20*showFeedback*%20to%20*false*.##INST_18E####CODE_18####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09#BEGIN_EDITABLE#showFeedback%20=%20true;#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09#BEGIN_EDITABLE#showFeedback%20=%20false;#END_EDITABLE#%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_18E####LOGIC_18####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%2046%20%7D);%0Aoutput%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%2050%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60showFeedback%20=%20true;%60);%0Apass.if.js.editable(1).equivalent(%60showFeedback%20=%20false;%60);##JS_E####LOGIC_18E####STEP_18E####STEP_19####INST_19##Checking%20feedback%20toggle%0A%0AIn%20the%20*steerCarToward*%20function,%20we%20have%20already%20determined%20how%20the%20car%20should%20rotate%20based%20on%20its%20current%20position%20and%20where%20it's%20going%20next,%20this%20is%20stored%20in%20the%20variables%20*clockwise*%20and%20*antiClockwise*.%0A%0AIf%20*clockwise*%20is%20true,%20the%20car%20rotates%20clockwise%20to%20its%20right,%20and%20if%20*antiClockwise*%20is%20true,%20the%20car%20rotates%20anti-clockwise%20to%20its%20left.%0A%0AWe%20now%20only%20need%20to%20check%20if%20*showFeedback*%20is%20true%20before%20deciding%20whether%20or%20not%20to%20display%20feedback%20information.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#if%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20steer#+27,%20create%20an%20%60if%60%20statement%20to%20check%20whether%20*showFeedback*%20is%20equal%20to%20*true*.##INST_19E####CODE_19####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09#BEGIN_EDITABLE#if%20(showFeedback%20==%20true)%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_19E####LOGIC_19####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'function%20steerCarToward',%20%7B%20line:%20'%5Cn%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%2025%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(showFeedback%20==%20true)%20%7B%7D%60);##JS_E####LOGIC_19E####STEP_19E####STEP_20####INST_20##Displaying%20feedback%0A%0AWe've%20added%20the%20same%20conditional%20statement%20in%203%20more%20places:%0A%5B-%0A%09(*)Inside%20the%20%60else%20if%20(antiClockwise)%20%7B%7D%60%20statement%0A%09(*)Inside%20the%20%60else%20if%20(cell%20==%20car.prevCell)%20%7B%7D%60%20statement,%20this%20is%20when%20the%20car%20is%20going%20back%20to%20the%20cell%20it%20had%20previously%20been%20in.%0A%09(*)After%20the%20%60else%20if%20(cell%20==%20car.prevCell)%20%7B%7D%60%20statement,%20this%20is%20when%20none%20of%20the%20conditions%20on%20+js#if%20(clockwise)#,%20js#if%20(antiClockwise)#%20&%20js#-=%20180#-1%20is%20true,%20which%20means%20the%20car%20won't%20be%20rotating.%0A-%5D%0A%0ANow%20we%20can%20make%20our%20chat-bot%20display%20the%20correct%20feedback%20in%20each%20situation%20using%20the%20%60displayBotMessage%60%20function.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20steer#+28,%20make%20the%20chat-bot%20say%20*%22Turning%20right.%22*.%0A%0A(!)On%20+js#on%20steer#+35,%20make%20the%20chat-bot%20say%20*%22Turning%20left%22*.%0A%0A(!)On%20+js#on%20steer#+42,%20make%20the%20chat-bot%20say%20*%22Turning%20around%22*.%0A%0A(!)On%20+js#on%20steer#+46,%20make%20the%20chat-bot%20say%20*%22Straight%20ahead%22*.##INST_20E####CODE_20####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09#BEGIN_EDITABLE#displayBotMessage('Turning%20right.');#END_EDITABLE#%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09#BEGIN_EDITABLE#displayBotMessage('Turning%20left.');#END_EDITABLE#%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09#BEGIN_EDITABLE#displayBotMessage('Turning%20around.');#END_EDITABLE#%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09#BEGIN_EDITABLE#displayBotMessage('Straight%20ahead.');#END_EDITABLE#%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_20E####LOGIC_20####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup.replace(/%5C%7B%5Cs*%5C%7D%5Cs*$/gm,%20'%7B%5Cn%5Ct%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%5Ct%7D');%0Aoutput%20=%20insertLine(output,%20'function%20steerCarToward',%20%7B%20line:%20'%5Cn%5Ct%5Ct%5Ctif%20(showFeedback%20==%20true)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%5Ct%7D',%20offset:%2032%20%7D);%0Aoutput%20=%20insertLine(output,%20'function%20steerCarToward',%20%7B%20line:%20'%5Cn%5Ct%5Ct%5Ctif%20(showFeedback%20==%20true)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%5Ct%7D',%20offset:%2039%20%7D);%0Aoutput%20=%20insertLine(output,%20'function%20steerCarToward',%20%7B%20line:%20'%5Ct%5Ctelse%20if%20(showFeedback%20==%20true)%20%7B%5Cn%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%7D',%20offset:%2044%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage('Turning%20right.');%60);%0Apass.if.js.editable(1).equivalent(%60displayBotMessage('Turning%20left.');%60);%0Apass.if.js.editable(2).equivalent(%60displayBotMessage('Turning%20around.');%60);%0Apass.if.js.editable(3).equivalent(%60displayBotMessage('Straight%20ahead.');%60);##JS_E####LOGIC_20E####STEP_20E####STEP_21####INST_21##Add%20your%20own%20commands%20&%20responses%0A%0AOur%20chat-bot%20now%20understands%20a%20few%20more%20commands,%20you%20can%20still%20add%20more%20to%20the%20list.%0A%0AIt's%20up%20to%20you,%20but%20since%20we've%20programmed%20our%20smart%20car%20to%20drive%20itself,%20it's%20a%20good%20idea%20for%20it%20to%20know%20about%20some%20locations,%20such%20as:%0A(js)else%20if%20(command%20==%20%22where%20is%20River%20Thames?%22)%20%7B%0A%20%20%20%20displayBotMessage(%22That's%20in%20London.%22);%0A%7D%0Aelse%20if%20(command%20==%20%22Best%20pizza%20in%20New%20York%22)%20%7B%0A%20%20%20%20displayBotMessage(%22Juliana's%20Pizza,%2019%20Old%20Fulton%20St%22);%0A%7D(#)%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A%09(*)%5B#js#relational%20operators%5D%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20decide#-11,%20add%20your%20own%20commands%20and%20responses.##INST_21E####CODE_21####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id='content'%3E%0A%09%09%3Cp%20id='title'%3EAuto%20Navigation%3C/p%3E%0A%0A%09%09%3Cdiv%20id='grid'%3E%0A%09%09%09%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%2012;%0Avar%20nRow%20=%208;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20roadCells%20=%20%5B%5D;%0A%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0A%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%09%09//%20%20##%20CUSTOM%20COMMANDS%20##%0A%09%09#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%0A%09%09//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.reachableRoads.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Returned%20to%20starting%20cell,%20turning%20around...');%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(currentCell.reachableRoads%5B0%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.currentRow%20=%20gridCells.filter(row%20=%3E%20row.includes(nextCell))%5B0%5D;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.currentRow%20=%20randomItemFrom(gridCells);%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.currentRow%5B0%5D;%0A%20%20%20%20var%20newRoadCell;%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(newRoadCell.paths);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(newRoadCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%0A%20%20%20%20%20%20%20%20//%20%20update%20prevCell%20for%20next%20loop%20iteration%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20newRoadCell;%0A%20%20%20%20%20%20%20%20roadCells.push(newRoadCell);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20cell.down%20=%20cell.left%20=%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.row%20=%20nthRow;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.column%20=%20nthColumn;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.location%20=%20'(x:%20'%20+%20(nthColumn%20+%201)%20+%20',%20y:%20'%20+%20(nthRow%20+%201)%20+%20')';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_21E####LOGIC_21####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'on%20decide',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-10%20%7D);%0A//%20output%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#',%20offset:%2052%20%7D);%0A//%20output%20=%20insertLine(output,%20'function%20decideNextMove',%20%7B%20line:%20'%5Ct%5Ct#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-10%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60%60);%0A//%20pass.on('readUserInput').var(%60command%20==%20'rocky%20hill'%60);##JS_E####LOGIC_21E####STEP_21E####STEP_22####INST_22##Chat-bot%20enhancement%0A%0AIn%20the%20%22Random%20Decision%22%20project,%20we%20were%20introduced%20to%20a%20more%20complex%20map%20with%20many%20paths,%20some%20lead%20to%20the%20finish%20line%20but%20some%20lead%20to%20dead%20ends.%0A%0AWe%20randomised%20the%20decision%20making%20of%20our%20smart%20car%20and%20improved%20its%20chances%20of%20reaching%20the%20finish%20line.%0A%0AWe%20will%20now%20continue%20to%20use%20the%20concept%20of%20randomness%20and%20create%20a%20random%20fact%20generator,%20so%20our%20chat-bot%20can%20use%20it%20to%20entertain%20the%20user%20while%20it's%20driving%20itself.##INST_22E####CODE_22####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_22E####LOGIC_22####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Aconst%20output%20=%20%60var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5C%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09##CUSTOM_COMMANDS##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE#%60;%0A%0Aconst%20customCommands%20=%20codeWithoutMarkup.replace(/%5B%5Cs%5CS%5D*%5C/%5C/%20%20##%20CUSTOM%20COMMANDS%20##/,%20'').split('').reverse().join('').replace(/%5B%5Cs%5CS%5D*##%20SDNAMMOC%20MOTSUC%20FO%20DNE%20##%20%20%5C/%5C//,%20'').split('').reverse().join('').trim();%0A%0Areturn%20output.replace(/##CUSTOM_COMMANDS##/,%20customCommands);%0A##JS_E####LOGIC_22E####STEP_22E####STEP_23####INST_23##Adding%20the%20%22fact%22%20command%0A%0AFirst%20let's%20add%20the%20actual%20command%20that%20will%20generate%20the%20random%20fact.%0A%0AWe'll%20keep%20this%20one%20general%20so%20it%20can%20be%20used%20for%20other%20things%20later,%20let's%20say%20%22tell%20me%22.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#else%20if%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+4,%20create%20an%20%60else%20if%60%20statement%20to%20check%20whether%20*command*%20is%20equal%20to%20*%22tell%20me%22*.##INST_23E####CODE_23####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09#BEGIN_EDITABLE#else%20if%20(command%20==%20'tell%20me')%20%7B%7D#END_EDITABLE#%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_23E####LOGIC_23####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'hide%20feedback',%20%7B%20line:%20'%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%203%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60else%20if%20(command%20==%20'tell%20me')%20%7B%7D%60);##JS_E####LOGIC_23E####STEP_23E####STEP_24####INST_24##The%20facts%20array%0A%0ATo%20achieve%20randomness,%20we%20must%20first%20have%20quantity.%0A%0AWe%20will%20put%20several%20facts%20into%20an%20array,%20and%20then%20we%20can%20pick%20a%20random%20item%20from%20that%20array%20to%20be%20displayed%20via%20our%20chat-bot.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A%09(*)%5B#js#array%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+5,%20create%20a%20variable%20called%20*facts*%20to%20store%20an%20empty%20array.##INST_24E####CODE_24####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09#BEGIN_EDITABLE#var%20facts%20=%20%5B%5D;#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_24E####LOGIC_24####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup.replace(/%5C%7B%5Cs*%5C%7D%5Cs*$/gm,%20'%7B%5Cn%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%7D');%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20facts%20=%20%5B%5D;%60);##JS_E####LOGIC_24E####STEP_24E####STEP_25####INST_25##The%20first%20fact%0A%0AIn%20the%20*facts*%20array,%20let's%20add%20our%20first%20fact.%0A%0ASince%20we'll%20be%20randomly%20selecting%20from%20this%20array%20later,%20every%20one%20of%20the%20facts%20must%20be%20a%20good%20one%20-%20think%20fun%20or%20smart.%0A%0ADon't%20hesitate%20the%20do%20a%20bit%20of%20searching%20online.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5Bstring#js#Data%20type%20-%20string%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#var%20facts#+1,%20add%20a%20string%20into%20the%20*facts*%20array.%0A(*)*Tip*:%20don't%20forget%20each%20item%20in%20an%20array%20should%20be%20followed%20by%20a%20comma.##INST_25E####CODE_25####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09#BEGIN_EDITABLE#'fact%201',#END_EDITABLE#%0A%09%09%09%5D;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_25E####LOGIC_25####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup.split('%5Cn');%0Aoutput%5B108%5D%20=%20'%5Ct%5Ct%5Ctvar%20facts%20=%20%5B%5Cn%5Ct%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct%5Ct%5D;'%0Areturn%20output.join('%5Cn');%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60%22fact%201%22,%60);%0A//%20const%20raw%20=%20code.js.editable%5B0%5D;%0A//%20code.js.editable%5B0%5D%20=%20%60arr%20=%20%5B$%7Braw%7D%5D;%60;%0A//%20pass.if.js.editable(0).equivalent(%60arr%20=%20%5B##STRING##,%5D;%60);##JS_E####LOGIC_25E####STEP_25E####STEP_26####INST_26##The%20second%20fact%0A%0ALet's%20put%20one%20more%20fact%20into%20the%20*facts*%20array.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5Bstring#js#Data%20type%20-%20string%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+7,%20add%20a%20string%20into%20the%20*facts*%20array.%0A(*)*Tip*:%20don't%20forget%20each%20item%20in%20an%20array%20should%20be%20followed%20by%20a%20comma.##INST_26E####CODE_26####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09#BEGIN_EDITABLE#'fact%202',#END_EDITABLE#%0A%09%09%09%5D;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_26E####LOGIC_26####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'hide%20feedback',%20%7B%20line:%20'%5Ct%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%206%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60%22fact%202%22,%60);%0A//%20const%20raw%20=%20code.js.editable%5B0%5D;%0A//%20code.js.editable%5B0%5D%20=%20%60arr%20=%20%5B$%7Braw%7D%5D;%60;%0A//%20pass.if.js.editable(0).equivalent(%60arr%20=%20%5B##STRING##,%5D;%60);##JS_E####LOGIC_26E####STEP_26E####STEP_27####INST_27##Generating%20a%20random%20number%0A%0AThe%20*facts*%20array%20has%202%20items,%20in%20order%20to%20access%20both%20items,%20we%20need%20the%20index%20numbers%200%20and%201.%0A(*)*Tip*:%20the%20index%20of%20the%20first%20item%20in%20an%20array%20is%200.%0A%0A*Math.random*%20gives%20us%20a%20random%20number%20between%200%20and%201%20not%20including%201,%20we%20can%20multiply%20it%20by%20the%20length%20of%20the%20*facts*%20array%20(%20which%20is%202%20),%20then%20we'll%20get%20a%20number%20that%20is%20between%200%20and%202%20not%20including%202.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A%09(*)%5B#js#Math.random%5D%0A%09(*)%5B#js#length%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#var%20facts#+4,%20create%20a%20variable%20called%20*randomNumber*%20to%20store%20a%20random%20number%20between%200%20and%20%60facts.length%60.##INST_27E####CODE_27####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09#BEGIN_EDITABLE#var%20randomNumber%20=%20Math.random()%20*%20facts.length;#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_27E####LOGIC_27####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'var%20facts',%20%7B%20line:%20'%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%203%20%7D);%0Areturn%20output;%0A%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20randomNumber%20=%20Math.random()%20*%20facts.length;%60);##JS_E####LOGIC_27E####STEP_27E####STEP_28####INST_28##Random%20index%0A%0AWe%20now%20have%20a%20random%20number%20between%200%20and%202,%20but%20this%20is%201)%20not%20an%20integer%20and%202)%20bigger%20than%201,%20so%20we%20can't%20use%20it%20as%20the%20index%20for%20the%20*facts*%20array.%0A%0ANot%20before%20we%20round%20it%20down%20into%20an%20integer,%20after%20we%20do%20that%20it'll%20meet%20both%20requirements%20as%20an%20index%20for%20the%20*facts*%20array.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A%09(*)%5B#js#Math.floor%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+10,%20create%20a%20variable%20called%20*randomIndex*%20to%20store%20the%20value%20rounded%20down%20from%20*randomNumber*.##INST_28E####CODE_28####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09var%20randomNumber%20=%20Math.random()%20*%20facts.length;%0A%09%09%09#BEGIN_EDITABLE#var%20randomIndex%20=%20Math.floor(randomNumber);#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_28E####LOGIC_28####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'var%20facts',%20%7B%20line:%20'%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%204%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20randomIndex%20=%20Math.floor(randomNumber);%60);##JS_E####LOGIC_28E####STEP_28E####STEP_29####INST_29##Random%20fact%0A%0AWe%20can%20now%20use%20*randomIndex*%20as%20the%20index%20number%20to%20select%20an%20item%20from%20the%20*facts*%20array,%20and%20because%20*randomIndex*%20is%20randomly%20generated,%20we%20don't%20know%20which%20item%20will%20be%20selected,%20until%20we%20display%20it%20in%20the%20chat-bot%20that%20is.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#variable%5D%0A%09(*)%5B#js#array%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+11,%20select%20an%20item%20from%20the%20*facts*%20array%20using%20*randomIndex*%20and%20store%20it%20in%20a%20new%20variable%20called%20*randomFact*.##INST_29E####CODE_29####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09var%20randomNumber%20=%20Math.random()%20*%20facts.length;%0A%09%09%09var%20randomIndex%20=%20Math.floor(randomNumber);%0A%09%09%09#BEGIN_EDITABLE#var%20randomFact%20=%20facts%5BrandomIndex%5D;#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_29E####LOGIC_29####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'var%20facts',%20%7B%20line:%20'%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%205%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20randomFact%20=%20facts%5BrandomIndex%5D;%60);##JS_E####LOGIC_29E####STEP_29E####STEP_30####INST_30##Displaying%20the%20random%20fact%0A%0AWith%20the%20randomly%20generated%20fact%20stored%20in%20the%20*randomFact*%20variable,%20we%20can%20use%20the%20*displayBotMessage*%20function%20to%20find%20out%20what%20it%20is.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#function%20arguments%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#hide%20feedback#+13,%20make%20the%20chat-bot%20display%20what's%20stored%20in%20the%20*randomFact*%20variable.##INST_30E####CODE_30####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09var%20randomNumber%20=%20Math.random()%20*%20facts.length;%0A%09%09%09var%20randomIndex%20=%20Math.floor(randomNumber);%0A%09%09%09var%20randomFact%20=%20facts%5BrandomIndex%5D;%0A%0A%09%09%09#BEGIN_EDITABLE#displayBotMessage(randomFact);#END_EDITABLE#%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_30E####LOGIC_30####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'var%20facts',%20%7B%20line:%20'%5Cn%5Ct%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#',%20offset:%206%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60displayBotMessage(randomFact);%60);##JS_E####LOGIC_30E####STEP_30E####STEP_31####INST_31##Adding%20more%20facts%0A%0ANow%20that%20we%20are%20done%20programming%20the%20functionality%20of%20random%20facts,%20the%20only%20thing%20left%20to%20do%20is%20to%20add%20more%20items%20into%20the%20array,%20so%20that%20we%20will%20get%20more%20surprising%20results.%0A%0A(---)%0A%0A%5B-%0A%09(*)%5B#js#array%5D%0A%09(*)%5B#js#Math.random%5D%0A%09(*)%5B#js#Math.floor%5D%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#on%20decide#-11,%20add%20more%20items%20into%20the%20*facts*%20array.##INST_31E####CODE_31####HTML##%3C!DOCTYPE%20html%3E%0D%0A%3Chtml%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0D%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0D%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0D%0A%3C/head%3E%0D%0A%3Cbody%3E%0D%0A%20%20%20%20%3Cdiv%20id='content'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3ERandom%20Decision%3C/p%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0D%0A%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0D%0A%20%20%20%20%20%20%20%20%3C/div%3E%0D%0A%20%20%20%20%3C/div%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0D%0A%3C/body%3E%0D%0A%3C/html%3E%0D%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0D%0A@font-face%20%7B%0D%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0D%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0D%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0D%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0D%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0D%0A%20%20%20%20font-weight:%20normal;%0D%0A%20%20%20%20font-style:%20normal;%0D%0A%7D%0D%0A%0D%0A*%20%7B%0D%0A%20%20%20%20margin:%200;%0D%0A%20%20%20%20box-sizing:%20border-box;%0D%0A%7D%0D%0A%0D%0Ahtml,%0D%0Abody%20%7B%0D%0A%20%20%20%20height:%20100%25;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%20%20%20%20text-align:%20center;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20background-color:%20#333;%0D%0A%7D%0D%0A%0D%0Abutton,%0D%0Ainput,%0D%0Atextarea%20%7B%0D%0A%20%20%20%20outline:%20none;%0D%0A%20%20%20%20border:%20none;%0D%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0D%0A%7D%0D%0A%0D%0Abutton%20%7B%0D%0A%20%20%20%20cursor:%20pointer;%0D%0A%7D%0D%0A%0D%0Abutton:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98);%0D%0A%7D%0D%0A%0D%0A#title%20%7B%0D%0A%20%20%20%20padding-top:%2010px;%0D%0A%20%20%20%20margin-bottom:%2010px;%0D%0A%20%20%20%20color:%20white;%0D%0A%7D%0D%0A%0D%0A#content%20%7B%0D%0A%20%20%20%20width:%2090vw;%0D%0A%20%20%20%20margin:%20auto;%0D%0A%7D%0D%0A%0D%0A#content,%0D%0A#grid%20%7B%0D%0A%20%20%20%20position:%20relative;%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20simulation%20area%20styles%0D%0A*/%0D%0A#grid%20%7B%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20mediumseagreen;%0D%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0D%0A%20%20%20%20overflow:%20hidden;%0D%0A%7D%0D%0A%0D%0A#grid%3Ediv%20%7B%0D%0A%20%20%20%20position:%20absolute;%0D%0A%7D%0D%0A%0D%0A#car%20%7B%0D%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0D%0A%20%20%20%20background-size:%2060%25;%0D%0A%20%20%20%20background-position:%2025%25%20center;%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20transition:%20left%200.4s%20linear,%20top%200.4s%20linear,%20transform%200.1s%20ease-in-out;%0D%0A%20%20%20%20z-index:%201;%0D%0A%7D%0D%0A%0D%0A.road%20%7B%0D%0A%20%20%20%20background-repeat:%20no-repeat;%0D%0A%20%20%20%20background-origin:%20border-box;%0D%0A%20%20%20%20background-size:%20100%25;%0D%0A%20%20%20%20border:%201px%20dotted%20rgba(0,%200,%200,%200.3);%0D%0A%20%20%20%20transform:%20scale(1.015);%0D%0A%7D%0D%0A%0D%0A#btnRun%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20bottom:%2020px;%0D%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0D%0A%20%20%20%20font-size:%2050px;%0D%0A%20%20%20%20border-radius:%2020px;%0D%0A%20%20%20%20font-family:%20'FailedAttempt';%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%20%20%20%20transform-origin:%200;%0D%0A%7D%0D%0A%0D%0A#btnRun:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnRun:active%20%7B%0D%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0D%0A%7D%0D%0A%0D%0A#btnRun%3E.fa%20%7B%0D%0A%20%20%20%20transform:%20scale(0.6);%0D%0A%7D%0D%0A%0D%0A/*%0D%0A%20%20%20%20chat-bot%20styles%0D%0A*/%0D%0A#chatbot%20%7B%0D%0A%20%20%20%20position:%20fixed;%0D%0A%20%20%20%20left:%2050%25;%0D%0A%20%20%20%20bottom:%200;%0D%0A%20%20%20%20width:%20100%25;%0D%0A%20%20%20%20padding:%200%2020px%2020px;%0D%0A%20%20%20%20max-width:%20600px;%0D%0A%20%20%20%20transform:%20translateX(-50%25);%0D%0A%7D%0D%0A%0D%0A#inputContainer%20%7B%0D%0A%20%20%20%20display:%20flex;%0D%0A%7D%0D%0A%0D%0A#messages,%0D%0A#userInput%20%7B%0D%0A%20%20%20%20font-family:%20'VT323';%0D%0A%7D%0D%0A%0D%0A#messages%20%7B%0D%0A%20%20%20%20height:%20120px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20margin:%20auto%20auto%2010px;%0D%0A%20%20%20%20padding-bottom:%208px;%0D%0A%20%20%20%20font-size:%2018px;%0D%0A%20%20%20%20overflow-y:%20auto;%0D%0A%20%20%20%20background-color:%20#222;%0D%0A%20%20%20%20color:%20gainsboro;%0D%0A%7D%0D%0A%0D%0A.userMessage,%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20padding:%208px%2015px%200;%0D%0A%20%20%20%20border-radius:%2015px;%0D%0A%7D%0D%0A%0D%0A.userMessage%20%7B%0D%0A%20%20%20%20text-align:%20right;%0D%0A%20%20%20%20color:%20ghostwhite;%0D%0A%7D%0D%0A%0D%0A.botMessage%20%7B%0D%0A%20%20%20%20text-align:%20left;%0D%0A%20%20%20%20color:%20lightblue;%0D%0A%7D%0D%0A%0D%0A#userInput%20%7B%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%2010px%2020px;%0D%0A%20%20%20%20border-radius:%2023px;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20color:%20#333;%0D%0A%20%20%20%20flex:%20auto;%0D%0A%7D%0D%0A%0D%0A#userInput:hover,%0D%0A#userInput:focus,%0D%0A#btnSend:hover%20%7B%0D%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0D%0A%7D%0D%0A%0D%0A#btnSend%20%7B%0D%0A%20%20%20%20margin-left:%2010px;%0D%0A%20%20%20%20height:%2040px;%0D%0A%20%20%20%20padding:%200%2010px;%0D%0A%20%20%20%20border-radius:%2010px;%0D%0A%20%20%20%20background-color:%20dodgerblue;%0D%0A%20%20%20%20color:%20white;%0D%0A%20%20%20%20font-size:%2020px;%0D%0A%20%20%20%20flex:%20none;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar%20%7B%0D%0A%20%20%20%20width:%2010px;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-thumb%20%7B%0D%0A%20%20%20%20border-style:%20solid;%0D%0A%20%20%20%20border-color:%20transparent;%0D%0A%20%20%20%20border-radius:%205px;%0D%0A%20%20%20%20background-color:%20silver;%0D%0A%20%20%20%20background-clip:%20content-box;%0D%0A%7D%0D%0A%0D%0A#messages::-webkit-scrollbar-track%20%7B%0D%0A%20%20%20%20margin:%2010px;%0D%0A%7D%0D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%206;%0Avar%20nRow%20=%204;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20showFeedback%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%20%20%20%20%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%20%20%20%20%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09var%20randomNumber%20=%20Math.random()%20*%20facts.length;%0A%09%09%09var%20randomIndex%20=%20Math.floor(randomNumber);%0A%09%09%09var%20randomFact%20=%20facts%5BrandomIndex%5D;%0A%0A%09%09%09displayBotMessage(randomFact);%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyan?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%09%09//%20%20##%20CUSTOM%20COMMANDS%20##%0A%09%09#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%0A%09%09//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%20%20%20%20%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%20%20%20%20%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_31E####LOGIC_31####HTML####HTML_E####CSS####CSS_E####JS##//%20Transition:%0Alet%20output%20=%20codeWithoutMarkup;%0Aoutput%20=%20insertLine(output,%20'on%20decide',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-10%20%7D);%0A//%20output%20=%20insertLine(output,%20'function%20readUserInput',%20%7B%20line:%20'%5Ct%5Ct//%20%20##%20CUSTOM%20COMMANDS%20##%5Cn%5Ct%5Ct#BEGIN_EDITABLE#',%20offset:%2052%20%7D);%0A//%20output%20=%20insertLine(output,%20'function%20decideNextMove',%20%7B%20line:%20'%5Ct%5Ct#END_EDITABLE#%5Cn%5Ct%5Ct//%20%20##%20END%20OF%20CUSTOM%20COMMANDS%20##',%20offset:%20-10%20%7D);%0Areturn%20output;%0A%0A//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60%60);%0A//%20pass.on('readUserInput').var(%60command%20==%20'starry%20night'%60);##JS_E####LOGIC_31E####STEP_31E####STEP_32####INST_32##Final%20touches%0A%0ACongratulations!%20you%20have%20completed%20this%20project.%20We've%20added%20some%20more%20commands%20for%20you:%0A%5B-%0A%09(*)%22speed%20up%22%20&%20%22slow%20down%22%20will%20increase/decrease%20the%20car's%20speed%20by%2030%25%20each%20time%20the%20command%20is%20given%20to%20the%20chat-bot.%0A%09(*)%22play%20back%22%20shows%20you%20the%20best%20path%20the%20car%20has%20found.%0A%09(*)%22stop%22%20will%20stop%20the%20car's%20auto%20drive%20mode.%0A%09(*)%22reset%22%20will%20return%20the%20car%20to%20its%20starting%20position.%0A-%5D%0A%0ATake%20some%20time%20to%20familiarise%20with%20the%20new%20commands%20or%20you%20can%20keep%20improving%20the%20chat-bot%20conversations.%0A%0AMake%20sure%20you're%20happy%20with%20your%20custom%20commands%20&%20responses%20before%20your%20presentation!##INST_32E####CODE_32####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=VT323%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20#BEGIN_EDITABLE#%20%20%20%20#END_EDITABLE#%0A%20%20%20%20%3Clink%20href=%22/resources/css/font-awesome.min.css%22%20rel=%22stylesheet%22%3E%20%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Cdiv%20id='content'%3E%0A%20%20%20%20%20%20%20%20%3Cp%20id='title'%3E#BEGIN_EDITABLE#My%20CarBot#END_EDITABLE#%3C/p%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='grid'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id='car'%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id='chatbot'%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='messages'%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id='inputContainer'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id='userInput'%20placeholder='Type%20message%20here'%20autocomplete='off'%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id='btnSend'%3E%3Ci%20class='fa%20fa-paper-plane%20fa-fw'%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##/*%20font%20converted%20using%20font-converter.net.%20thank%20you!%20*/%0A@font-face%20%7B%0A%20%20%20%20font-family:%20%22FailedAttempt%22;%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot%22);%0A%20%20%20%20/*%20IE9%20Compat%20Modes%20*/%0A%20%20%20%20src:%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.eot?#iefix%22)%20format(%22embedded-opentype%22),%0A%20%20%20%20%20%20%20%20/*%20IE6-IE8%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.otf%22)%20format(%22opentype%22),%0A%20%20%20%20%20%20%20%20/*%20Open%20Type%20Font%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.svg%22)%20format(%22svg%22),%0A%20%20%20%20%20%20%20%20/*%20Legacy%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.ttf%22)%20format(%22truetype%22),%0A%20%20%20%20%20%20%20%20/*%20Safari,%20Android,%20iOS%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff%22)%20format(%22woff%22),%0A%20%20%20%20%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20%20%20%20%20url(%22https://imding.github.io/fonts/FailedAttempt/FailedAttempt.woff2%22)%20format(%22woff2%22);%0A%20%20%20%20/*%20Modern%20Browsers%20*/%0A%20%20%20%20font-weight:%20normal;%0A%20%20%20%20font-style:%20normal;%0A%7D%0A%0A*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20box-sizing:%20border-box;%0A%7D%0A%0Ahtml,%0Abody%20%7B%0A%20%20%20%20height:%20100%25;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20background-color:%20#333;%0A%7D%0A%0Abutton,%0Ainput,%0Atextarea%20%7B%0A%20%20%20%20outline:%20none;%0A%20%20%20%20border:%20none;%0A%20%20%20%20transition:%20box-shadow%200.2s%20ease-in-out;%0A%7D%0A%0Abutton%20%7B%0A%20%20%20%20cursor:%20pointer;%0A%7D%0A%0Abutton:active%20%7B%0A%20%20%20%20transform:%20scale(0.98);%0A%7D%0A%0A#title%20%7B%0A%20%20%20%20padding-top:%2010px;%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20color:%20white;%0A%7D%0A%0A#content%20%7B%0A%20%20%20%20width:%2090vw;%0A%20%20%20%20margin:%20auto;%0A%7D%0A%0A#content,%0A#grid%20%7B%0A%20%20%20%20position:%20relative;%0A%7D%0A%0A/*%0A%20%20%20%20simulation%20area%20styles%0A*/%0A#grid%20%7B%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20mediumseagreen;%0A%20%20%20%20background-image:%20url('%20%20');%0A%20%20%20%20background-size:%2032px;%0A%20%20%20%20box-shadow:%200%200%2015px%20#111;%0A%20%20%20%20overflow:%20hidden;%0A%7D%0A%0A#grid%3Ediv%20%7B%0A%20%20%20%20position:%20absolute;%0A%7D%0A%0A#car%20%7B%0A%20%20%20%20background-image:%20url('https://app.bsd.education/resources/car_blue.png');%0A%20%20%20%20background-size:%2060%25;%0A%20%20%20%20background-position:%2025%25%20center;%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20transition-property:%20left,%20top,%20transform;%0A%20%20%20%20transition-timing-function:%20linear,%20linear,%20ease-in-out;%0A%20%20%20%20z-index:%201;%0A%7D%0A%0A.road%20%7B%0A%20%20%20%20background-repeat:%20no-repeat;%0A%20%20%20%20background-origin:%20border-box;%0A%20%20%20%20background-size:%20100%25;%0A%20%20%20%20transform:%20scale(1.015);%0A%7D%0A%0A#btnRun%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20bottom:%2020px;%0A%20%20%20%20padding:%2010px%2030px%2010px%2015px;%0A%20%20%20%20font-size:%2050px;%0A%20%20%20%20border-radius:%2020px;%0A%20%20%20%20font-family:%20'FailedAttempt';%0A%20%20%20%20color:%20ghostwhite;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%20%20%20%20transform-origin:%200;%0A%7D%0A%0A#btnRun:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2020px%20#111;%0A%7D%0A%0A#btnRun:active%20%7B%0A%20%20%20%20transform:%20scale(0.98)%20translate(-50%25);%0A%7D%0A%0A#btnRun%3E.fa%20%7B%0A%20%20%20%20transform:%20scale(0.6);%0A%7D%0A%0A/*%0A%20%20%20%20chat-bot%20styles%0A*/%0A#chatbot%20%7B%0A%20%20%20%20position:%20fixed;%0A%20%20%20%20left:%2050%25;%0A%20%20%20%20bottom:%200;%0A%20%20%20%20width:%20100%25;%0A%20%20%20%20padding:%200%2020px%2020px;%0A%20%20%20%20max-width:%20600px;%0A%20%20%20%20transform:%20translateX(-50%25);%0A%7D%0A%0A#inputContainer%20%7B%0A%20%20%20%20display:%20flex;%0A%7D%0A%0A#messages,%0A#userInput%20%7B%0A%20%20%20%20font-family:%20'VT323';%0A%7D%0A%0A#messages%20%7B%0A%20%20%20%20height:%20120px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20margin:%20auto%20auto%2010px;%0A%20%20%20%20padding-bottom:%208px;%0A%20%20%20%20font-size:%2018px;%0A%20%20%20%20overflow-y:%20auto;%0A%20%20%20%20background-color:%20#222;%0A%20%20%20%20color:%20gainsboro;%0A%7D%0A%0A.userMessage,%0A.botMessage%20%7B%0A%20%20%20%20padding:%208px%2015px%200;%0A%20%20%20%20border-radius:%2015px;%0A%7D%0A%0A.userMessage%20%7B%0A%20%20%20%20text-align:%20right;%0A%20%20%20%20color:%20ghostwhite;%0A%7D%0A%0A.botMessage%20%7B%0A%20%20%20%20text-align:%20left;%0A%20%20%20%20color:%20lightblue;%0A%7D%0A%0A#userInput%20%7B%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%2010px%2020px;%0A%20%20%20%20border-radius:%2023px;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20color:%20#333;%0A%20%20%20%20flex:%20auto;%0A%7D%0A%0A#userInput:hover,%0A#userInput:focus,%0A#btnSend:hover%20%7B%0A%20%20%20%20box-shadow:%200%200%2010px%20#111;%0A%7D%0A%0A#btnSend%20%7B%0A%20%20%20%20margin-left:%2010px;%0A%20%20%20%20height:%2040px;%0A%20%20%20%20padding:%200%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background-color:%20dodgerblue;%0A%20%20%20%20color:%20white;%0A%20%20%20%20font-size:%2020px;%0A%20%20%20%20flex:%20none;%0A%7D%0A%0A#messages::-webkit-scrollbar%20%7B%0A%20%20%20%20width:%2010px;%0A%7D%0A%0A#messages::-webkit-scrollbar-thumb%20%7B%0A%20%20%20%20border-style:%20solid;%0A%20%20%20%20border-color:%20transparent;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background-color:%20silver;%0A%20%20%20%20background-clip:%20content-box;%0A%7D%0A%0A#messages::-webkit-scrollbar-track%20%7B%0A%20%20%20%20margin:%2010px;%0A%7D%0A##CSS_E####JS##var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%208;%0Avar%20nRow%20=%206;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Avar%20showFeedback%20=%20false;%0Avar%20viewingMode%20=%20false;%0Avar%20shortTermMemory%20=%20%5B%5D;%0Avar%20shortestPath%20=%20%5B%5D;%0A%0Avar%20iteration%20=%201;%0Avar%20speed%20=%200.1;%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.className%20=%20'normal';%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20setSpeed(speed);%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell%20!=%20car.startCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Reset%20the%20position%20of%20the%20car%20before%20using%20the%20%22auto%20drive%22%20command.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'speed%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setSpeed(speed%20*=%200.7);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'slow%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setSpeed(speed%20/=%200.7);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'stop')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('%22auto%20drive%22%20stopped,%20total%20iterations:%20'%20+%20iteration);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'reset')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20must%20stop%20the%20car%20before%20resetting.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'play%20back')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20must%20stop%20the%20car%20first.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showShortestPath();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'tell%20me')%20%7B%0A%09%09%09var%20facts%20=%20%5B%0A%09%09%09%09'fact%201',%0A%09%09%09%09'fact%202',%0A%09%09%09%5D;%0A%09%09%09var%20randomNumber%20=%20Math.random()%20*%20facts.length;%0A%09%09%09var%20randomIndex%20=%20Math.floor(randomNumber);%0A%09%09%09var%20randomFact%20=%20facts%5BrandomIndex%5D;%0A%0A%09%09%09displayBotMessage(randomFact);%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'who%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('I%20am%20B-Bot');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'how%20old%20are%20you?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Five');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'where%20is%20the%20grand%20canyon?')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Arizona,%20United%20States');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20setSpeed(t)%20%7B%0A%20%20%20%20speed%20=%20t;%0A%20%20%20%20car.style.transitionDuration%20=%20t%20+%20's,%20'%20+%20t%20+%20's,%20'%20+%20(t%20/%204)%20+%20's';%0A%7D%0A%0Afunction%20newIteration()%20%7B%0A%20%20%20%20shortTermMemory%20=%20%5B%5D;%0A%20%20%20%20iteration%20+=%201;%0A%20%20%20%20setTimeout(decideNextMove,%20500);%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%20%20%20%20shortTermMemory.push(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%20%20%20%20shortTermMemory.push(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20shortestPath%20=%20shortTermMemory;%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line%20in%20'%20+%20shortestPath.length%20+%20'%20steps!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%20%20%20%20newIteration();%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20shortTermMemory%20=%20%5B%5D;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetCar()%20%7B%0A%20%20%20%20car.style.transitionDuration%20=%20'0s,%200s,%200s';%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.prevCell%20=%20null;%0A%20%20%20%20car.currentCell%20=%20null;%0A%20%20%20%20moveCarTo(car.startCell);%0A%20%20%20%20setTimeout(()%20=%3E%20%7B%20setSpeed(speed)%20%7D,%20100);%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(!car.prevCell)%20return;%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20if%20(shortestPath.length%20%3E%200%20&&%20shortTermMemory.length%20==%20shortestPath.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20algorithm%20failed%20to%20find%20a%20shorter%20path.');%0A%20%20%20%20%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20%20%20%20%20newIteration();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(viewingMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20playbackIndex%20+=%201;%0A%0A%20%20%20%20%20%20%20%20if%20(playbackIndex%20==%20shortestPath.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Playback%20ended.');%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(shortestPath%5BplaybackIndex%5D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showShortestPath()%20%7B%0A%20%20%20%20if%20(car.currentCell%20!=%20car.startCell)%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('Please%20reset%20the%20car%20before%20viewing%20the%20found%20path.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.disable();%0A%0A%20%20%20%20%20%20%20%20viewingMode%20=%20true;%0A%20%20%20%20%20%20%20%20playbackIndex%20=%200;%0A%20%20%20%20%20%20%20%20moveCarTo(shortestPath%5BplaybackIndex%5D);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%0A##JS_E####CODE_32E####LOGIC_32####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60%60);%0Apass.if.html.editable(1).equivalent(%60Iteration%20&%20Memory%60);##HTML_E####CSS####CSS_E####JS##//%20Transition:%0Aconst%20output%20=%20%60var%20content%20=%20document.querySelector('#content');%0Avar%20title%20=%20document.querySelector('#title');%0Avar%20grid%20=%20document.querySelector('#grid');%0Avar%20car%20=%20document.querySelector('#car');%0A%0Avar%20chatbot%20=%20document.querySelector('#chatbot');%0Avar%20messages%20=%20document.querySelector('#messages');%0Avar%20userInput%20=%20document.querySelector('#userInput');%0Avar%20btnSend%20=%20document.querySelector('#btnSend');%0A%0Avar%20nColumn%20=%20#BEGIN_EDITABLE#8#END_EDITABLE#;%0Avar%20nRow%20=%20#BEGIN_EDITABLE#6#END_EDITABLE#;%0Avar%20deadends%20=%200.3;%0Avar%20cellSize%20=%2090%20/%20nColumn;%0Avar%20gridCells%20=%20%5B%5D;%0Avar%20autoMode%20=%20false;%0Avar%20imagePath%20=%20'https://app.bsd.education/resources';%0A%0Avar%20showFeedback%20=%20false;%0Avar%20viewingMode%20=%20false;%0Avar%20shortTermMemory%20=%20%5B%5D;%0Avar%20shortestPath%20=%20%5B%5D;%0A%0Avar%20iteration%20=%201;%0Avar%20speed%20=%20#BEGIN_EDITABLE#0.1#END_EDITABLE#;%0A%0Awindow.onload%20=%20init;%0Awindow.onresize%20=%20resizeContent;%0Awindow.onkeypress%20=%20handleKeyPress;%0A%0AbtnSend.onclick%20=%20readUserInput;%0A%0AbtnSend.enable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20false;%0A%20%20%20%20btnSend.style.filter%20=%20'inherit';%0A%20%20%20%20btnSend.style.opacity%20=%20'inherit';%0A%7D;%0A%0AbtnSend.disable%20=%20()%20=%3E%20%7B%0A%20%20%20%20btnSend.disabled%20=%20true;%0A%20%20%20%20btnSend.style.filter%20=%20'grayscale(0.6)';%0A%20%20%20%20btnSend.style.opacity%20=%20'0.6';%0A%7D;%0A%0Afunction%20init()%20%7B%0A%20%20%20%20drawGrid();%0A%20%20%20%20plotPath();%0A%0A%20%20%20%20car.className%20=%20'normal';%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20car.style.height%20=%20car.style.width;%0A%0A%20%20%20%20//%20%20place%20the%20car%20on%20the%20first%20block%20in%20the%20track%0A%20%20%20%20car.rotation%20=%200;%0A%0A%20%20%20%20//%20%20handle%20the%20transitionend%20event%20using%20the%20checkPrevMove%20function%0A%20%20%20%20car.addEventListener('transitionend',%20checkPrevMove);%0A%0A%20%20%20%20setSpeed(speed);%0A%20%20%20%20resizeContent();%0A%7D%0A%0Afunction%20readUserInput()%20%7B%0A%20%20%20%20var%20command%20=%20userInput.value.trim().replace(/%5C%5Cs+/g,%20'%20').toLowerCase();%0A%0A%20%20%20%20if%20(command.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20displayUserMessage(command);%0A%0A%20%20%20%20%20%20%20%20if%20(command%20==%20'hello')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Hi,%20how%20can%20I%20help%20you?');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.up%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20above%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.down%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20below%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20left')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.left%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20left%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'go%20right')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('There%20is%20nothing%20to%20the%20right%20of%20the%20car.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(car.currentCell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'auto%20drive')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(car.currentCell%20!=%20car.startCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Reset%20the%20position%20of%20the%20car%20before%20using%20the%20%22auto%20drive%22%20command.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(command%20==%20'show%20feedback')%20%7B%0A%09%09%09displayBotMessage('Sure,%20real-time%20feedback%20is%20now%20turned%20on.');%0A%09%09%09showFeedback%20=%20true;%0A%09%09%7D%0A%09%09else%20if%20(command%20==%20'hide%20feedback')%20%7B%0A%09%09%09displayBotMessage('Okay,%20feedback%20is%20turned%20off.');%0A%09%09%09showFeedback%20=%20false;%0A%09%09%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'speed%20up')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setSpeed(speed%20*=%200.7);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'slow%20down')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setSpeed(speed%20/=%200.7);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'stop')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('%22auto%20drive%22%20stopped,%20total%20iterations:%20'%20+%20iteration);%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'reset')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20must%20stop%20the%20car%20before%20resetting.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(command%20==%20'play%20back')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20must%20stop%20the%20car%20first.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showShortestPath();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09##CUSTOM_COMMANDS##%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage(%22Sorry,%20I%20didn't%20understand%20your%20command:%20%22%20+%20command);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20userInput.focus();%0A%7D%0A%0Afunction%20setSpeed(t)%20%7B%0A%20%20%20%20speed%20=%20t;%0A%20%20%20%20car.style.transitionDuration%20=%20t%20+%20's,%20'%20+%20t%20+%20's,%20'%20+%20(t%20/%204)%20+%20's';%0A%7D%0A%0Afunction%20newIteration()%20%7B%0A%20%20%20%20shortTermMemory%20=%20%5B%5D;%0A%20%20%20%20iteration%20+=%201;%0A%20%20%20%20setTimeout(decideNextMove,%20500);%0A%7D%0A%0Afunction%20decideNextMove()%20%7B%0A%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%20%20%20%20var%20availableCells%20=%20%5B%5D;%0A%0A%20%20%20%20if%20(currentCell.right%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.right))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.right);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.up%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.up))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.up);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.down%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.down))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.down);%0A%20%20%20%20%7D%0A%20%20%20%20if%20(currentCell.left%20!=%20prevCell%20&&%20currentCell.reachableRoads.includes(currentCell.left))%20%7B%0A%20%20%20%20%20%20%20%20availableCells.push(currentCell.left);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(availableCells.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20moveCarTo(availableCells%5B0%5D);%0A%20%20%20%20%20%20%20%20shortTermMemory.push(availableCells%5B0%5D);%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(availableCells.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20randomNumber%20=%20Math.random()%20*%20availableCells.length;%0A%20%20%20%20%20%20%20%20var%20randomIndex%20=%20Math.floor(randomNumber);%0A%20%20%20%20%20%20%20%20var%20randomCell%20=%20availableCells%5BrandomIndex%5D;%0A%0A%20%20%20%20%20%20%20%20moveCarTo(randomCell);%0A%20%20%20%20%20%20%20%20shortTermMemory.push(randomCell);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20autoMode%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20shortestPath%20=%20shortTermMemory;%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Your%20AutoDrive%20system%20worked,%20the%20car%20has%20reached%20the%20finish%20line%20in%20'%20+%20shortestPath.length%20+%20'%20steps!');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20AutoDrive%20system%20failed%20to%20determine%20where%20to%20go%20next.');%0A%20%20%20%20%20%20%20%20%20%20%20%20newIteration();%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20shortTermMemory%20=%20%5B%5D;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetCar()%20%7B%0A%20%20%20%20car.style.transitionDuration%20=%20'0s,%200s,%200s';%0A%20%20%20%20car.rotation%20=%200;%0A%20%20%20%20car.prevCell%20=%20null;%0A%20%20%20%20car.currentCell%20=%20null;%0A%20%20%20%20moveCarTo(car.startCell);%0A%20%20%20%20setTimeout(()%20=%3E%20%7B%20setSpeed(speed)%20%7D,%20100);%0A%7D%0A%0Afunction%20checkPrevMove()%20%7B%0A%20%20%20%20if%20(!car.prevCell)%20return;%0A%20%20%20%20if%20(event%20&&%20event.propertyName%20==%20'transform')%20return;%0A%0A%20%20%20%20if%20(autoMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20if%20(shortestPath.length%20%3E%200%20&&%20shortTermMemory.length%20==%20shortestPath.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20algorithm%20failed%20to%20find%20a%20shorter%20path.');%0A%20%20%20%20%20%20%20%20%20%20%20%20resetCar();%0A%20%20%20%20%20%20%20%20%20%20%20%20newIteration();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20decideNextMove();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(viewingMode%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20playbackIndex%20+=%201;%0A%0A%20%20%20%20%20%20%20%20if%20(playbackIndex%20==%20shortestPath.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('Playback%20ended.');%0A%20%20%20%20%20%20%20%20%20%20%20%20btnSend.enable();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20moveCarTo(shortestPath%5BplaybackIndex%5D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.enable();%0A%0A%20%20%20%20%20%20%20%20var%20currentCell%20=%20car.currentCell;%0A%20%20%20%20%20%20%20%20var%20prevCell%20=%20car.prevCell;%0A%0A%20%20%20%20%20%20%20%20//%20%20make%20sure%20the%20path%20to%20the%20current%20cell%20is%20valid%0A%20%20%20%20%20%20%20%20if%20(prevCell.reachableRoads.includes(currentCell))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(currentCell.id%20==%20'finish')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20have%20reached%20the%20finish%20line!');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(currentCell.className%20!=%20'road'%20%7C%7C%20(prevCell.className%20==%20currentCell.className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('You%20drove%20the%20car%20off%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayBotMessage('The%20car%20is%20back%20on%20the%20road.');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showShortestPath()%20%7B%0A%20%20%20%20if%20(car.currentCell%20!=%20car.startCell)%20%7B%0A%20%20%20%20%20%20%20%20displayBotMessage('Please%20reset%20the%20car%20before%20viewing%20the%20found%20path.');%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20btnSend.disable();%0A%0A%20%20%20%20%20%20%20%20viewingMode%20=%20true;%0A%20%20%20%20%20%20%20%20playbackIndex%20=%200;%0A%20%20%20%20%20%20%20%20moveCarTo(shortestPath%5BplaybackIndex%5D);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20moveCarTo(nextCell)%20%7B%0A%20%20%20%20steerCarToward(nextCell);%0A%20%20%20%20car.prevCell%20=%20car.currentCell;%0A%20%20%20%20car.currentCell%20=%20nextCell;%0A%20%20%20%20car.style.top%20=%20nextCell.style.top;%0A%20%20%20%20car.style.left%20=%20nextCell.style.left;%0A%7D%0A%0A//%20%20must%20be%20called%20before%20moveCarTo(nextCell)%0Afunction%20steerCarToward(cell)%20%7B%0A%20%20%20%20//%20%20rotate%20the%20car%0A%20%20%20%20if%20(car.currentCell)%20%7B%0A%20%20%20%20%20%20%20%20var%20clockwise;%0A%20%20%20%20%20%20%20%20var%20antiClockwise;%0A%0A%20%20%20%20%20%20%20%20if%20(car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.left)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.right);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.right%20&&%20cell%20==%20car.currentCell.down)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.left%20&&%20cell%20==%20car.currentCell.up)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.up%20&&%20cell%20==%20car.currentCell.right)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(car.prevCell%20==%20car.currentCell.down%20&&%20cell%20==%20car.currentCell.left);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clockwise%20=%20cell.up%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20antiClockwise%20=%20cell.down%20==%20car.currentCell;%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(clockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20+=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20right.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(antiClockwise)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%2090;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20left.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(cell%20==%20car.prevCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20car.rotation%20-=%20180;%0A%0A%09%09%09if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09%09displayBotMessage('Turning%20around.');%0A%09%09%09%7D%0A%20%20%20%20%20%20%20%20%7D%0A%09%09else%20if%20(showFeedback%20==%20true)%20%7B%0A%09%09%09displayBotMessage('Straight%20ahead.');%0A%09%09%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20car.style.transform%20=%20'rotate('%20+%20car.rotation%20+%20'deg)';%0A%7D%0A%0Afunction%20plotPath()%20%7B%0A%20%20%20%20car.startCell%20=%20randomItemFrom(gridCells)%5B0%5D;%0A%0A%20%20%20%20var%20prevRoadCell%20=%20car.startCell;%0A%20%20%20%20var%20newRoadCell;%0A%20%20%20%20var%20removeDeadEnd%20=%20roadCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(roadCell.roadType.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20roadCell.deadend;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20var%20expandFrom%20=%20targetCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20remove%20target%20cell%20from%20the%20available%20paths%20of%20the%20previous%20road%20cell%0A%20%20%20%20%20%20%20%20remove(targetCell).from(prevRoadCell.paths);%0A%20%20%20%20%20%20%20%20//%20%20remove%20the%20previous%20road%20cell%20from%20the%20available%20paths%20of%20target%20cell%0A%20%20%20%20%20%20%20%20remove(prevRoadCell).from(targetCell.paths);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20road%20type%20for%20previous%20and%20target%20cells%0A%20%20%20%20%20%20%20%20if%20(targetCell.up%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.down%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('up');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('down');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(targetCell.left%20==%20prevRoadCell)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell.roadType.push('left');%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.roadType.push('right');%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20newRoadCell.reachableRoads.push(prevRoadCell);%0A%20%20%20%20%20%20%20%20prevRoadCell.reachableRoads.push(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20//%20%20assign%20appropriate%20road%20type%20image%0A%20%20%20%20%20%20%20%20prevRoadCell.setRoadType(prevRoadCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20removeDeadEnd(prevRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(targetCell.className%20==%20'road'%20%7C%7C%20targetCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20targetCell.setRoadType(targetCell.roadType.sort().join(''));%0A%20%20%20%20%20%20%20%20%20%20%20%20removeDeadEnd(targetCell);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevRoadCell%20=%20targetCell;%0A%20%20%20%20%7D;%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20a%20single%20path%20from%20start%20to%20finish%0A%20%20%20%20*/%0A%0A%20%20%20%20prevRoadCell.roadType.push('left');%0A%0A%20%20%20%20moveCarTo(prevRoadCell);%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20filteredPaths%20=%20prevRoadCell.paths.filter(cell%20=%3E%20cell%20!=%20prevRoadCell.left);%0A%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(filteredPaths);%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20newRoadCell.paths.forEach(neighbourCell%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20check%20whether%20target%20cell%20blocks%20off%20paths%20of%20neighbouring%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbourCell.className%20==%20'road')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(neighbourCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(neighbourCell).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20while%20(newRoadCell.endOfRow%20==%20false);%0A%0A%20%20%20%20//%20%20set%20road%20type%20on%20the%20last%20cell%20in%20a%20row%0A%20%20%20%20newRoadCell.setRoadType('finish');%0A%20%20%20%20newRoadCell.id%20=%20'finish';%0A%0A%20%20%20%20/*%0A%20%20%20%20%20%20%20%20plot%20branches%20until%20entire%20map%20is%20filled%0A%20%20%20%20*/%0A%0A%20%20%20%20var%20branch%20=%20%5B%5D;%0A%20%20%20%20var%20emptyCells%20=%20gridCells.flat().filter(cell%20=%3E%20cell.className%20==%20''%20&&%20cell.right%20!=%20'unknown');%0A%0A%20%20%20%20while%20(emptyCells.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20%20check%20if%20a%20branch%20is%20already%20created%0A%20%20%20%20%20%20%20%20if%20(branch.length%20==%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20select%20a%20cell%20from%20the%20first%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20branchCell%20=%20randomItemFrom(gridCells.flat().filter(cell%20=%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20==%20'road'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.right%20!=%20'unknown'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right.id%20!=%20'finish'%20&&%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.filter(neighbourCell%20=%3E%20neighbourCell.className%20==%20'').length%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20));%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20prevRoadCell%20=%20branchCell;%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branchCell.paths.filter(cell%20=%3E%20cell.className%20==%20''));%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell%20=%20randomItemFrom(branch%5Bbranch.length%20-%201%5D.paths);%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(prevRoadCell).from(emptyCells);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20%20determine%20whether%20new%20road%20cell%20is%20a%20deadend%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20!=%20'road'%20&&%20Math.random()%20%3E%20deadends)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newRoadCell.deadend%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell).from(emptyCells);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20%20remove%20paths%20that%20lead%20to%20the%20last%20column%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.right.right%20==%20'unknown')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remove(newRoadCell.right).from(newRoadCell.paths);%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20expandFrom(newRoadCell);%0A%0A%20%20%20%20%20%20%20%20if%20(newRoadCell.className%20==%20'road'%20%7C%7C%20newRoadCell.deadend)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20branch.push(newRoadCell);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drawGrid()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20//%20%20create%20an%20array%20or%20undefined%20items%20whose%20length%20is%20equal%20to%20nRow%0A%20%20%20%20var%20rows%20=%20new%20Array(nRow).fill();%0A%0A%20%20%20%20//%20%20build%20the%20trackCells%202D%20array%0A%20%20%20%20rows.forEach((row,%20rowIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20%20create%20an%20array%20of%20undefined%20items%20whose%20length%20is%20equal%20to%20nColumn%0A%20%20%20%20%20%20%20%20row%20=%20new%20Array(nColumn).fill();%0A%20%20%20%20%20%20%20%20gridCells.push(row);%0A%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20cellIndex)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.width%20=%20cellSize%20+%20'vw';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.height%20=%20cell.style.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.top%20=%20(100%20/%20nRow)%20*%20rowIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.style.left%20=%20(100%20/%20nColumn)%20*%20cellIndex%20+%20'%25';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.endOfRow%20=%20cellIndex%20==%20nColumn%20-%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20row%5BcellIndex%5D%20=%20cell;%0A%20%20%20%20%20%20%20%20%20%20%20%20grid.appendChild(cell);%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20%20store%20neighbouring%20cells%20for%20each%20cell%0A%20%20%20%20gridCells.forEach((row,%20nthRow)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20row.forEach((cell,%20nthColumn)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20'unknown';%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.paths%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.reachableRoads%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.roadType%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setRoadType%20=%20type%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.className%20=%20'road';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.style.backgroundImage%20=%20%22url('%22%20+%20imagePath%20+%20'/road_'%20+%20type%20+%20%22.png')%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.up%20=%20gridCells%5BnthRow%20-%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.up);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthRow%20%3C%20nRow%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.down%20=%20gridCells%5BnthRow%20+%201%5D%5BnthColumn%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.down);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.left%20=%20gridCells%5BnthRow%5D%5BnthColumn%20-%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.left);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nthColumn%20%3C%20nColumn%20-%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.right%20=%20gridCells%5BnthRow%5D%5BnthColumn%20+%201%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.paths.push(cell.right);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20displayUserMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'userMessage');%0A%7D%0A%0Afunction%20displayBotMessage(message)%20%7B%0A%20%20%20%20attachMessage(message,%20'botMessage');%0A%7D%0A%0Afunction%20attachMessage(message,%20type)%20%7B%0A%20%20%20%20var%20lastMessage%20=%20messages.lastElementChild;%0A%0A%20%20%20%20if%20(lastMessage%20==%20null%20%7C%7C%20message%20!=%20lastMessage.textContent)%20%7B%0A%20%20%20%20%20%20%20%20var%20text%20=%20document.createElement('p');%0A%0A%20%20%20%20%20%20%20%20text.className%20=%20type;%0A%20%20%20%20%20%20%20%20text.textContent%20=%20message;%0A%20%20%20%20%20%20%20%20messages.appendChild(text);%0A%20%20%20%20%20%20%20%20messages.scrollTo(0,%20messages.scrollHeight);%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%0A%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'';%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastMessage.style.color%20=%20'plum';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20=%3E%20lastMessage.style.color%20=%20'',%20100);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%20%20%20%20%7D,%20100);%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(type%20==%20'userMessage')%20%7B%0A%20%20%20%20%20%20%20%20userInput.value%20=%20'';%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleKeyPress()%20%7B%0A%20%20%20%20if%20(event.keyCode%20==%2013)%20%7B%0A%20%20%20%20%20%20%20%20btnSend.click();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resizeGrid()%20%7B%0A%20%20%20%20grid.style.height%20=%2090%20*%20(nRow%20/%20nColumn)%20+%20'vw';%0A%20%20%20%20title.style.fontSize%20=%20grid.offsetHeight%20*%200.2%20+%20'px';%0A%7D%0A%0Afunction%20resizeContent()%20%7B%0A%20%20%20%20resizeGrid();%0A%0A%20%20%20%20var%20contentRatio%20=%20content.offsetWidth%20/%20content.offsetHeight;%0A%20%20%20%20var%20windowRatio%20=%20window.innerWidth%20/%20(window.innerHeight%20-%20chatbot.offsetHeight);%0A%20%20%20%20var%20scaleRatio%20=%20contentRatio%20%3E%20windowRatio%20?%20window.innerWidth%20*%200.9%20/%20content.offsetWidth%20:%20(window.innerHeight%20-%20chatbot.offsetHeight)%20*%200.9%20/%20content.offsetHeight;%0A%0A%20%20%20%20content.style.top%20=%20(window.innerHeight%20-%20chatbot.offsetHeight%20-%20content.offsetHeight)%20/%202%20+%20'px';%0A%20%20%20%20content.style.transform%20=%20'scale('%20+%20scaleRatio%20+%20')';%0A%7D%0A%0Afunction%20randomIndexFrom(arr)%20%7B%0A%20%20%20%20return%20Math.floor(Math.random()%20*%20arr.length);%0A%7D%0A%0Afunction%20randomItemFrom(arr)%20%7B%0A%20%20%20%20return%20arr%5BrandomIndexFrom(arr)%5D;%0A%7D%0A%0Afunction%20remove(item)%20%7B%0A%20%20%20%20return%20%7B%20from:%20arr%20=%3E%20arr.splice(arr.indexOf(item),%201)%20%7D;%0A%7D%60;%0Aconst%20customCommands%20=%20codeWithoutMarkup.replace(/%5B%5Cs%5CS%5D*%5C/%5C/%20%20##%20CUSTOM%20COMMANDS%20##/,%20'').split('').reverse().join('').replace(/%5B%5Cs%5CS%5D*##%20SDNAMMOC%20MOTSUC%20FO%20DNE%20##%20%20%5C/%5C//,%20'').split('').reverse().join('').trim();%0Areturn%20output.replace(/##CUSTOM_COMMANDS##/,%20customCommands);##JS_E####LOGIC_32E####STEP_32E##