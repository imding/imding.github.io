1##STEP_1####INST_1##Introduction%0A%0A%5BScenario%5D%20Why%20is%20this%20useful?%0A%0A%5BLearning%20Outcome%5D%20Exactly%20what%20the%20learner%20will%20do.%0A%0A(***)%0A%0A(!)pass%20the%20step.##INST_1E####CODE_1####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Clink%20rel=%22stylesheet%22%20href=%22style.css%22%3E%0A%09%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Ccanvas%20id='cvsInput'%3E%3C/canvas%3E%0A%09%3Cbr%3E%0A%09%3Cbutton%20id='btnScale'%3EScale%3C/button%3E%0A%09%3Cbutton%20id='btnVector'%3EVector%3C/button%3E%0A%09%3Cbr%3E%0A%09%3Ccanvas%20id='cvsOutput'%3E%3C/canvas%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%20%20%20%20background-color:%20white;%0A%7D%0A%0Acanvas%20%7B%0A%20%20%20%20box-shadow:%200%200%204px%200%20rgba(0,%200,%200,%200.3);%0A%7D##CSS_E####JS##const%20cvsInput%20=%20new%20DrawableCanvas(document.querySelector('#cvsInput'));%0Aconst%20cvsOutput%20=%20document.querySelector('#cvsOutput');%0Aconst%20btnScale%20=%20document.querySelector('#btnScale');%0Aconst%20btnVector%20=%20document.querySelector('#btnVector');%0A%0Aconst%20canvasSize%20=%20300;%0A%0Adocument.querySelectorAll('canvas').forEach(canvas%20=%3E%20%7B%0A%20%20%20%20canvas.width%20=%20canvasSize;%0A%20%20%20%20canvas.height%20=%20canvasSize;%0A%7D);%0A%0AbtnScale.onclick%20=%20scaleDrawing;%0A%0AbtnVector.onclick%20=%20()%20=%3E%20%7B%0A%20%20%20%20cvsInput.getPixelArray();%0A%20%20%20%20cvsInput.getVector();%0A%7D;%0A%0Afunction%20scaleDrawing()%20%7B%0A%20%20%20%20cvsInput.trimDrawing();%0A%20%20%20%20cvsInput.getPixelArray();%0A%7D%0A%0Afunction%20trimDrawing(ctx,%20canvas)%20%7B%0A%0A%0A%0A%7D%0A%0Afunction%20DrawableCanvas(el)%20%7B%0A%20%20%20%20const%20px%20=%2010;%0A%20%20%20%20const%20ctx%20=%20el.getContext('2d');%0A%20%20%20%20let%20x%20=%20%5B%5D;%0A%20%20%20%20let%20y%20=%20%5B%5D;%0A%20%20%20%20let%20moves%20=%20%5B%5D;%0A%20%20%20%20let%20isPainting%20=%20false;%0A%20%20%20%20const%20clear%20=%20()%20=%3E%20ctx.clearRect(0,%200,%20ctx.canvas.width,%20ctx.canvas.height);%0A%20%20%20%20const%20addPoint%20=%20(_x,%20_y,%20isMoving)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20x.push(_x);%0A%20%20%20%20%20%20%20%20y.push(_y);%0A%20%20%20%20%20%20%20%20moves.push(isMoving);%0A%20%20%20%20%7D;%0A%20%20%20%20const%20redraw%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20clear();%0A%20%20%20%20%20%20%20%20ctx.strokeStyle%20=%20'red';%0A%20%20%20%20%20%20%20%20ctx.lineJoin%20=%20'round';%0A%20%20%20%20%20%20%20%20ctx.lineWidth%20=%20px;%0A%20%20%20%20%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20moves.length;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.beginPath();%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(moves%5Bi%5D%20&&%20i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.moveTo(x%5Bi%20-%201%5D,%20y%5Bi%20-%201%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.moveTo(x%5Bi%5D%20-%201,%20y%5Bi%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.lineTo(x%5Bi%5D,%20y%5Bi%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.closePath();%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.stroke();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20const%20drawLine%20=%20(x1,%20y1,%20x2,%20y2,%20color%20=%20'lightgray')%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20ctx.beginPath();%0A%20%20%20%20%20%20%20%20ctx.strokeStyle%20=%20color;%0A%20%20%20%20%20%20%20%20ctx.lineJoin%20=%20'miter';%0A%20%20%20%20%20%20%20%20ctx.lineWidth%20=%201;%0A%20%20%20%20%20%20%20%20ctx.moveTo(x1,%20y1);%0A%20%20%20%20%20%20%20%20ctx.lineTo(x2,%20y2);%0A%20%20%20%20%20%20%20%20ctx.stroke();%0A%20%20%20%20%7D;%0A%20%20%20%20const%20grid%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20w%20=%20el.clientWidth;%0A%20%20%20%20%20%20%20%20const%20h%20=%20el.clientHeight;%0A%20%20%20%20%20%20%20%20const%20p%20=%20el.clientWidth%20/%20px;%0A%20%20%20%20%20%20%20%20const%20xStep%20=%20w%20/%20p;%0A%20%20%20%20%20%20%20%20const%20yStep%20=%20h%20/%20p;%0A%20%20%20%20%20%20%20%20for%20(let%20x%20=%200;%20x%20%3C%20w;%20x%20+=%20xStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20drawLine(x,%200,%20x,%20h);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20y%20=%200;%20y%20%3C%20h;%20y%20+=%20yStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20drawLine(0,%20y,%20w,%20y);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20const%20cell%20=%20(x,%20y,%20w,%20h)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20=%20'blue';%0A%20%20%20%20%20%20%20%20ctx.strokeStyle%20=%20'blue';%0A%20%20%20%20%20%20%20%20ctx.lineJoin%20=%20'miter';%0A%20%20%20%20%20%20%20%20ctx.lineWidth%20=%201;%0A%20%20%20%20%20%20%20%20ctx.rect(x,%20y,%20w,%20h);%0A%20%20%20%20%20%20%20%20ctx.fill();%0A%20%20%20%20%7D;%0A%20%20%20%20this.el%20=%20el;%0A%20%20%20%20this.reset%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20isPainting%20=%20false;%0A%20%20%20%20%20%20%20%20x%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20y%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20moves%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20clear();%0A%20%20%20%20%7D;%0A%20%20%20%20this.trimDrawing%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20var%20w%20=%20el.width,%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20el.height,%0A%20%20%20%20%20%20%20%20%20%20%20%20pix%20=%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20%5B%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y:%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20imageData%20=%20ctx.getImageData(0,%200,%20el.width,%20el.height).data,%0A%20%20%20%20%20%20%20%20%20%20%20%20x,%20y,%20index;%0A%0A%20%20%20%20%20%20%20%20for%20(y%20=%200;%20y%20%3C%20h;%20y++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(x%20=%200;%20x%20%3C%20w;%20x++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20index%20=%20(y%20*%20w%20+%20x)%20*%204;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(imageData%5Bindex%20+%203%5D%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pix.x.push(x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pix.y.push(y);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pix.x.sort((a,%20b)%20=%3E%20a%20-%20b);%0A%20%20%20%20%20%20%20%20pix.y.sort((a,%20b)%20=%3E%20a%20-%20b);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20n%20=%20pix.x.length%20-%201;%0A%0A%20%20%20%20%20%20%20%20w%20=%20pix.x%5Bn%5D%20-%20pix.x%5B0%5D%20+%201;%0A%20%20%20%20%20%20%20%20h%20=%20pix.y%5Bn%5D%20-%20pix.y%5B0%5D%20+%201;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20cut%20=%20ctx.getImageData(pix.x%5B0%5D,%20pix.y%5B0%5D,%20w,%20h);%0A%0A%20%20%20%20%20%20%20%20el.width%20=%20w;%0A%20%20%20%20%20%20%20%20el.height%20=%20h;%0A%20%20%20%20%20%20%20%20ctx.putImageData(cut,%200,%200);%0A%20%20%20%20%7D;%0A%20%20%20%20this.getPixelArray%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20let%20pixelArray%20=%20%5B%5D;%0A%0A%20%20%20%20%20%20%20%20for%20(let%20y%20=%200;%20y%20%3C%20el.height;%20y%20+=%20px)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20pixelArray.push(%5B%5D);%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20x%20=%200;%20x%20%3C%20el.width;%20x%20+=%20px)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pixels%20=%20ctx.getImageData(x,%20y,%20px,%20px).data.filter((_,%20i)%20=%3E%20i%20%25%204%20==%200).map(v%20=%3E%20v%20?%201%20:%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pixelArray%5By/px%5D.push(pixels.filter(p%20=%3E%20p%20==%201).length%20%3E=%20pixels.filter(p%20=%3E%20p%20==%200).length%20?%201%20:%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(el.width%20%3E%20el.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20margin%20=%20(pixelArray%5B0%5D.length%20-%20pixelArray.length)%20/%202;%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20topMargin%20=%20new%20Array(Math.floor(margin)).fill(new%20Array(pixelArray%5B0%5D.length).fill(0));%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20bottomMargin%20=%20new%20Array(Math.ceil(margin)).fill(new%20Array(pixelArray%5B0%5D.length).fill(0));%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20pixelArray%20=%20%5B...topMargin,%20...pixelArray,%20...bottomMargin%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(el.width%20%3C%20el.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20margin%20=%20(pixelArray.length%20-%20pixelArray%5B0%5D.length)%20/%202;%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20leftMargin%20=%20new%20Array(Math.ceil(margin)).fill(0);%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rightMargin%20=%20new%20Array(Math.floor(margin)).fill(0);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20pixelArray.forEach((_,%20x)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pixelArray%5Bx%5D%20=%20%5B...leftMargin,%20...pixelArray%5Bx%5D,%20...rightMargin%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20console.log(pixelArray);%0A%20%20%20%20%20%20%20%20return%20pixelArray;%0A%20%20%20%20%7D;%0A%20%20%20%20this.getVector%20=%20(debug%20=%20true)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20w%20=%20el.clientWidth;%0A%20%20%20%20%20%20%20%20const%20h%20=%20el.clientHeight;%0A%20%20%20%20%20%20%20%20const%20p%20=%20el.clientWidth%20/%20px;%0A%20%20%20%20%20%20%20%20const%20xStep%20=%20w%20/%20p;%0A%20%20%20%20%20%20%20%20const%20yStep%20=%20h%20/%20p;%0A%20%20%20%20%20%20%20%20const%20vector%20=%20%5B%5D;%0A%0A%20%20%20%20%20%20%20%20for%20(let%20x%20=%200;%20x%20%3C%20w;%20x%20+=%20xStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20y%20=%200;%20y%20%3C%20h;%20y%20+=%20yStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20data%20=%20ctx.getImageData(x,%20y,%20xStep,%20yStep);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20nonEmptyPixelsCount%20=%200;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20data.data.length;%20i%20+=%204)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20isEmpty%20=%20data.data%5Bi%5D%20===%200;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nonEmptyPixelsCount%20+=%201;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(nonEmptyPixelsCount%20%3E%201%20&&%20debug)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell(x,%20y,%20xStep,%20yStep);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vector.push(nonEmptyPixelsCount%20%3E%201%20?%201%20:%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(debug)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20grid();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20console.log(vector);%0A%20%20%20%20%20%20%20%20return%20vector;%0A%20%20%20%20%7D;%0A%20%20%20%20const%20startMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20bounds%20=%20event.target.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20const%20x%20=%20event.clientX%20-%20bounds.left;%0A%20%20%20%20%20%20%20%20const%20y%20=%20event.clientY%20-%20bounds.top;%0A%20%20%20%20%20%20%20%20isPainting%20=%20true;%0A%20%20%20%20%20%20%20%20addPoint(x,%20y,%20false);%0A%20%20%20%20%20%20%20%20redraw();%0A%20%20%20%20%7D;%0A%20%20%20%20const%20onMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20bounds%20=%20event.target.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20const%20x%20=%20event.clientX%20-%20bounds.left;%0A%20%20%20%20%20%20%20%20const%20y%20=%20event.clientY%20-%20bounds.top;%0A%20%20%20%20%20%20%20%20if%20(isPainting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20addPoint(x,%20y,%20true);%0A%20%20%20%20%20%20%20%20%20%20%20%20redraw();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20const%20stopMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20isPainting%20=%20false;%0A%20%20%20%20%7D;%0A%20%20%20%20el.addEventListener('mousedown',%20startMove);%0A%20%20%20%20el.addEventListener('mousemove',%20onMove);%0A%20%20%20%20el.addEventListener('mouseup',%20stopMove);%0A%20%20%20%20el.addEventListener('mouseleave',%20stopMove);%0A%0A%20%20%20%20//%20TOUCH%20SCREEN%20EVENTS%0A%20%20%20%20const%20startTouchMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20bounds%20=%20event.target.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20const%20x%20=%20event.touches%5B0%5D.clientX%20-%20bounds.left;%0A%20%20%20%20%20%20%20%20const%20y%20=%20event.touches%5B0%5D.clientY%20-%20bounds.top;%0A%20%20%20%20%20%20%20%20isPainting%20=%20true;%0A%20%20%20%20%20%20%20%20addPoint(x,%20y,%20false);%0A%20%20%20%20%20%20%20%20redraw();%0A%20%20%20%20%7D;%0A%20%20%20%20const%20onTouchMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20bounds%20=%20event.target.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20const%20x%20=%20event.touches%5B0%5D.clientX%20-%20bounds.left;%0A%20%20%20%20%20%20%20%20const%20y%20=%20event.touches%5B0%5D.clientY%20-%20bounds.top;%0A%20%20%20%20%20%20%20%20if%20(isPainting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20addPoint(x,%20y,%20true);%0A%20%20%20%20%20%20%20%20%20%20%20%20redraw();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%20%20%20%20const%20stopTouchMove%20=%20(event)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20isPainting%20=%20false;%0A%20%20%20%20%7D;%0A%20%20%20%20el.addEventListener('touchstart',%20startTouchMove);%0A%20%20%20%20el.addEventListener('touchmove',%20onTouchMove);%0A%20%20%20%20el.addEventListener('touchend',%20stopTouchMove);%0A%7D##JS_E####CODE_1E####LOGIC_1####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_1E####STEP_1E##