4##STEP_1####INST_1##Introduction%0A%0AChess%20is%20a%20two-player%20strategy%20board%20game%20played%20by%20millions%20of%20people%20across%20the%20world.%0A%0AIt%20is%20commonly%20agreed%20that%20the%20game%20is%20easy%20to%20learn%20but%20hard%20to%20master.%0A%0AIn%20this%20interactive%20project,%20you%20will%20play%20against%20varying%20levels%20of%20AI%20in%20the%20game%20of%20chess.%0A%0ALet's%20begin%20with%20the%20first%20and%20easiest%20difficulty.%0A%0A(***)%0A%0A(!)Win%20a%20game%20of%20chess%20against%20the%20AI.##INST_1E####CODE_1####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang=%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset=%22UTF-8%22%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=Frijole%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22https://app.bsd.education/resources/css/chessboard-0.3.0.css%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22style.css%22%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/jquery-3.2.1.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chess.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chessboard.js%22%3E%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EAI%20Chess%3C/h1%3E%0A%20%20%20%20%3Cdiv%20id=%22board%22%20class=%22board%22%3E%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##body%20%7B%0A%20%20%20%20background-color:%20lightyellow;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20font-family:%20%22Frijole%22;%0A%20%20%20%20color:%20maroon;%0A%20%20%20%20text-align:%20center;%0A%7D##CSS_E####JS##//%20%20JavaScript%0Avar%20cfg%20=%20%7B%20position:%20'start'%20%7D;%0A%0Acfg.draggable%20=%20true;%0Acfg.onMouseoverSquare%20=%20handleMouseoverSquare;%0Acfg.onMouseoutSquare%20=%20handleMouseoutSquare;%0Acfg.onDragStart%20=%20handleDragStart;%0Acfg.onDrop%20=%20handleDrop;%0Acfg.onSnapEnd%20=%20handleSnapEnd;%0A%0Avar%20board%20=%20ChessBoard('board',%20cfg);%0Avar%20game%20=%20new%20Chess();%0A%0Afunction%20calculateBestMove()%20%7B%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20randomIndex%20=%20Math.floor(Math.random()%20*%20moves.length);%0A%20%20%20%20return%20moves%5BrandomIndex%5D;%0A%7D%0A%0Afunction%20handleDragStart(source,%20piece)%20%7B%0A%20%20%20%20if%20(game.in_checkmate()%20===%20true%20%7C%7C%20game.in_draw()%20===%20true%20%7C%7C%20piece.search(/%5Eb/)%20!==%20-1)%20%7B%0A%20%20%20%20%20%20%20%20return%20false;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleDrop(source,%20target)%20%7B%0A%20%20%20%20var%20move%20=%20game.move(%7B%20from:%20source,%20to:%20target%20%7D);%0A%0A%20%20%20%20removeGreySquares();%0A%20%20%20%20%0A%20%20%20%20if%20(move%20===%20null)%20%7B%20return%20'snapback'%20%7D%0A%20%20%20%20%0A%20%20%20%20setTimeout(makeBestMove,%20250);%0A%7D%0A%0Afunction%20makeBestMove()%20%7B%0A%20%20%20%20var%20bestMove%20=%20getBestMove(game);%0A%0A%20%20%20%20game.ugly_move(bestMove);%0A%20%20%20%20board.position(game.fen());%0A%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20Lost');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20passStep()%20%7B%7D%0A%0Afunction%20getBestMove(game)%20%7B%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20won!');%0A%20%20%20%20%20%20%20%20passStep();%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20bestMove%20=%20calculateBestMove(game);%0A%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20handleMouseoverSquare(square)%20%7B%0A%20%20%20%20var%20moves%20=%20game.moves(%7B%20square,%20verbose:%20true%20%7D);%0A%0A%20%20%20%20if%20(moves.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20moves.forEach(move%20=%3E%20greySquare(move.to));%0A%20%20%20%20%20%20%20%20greySquare(square);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleMouseoutSquare()%20%7B%0A%20%20%20%20removeGreySquares();%0A%7D%0A%0Afunction%20handleSnapEnd()%20%7B%0A%20%20%20%20board.position(game.fen());%0A%7D%0A%0Afunction%20removeGreySquares()%20%7B%0A%20%20%20%20$('#board%20.square-55d63').css('background',%20'');%0A%7D%0A%0Afunction%20greySquare(square)%20%7B%0A%20%20%20%20var%20squareEl%20=%20$('#board%20.square-'%20+%20square);%0A%20%20%20%20var%20background%20=%20'#a9a9a9';%0A%20%20%20%20%0A%20%20%20%20if%20(squareEl.hasClass('black-3c85d')%20===%20true)%20%7B%0A%20%20%20%20%20%20%20%20background%20=%20'#696969';%0A%20%20%20%20%7D%0A%0A%20%20%20%20squareEl.css('background',%20background);%0A%7D##JS_E####CODE_1E####LOGIC_1####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('passStep');##JS_E####LOGIC_1E####STEP_1E####STEP_2####INST_2##Level%202%0A%0AIn%20the%20previous%20step,%20you%20may%20have%20noticed%20that%20the%20AI%20moved%20its%20pieces%20randomly.%0A%0AEven%20by%20chance,%20it%20may%20have%20provided%20some%20challenge%20still.%0A%0AIn%20this%20step,%20the%20AI%20has%20learned%20a%20new%20trick,%20play%20another%20game%20and%20see%20if%20you%20can%20figure%20it%20out.%0A%0A(***)%0A%0A(!)Win%20another%20game%20against%20the%20AI.##INST_2E####CODE_2####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang=%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset=%22UTF-8%22%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=Frijole%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22https://app.bsd.education/resources/css/chessboard-0.3.0.css%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22style.css%22%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/jquery-3.2.1.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chess.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chessboard.js%22%3E%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EAI%20Chess%3C/h1%3E%0A%20%20%20%20%3Cdiv%20id=%22board%22%20class=%22board%22%3E%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##body%20%7B%0A%20%20%20%20background-color:%20lightyellow;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20font-family:%20%22Frijole%22;%0A%20%20%20%20color:%20maroon;%0A%20%20%20%20text-align:%20center;%0A%7D##CSS_E####JS##//%20%20JavaScript%0Avar%20cfg%20=%20%7B%20position:%20'start'%20%7D;%0A%0Acfg.draggable%20=%20true;%0Acfg.onMouseoverSquare%20=%20handleMouseoverSquare;%0Acfg.onMouseoutSquare%20=%20handleMouseoutSquare;%0Acfg.onDragStart%20=%20handleDragStart;%0Acfg.onDrop%20=%20handleDrop;%0Acfg.onSnapEnd%20=%20handleSnapEnd;%0A%0Avar%20board%20=%20ChessBoard('board',%20cfg);%0Avar%20game%20=%20new%20Chess();%0A%0Afunction%20calculateBestMove()%20%7B%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20bestMove%20=%20null;%0A%20%20%20%20var%20bestValue%20=%20-9999;%0A%20%20%20%20%0A%20%20%20%20moves.forEach(move%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20game.ugly_move(move);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20value%20=%20-evaluateBoard(game.board());%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestValue%20=%20value;%0A%20%20%20%20%20%20%20%20%20%20%20%20bestMove%20=%20move;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20game.undo();%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20evaluateBoard(board)%20%7B%0A%20%20%20%20var%20totalEvaluation%20=%200;%0A%20%20%20%20%0A%20%20%20%20for%20(var%20i%20=%200;%20i%20%3C%208;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20=%200;%20j%20%3C%208;%20j++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20totalEvaluation%20=%20totalEvaluation%20+%20getPieceValue(board%5Bi%5D%5Bj%5D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20totalEvaluation;%0A%7D%0A%0Afunction%20getPieceValue(piece)%20%7B%0A%20%20%20%20if%20(piece%20===%20null)%20return%200;%0A%0A%20%20%20%20var%20getAbsoluteValue%20=%20piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(piece.type%20===%20'p')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2010;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'r')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2050;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'n')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'b')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'q')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2090;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'k')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20900;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20throw%20%22Unknown%20piece%20type:%20%22%20+%20piece.type;%0A%20%20%20%20%7D;%0A%20%20%20%20var%20absoluteValue%20=%20getAbsoluteValue(piece,%20piece.color%20===%20'w');%0A%20%20%20%20%0A%20%20%20%20return%20piece.color%20===%20'w'%20?%20absoluteValue%20:%20-absoluteValue;%0A%7D%0A%0Afunction%20handleDragStart(source,%20piece)%20%7B%0A%20%20%20%20if%20(game.in_checkmate()%20===%20true%20%7C%7C%20game.in_draw()%20===%20true%20%7C%7C%20piece.search(/%5Eb/)%20!==%20-1)%20%7B%0A%20%20%20%20%20%20%20%20return%20false;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleDrop(source,%20target)%20%7B%0A%20%20%20%20var%20move%20=%20game.move(%7B%20from:%20source,%20to:%20target%20%7D);%0A%0A%20%20%20%20removeGreySquares();%0A%20%20%20%20%0A%20%20%20%20if%20(move%20===%20null)%20%7B%20return%20'snapback'%20%7D%0A%20%20%20%20%0A%20%20%20%20setTimeout(makeBestMove,%20250);%0A%7D%0A%0Afunction%20makeBestMove()%20%7B%0A%20%20%20%20var%20bestMove%20=%20getBestMove(game);%0A%0A%20%20%20%20game.ugly_move(bestMove);%0A%20%20%20%20board.position(game.fen());%0A%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20lost');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20passStep()%20%7B%7D%0A%0Afunction%20getBestMove(game)%20%7B%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20won!');%0A%20%20%20%20%20%20%20%20passStep();%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20bestMove%20=%20calculateBestMove(game);%0A%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20handleMouseoverSquare(square)%20%7B%0A%20%20%20%20var%20moves%20=%20game.moves(%7B%20square,%20verbose:%20true%20%7D);%0A%0A%20%20%20%20if%20(moves.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20moves.forEach(move%20=%3E%20greySquare(move.to));%0A%20%20%20%20%20%20%20%20greySquare(square);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleMouseoutSquare()%20%7B%0A%20%20%20%20removeGreySquares();%0A%7D%0A%0Afunction%20handleSnapEnd()%20%7B%0A%20%20%20%20board.position(game.fen());%0A%7D%0A%0Afunction%20removeGreySquares()%20%7B%0A%20%20%20%20$('#board%20.square-55d63').css('background',%20'');%0A%7D%0A%0Afunction%20greySquare(square)%20%7B%0A%20%20%20%20var%20squareEl%20=%20$('#board%20.square-'%20+%20square);%0A%20%20%20%20var%20background%20=%20'#a9a9a9';%0A%20%20%20%20%0A%20%20%20%20if%20(squareEl.hasClass('black-3c85d')%20===%20true)%20%7B%0A%20%20%20%20%20%20%20%20background%20=%20'#696969';%0A%20%20%20%20%7D%0A%0A%20%20%20%20squareEl.css('background',%20background);%0A%7D##JS_E####CODE_2E####LOGIC_2####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('passStep');##JS_E####LOGIC_2E####STEP_2E####STEP_3####INST_3##Level%203%0A%0AWell%20done!%0A%0ADid%20you%20figure%20out%20that%20the%20AI%20learned%20to%20always%20take%20out%20your%20chess%20piece%20when%20it%20could?%0A%0AThis%20new%20trick%20improved%20the%20AI's%20ability%20to%20reduce%20the%20total%20chess%20pieces%20the%20opponent%20has%20on%20the%20board,%20which%20is%20good%20for%20the%20AI%20in%20the%20short%20term,%20however%20it%20doesn't%20consider%20how%20its%20decisions%20affect%20future%20moves,%20and%20this%20is%20its%20weakness%20-%20you%20can%20deliberately%20expose%20a%20low%20value%20piece%20to%20lure%20a%20high%20value%20piece%20into%20a%20vulnerable%20position.%0A%0AIn%20this%20step,%20the%20AI%20has%20been%20upgraded%20yet%20again,%20it%20won't%20be%20easy%20this%20time,%20good%20luck.%0A%0A(***)%0A%0A(!)Play%20a%20game%20against%20the%20AI.%0A##INST_3E####CODE_3####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang=%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset=%22UTF-8%22%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=Frijole%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22https://app.bsd.education/resources/css/chessboard-0.3.0.css%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22style.css%22%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/jquery-3.2.1.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chess.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chessboard.js%22%3E%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EAI%20Chess%3C/h1%3E%0A%20%20%20%20%3Cdiv%20id=%22board%22%20class=%22board%22%3E%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A##HTML_E####CSS##body%20%7B%0A%20%20%20%20background-color:%20lightyellow;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20font-family:%20%22Frijole%22;%0A%20%20%20%20color:%20maroon;%0A%20%20%20%20text-align:%20center;%0A%7D##CSS_E####JS##//%20%20JavaScript%0Avar%20cfg%20=%20%7B%20position:%20'start'%20%7D;%0A%0Acfg.draggable%20=%20true;%0Acfg.onMouseoverSquare%20=%20handleMouseoverSquare;%0Acfg.onMouseoutSquare%20=%20handleMouseoutSquare;%0Acfg.onDragStart%20=%20handleDragStart;%0Acfg.onDrop%20=%20handleDrop;%0Acfg.onSnapEnd%20=%20handleSnapEnd;%0A%0Avar%20board%20=%20ChessBoard('board',%20cfg);%0Avar%20game%20=%20new%20Chess();%0Avar%20positionCount;%0Avar%20depth%20=%203;%0A%0Afunction%20minimaxRoot(depth,%20game)%20%7B%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20bestMove%20=%20-9999;%0A%20%20%20%20var%20bestMoveFound;%0A%20%20%20%20%0A%20%20%20%20moves.forEach(move%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20game.ugly_move(move);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20value%20=%20minimax(depth%20-%201,%20game,%20false);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(value%20%3E=%20bestMove)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestMove%20=%20value;%0A%20%20%20%20%20%20%20%20%20%20%20%20bestMoveFound%20=%20move;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20game.undo();%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20return%20bestMoveFound;%0A%7D%0A%0Afunction%20minimax(depth,%20game,%20isMaximisingPlayer)%20%7B%0A%20%20%20%20positionCount++;%0A%20%20%20%20%0A%20%20%20%20if%20(depth%20===%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20-evaluateBoard(game.board());%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20bestMove%20=%20isMaximisingPlayer%20?%20-9999%20:%209999;%0A%20%20%20%20%0A%20%20%20%20moves.forEach(move%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20game.ugly_move(move);%0A%20%20%20%20%20%20%20%20bestMove%20=%20Math%5BisMaximisingPlayer%20?%20'max'%20:%20'min'%5D(bestMove,%20minimax(depth%20-%201,%20game,%20!isMaximisingPlayer));%0A%20%20%20%20%20%20%20%20game.undo();%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20evaluateBoard(board)%20%7B%0A%20%20%20%20var%20totalEvaluation%20=%200;%0A%20%20%20%20%0A%20%20%20%20for%20(var%20i%20=%200;%20i%20%3C%208;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20=%200;%20j%20%3C%208;%20j++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20totalEvaluation%20=%20totalEvaluation%20+%20getPieceValue(board%5Bi%5D%5Bj%5D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20totalEvaluation;%0A%7D%0A%0Afunction%20getPieceValue(piece)%20%7B%0A%20%20%20%20if%20(piece%20===%20null)%20return%200;%0A%0A%20%20%20%20var%20getAbsoluteValue%20=%20piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(piece.type%20===%20'p')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2010;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'r')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2050;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'n')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'b')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'q')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2090;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'k')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20900;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20throw%20%22Unknown%20piece%20type:%20%22%20+%20piece.type;%0A%20%20%20%20%7D;%0A%20%20%20%20var%20absoluteValue%20=%20getAbsoluteValue(piece,%20piece.color%20===%20'w');%0A%20%20%20%20%0A%20%20%20%20return%20piece.color%20===%20'w'%20?%20absoluteValue%20:%20-absoluteValue;%0A%7D%0A%0Afunction%20handleDragStart(source,%20piece)%20%7B%0A%20%20%20%20if%20(game.in_checkmate()%20===%20true%20%7C%7C%20game.in_draw()%20===%20true%20%7C%7C%20piece.search(/%5Eb/)%20!==%20-1)%20%7B%0A%20%20%20%20%20%20%20%20return%20false;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleDrop(source,%20target)%20%7B%0A%20%20%20%20var%20move%20=%20game.move(%7B%20from:%20source,%20to:%20target%20%7D);%0A%0A%20%20%20%20removeGreySquares();%0A%20%20%20%20%0A%20%20%20%20if%20(move%20===%20null)%20%7B%20return%20'snapback'%20%7D%0A%20%20%20%20%0A%20%20%20%20setTimeout(makeBestMove,%20250);%0A%7D%0A%0Afunction%20makeBestMove()%20%7B%0A%20%20%20%20var%20bestMove%20=%20getBestMove(game);%0A%0A%20%20%20%20game.ugly_move(bestMove);%0A%20%20%20%20board.position(game.fen());%0A%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20lost');%0A%20%20%20%20%20%20%20%20passStep();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20passStep()%20%7B%7D%0A%0Afunction%20getBestMove(game)%20%7B%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('You%20won!');%0A%20%20%20%20%20%20%20%20passStep();%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20positionCount%20=%200;%0A%0A%20%20%20%20var%20bestMove%20=%20minimaxRoot(depth,%20game);%0A%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20handleMouseoverSquare(square)%20%7B%0A%20%20%20%20var%20moves%20=%20game.moves(%7B%20square,%20verbose:%20true%20%7D);%0A%0A%20%20%20%20if%20(moves.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20moves.forEach(move%20=%3E%20greySquare(move.to));%0A%20%20%20%20%20%20%20%20greySquare(square);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleMouseoutSquare()%20%7B%0A%20%20%20%20removeGreySquares();%0A%7D%0A%0Afunction%20handleSnapEnd()%20%7B%0A%20%20%20%20board.position(game.fen());%0A%7D%0A%0Afunction%20removeGreySquares()%20%7B%0A%20%20%20%20$('#board%20.square-55d63').css('background',%20'');%0A%7D%0A%0Afunction%20greySquare(square)%20%7B%0A%20%20%20%20var%20squareEl%20=%20$('#board%20.square-'%20+%20square);%0A%20%20%20%20var%20background%20=%20'#a9a9a9';%0A%20%20%20%20%0A%20%20%20%20if%20(squareEl.hasClass('black-3c85d')%20===%20true)%20%7B%0A%20%20%20%20%20%20%20%20background%20=%20'#696969';%0A%20%20%20%20%7D%0A%0A%20%20%20%20squareEl.css('background',%20background);%0A%7D##JS_E####CODE_3E####LOGIC_3####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.on('passStep');##JS_E####LOGIC_3E####STEP_3E####STEP_4####INST_4##Summary%0A%0AIf%20you%20won%20the%20last%20game,%20well%20done!%20But%20if%20you%20did%20not,%20don't%20feel%20too%20bad%20either,%20because%20the%20AI%20was%20given%20the%20ability%20to%20see%20into%20the%20future.%0A%0AYou%20see,%20in%20a%20game%20of%20chess,%20at%20any%20given%20time,%20there%20are%20limited%20amount%20of%20moves%20you%20can%20make,%20and%20after%20that,%20limited%20amount%20of%20moves%20your%20opponent%20can%20make.%0A%0AThe%20AI%20seemingly%20%22learned%22%20to%20play%20chess%20because%20it%20calculated%20the%20consequences%20of%20a%20move,%203%20rounds%20into%20the%20future,%20for%20every%20chess%20piece%20on%20the%20board.%0A%0AEffectively,%20every%20move%20the%20AI%20made%20in%20your%20last%20game%20provided%20it%20the%20best%20outcome%20in%20the%20following%203%20rounds,%20no%20matter%20what%20you%20did.%20If%20you%20won%20the%20last%20game,%20it%20means%20you%20were%20able%20to%20plan%20move%20than%203%20moves%20ahead.%0A%0AEither%20way,%20well%20done!%20You%20have%20completed%20this%20project.##INST_4E####CODE_4####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang=%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset=%22UTF-8%22%3E%0A%20%20%20%20%3Clink%20href=%22https://fonts.googleapis.com/css?family=Frijole%22%20rel=%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22https://app.bsd.education/resources/css/chessboard-0.3.0.css%22%3E%0A%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22style.css%22%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/jquery-3.2.1.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chess.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://app.bsd.education/resources/js/chessboard.js%22%3E%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EAI%20Chess%3C/h1%3E%0A%20%20%20%20%3Cdiv%20id=%22board%22%20class=%22board%22%3E%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%20%20%20%20background-color:%20lightyellow;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20font-family:%20%22Frijole%22;%0A%20%20%20%20color:%20maroon;%0A%20%20%20%20text-align:%20center;%0A%7D##CSS_E####JS##//%20%20JavaScript%0Avar%20cfg%20=%20%7B%20position:%20'start'%20%7D;%0A%0Acfg.draggable%20=%20true;%0Acfg.onMouseoverSquare%20=%20handleMouseoverSquare;%0Acfg.onMouseoutSquare%20=%20handleMouseoutSquare;%0Acfg.onDragStart%20=%20handleDragStart;%0Acfg.onDrop%20=%20handleDrop;%0Acfg.onSnapEnd%20=%20handleSnapEnd;%0A%0Avar%20board%20=%20ChessBoard('board',%20cfg);%0Avar%20game%20=%20new%20Chess();%0Avar%20positionCount;%0Avar%20depth%20=%203;%0A%0Afunction%20minimaxRoot(depth,%20game)%20%7B%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20bestMove%20=%20-9999;%0A%20%20%20%20var%20bestMoveFound;%0A%20%20%20%20%0A%20%20%20%20moves.forEach(move%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20game.ugly_move(move);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20value%20=%20minimax(depth%20-%201,%20game,%20false);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(value%20%3E=%20bestMove)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestMove%20=%20value;%0A%20%20%20%20%20%20%20%20%20%20%20%20bestMoveFound%20=%20move;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20game.undo();%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20return%20bestMoveFound;%0A%7D%0A%0Afunction%20minimax(depth,%20game,%20isMaximisingPlayer)%20%7B%0A%20%20%20%20positionCount++;%0A%20%20%20%20%0A%20%20%20%20if%20(depth%20===%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20-evaluateBoard(game.board());%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20moves%20=%20game.ugly_moves();%0A%20%20%20%20var%20bestMove%20=%20isMaximisingPlayer%20?%20-9999%20:%209999;%0A%20%20%20%20%0A%20%20%20%20moves.forEach(move%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20game.ugly_move(move);%0A%20%20%20%20%20%20%20%20bestMove%20=%20Math%5BisMaximisingPlayer%20?%20'max'%20:%20'min'%5D(bestMove,%20minimax(depth%20-%201,%20game,%20!isMaximisingPlayer));%0A%20%20%20%20%20%20%20%20game.undo();%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20evaluateBoard(board)%20%7B%0A%20%20%20%20var%20totalEvaluation%20=%200;%0A%20%20%20%20%0A%20%20%20%20for%20(var%20i%20=%200;%20i%20%3C%208;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20=%200;%20j%20%3C%208;%20j++)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20totalEvaluation%20=%20totalEvaluation%20+%20getPieceValue(board%5Bi%5D%5Bj%5D);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20totalEvaluation;%0A%7D%0A%0Afunction%20getPieceValue(piece)%20%7B%0A%20%20%20%20if%20(piece%20===%20null)%20return%200;%0A%0A%20%20%20%20var%20getAbsoluteValue%20=%20piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(piece.type%20===%20'p')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2010;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'r')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2050;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'n')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'b')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2030;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'q')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%2090;%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(piece.type%20===%20'k')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20900;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20throw%20%22Unknown%20piece%20type:%20%22%20+%20piece.type;%0A%20%20%20%20%7D;%0A%20%20%20%20var%20absoluteValue%20=%20getAbsoluteValue(piece,%20piece.color%20===%20'w');%0A%20%20%20%20%0A%20%20%20%20return%20piece.color%20===%20'w'%20?%20absoluteValue%20:%20-absoluteValue;%0A%7D%0A%0Afunction%20handleDragStart(source,%20piece)%20%7B%0A%20%20%20%20if%20(game.in_checkmate()%20===%20true%20%7C%7C%20game.in_draw()%20===%20true%20%7C%7C%20piece.search(/%5Eb/)%20!==%20-1)%20%7B%0A%20%20%20%20%20%20%20%20return%20false;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleDrop(source,%20target)%20%7B%0A%20%20%20%20var%20move%20=%20game.move(%7B%20from:%20source,%20to:%20target%20%7D);%0A%0A%20%20%20%20removeGreySquares();%0A%20%20%20%20%0A%20%20%20%20if%20(move%20===%20null)%20%7B%20return%20'snapback'%20%7D%0A%20%20%20%20%0A%20%20%20%20setTimeout(makeBestMove,%20250);%0A%7D%0A%0Afunction%20makeBestMove()%20%7B%0A%20%20%20%20var%20bestMove%20=%20getBestMove(game);%0A%0A%20%20%20%20game.ugly_move(bestMove);%0A%20%20%20%20board.position(game.fen());%0A%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('Game%20over');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20getBestMove(game)%20%7B%0A%20%20%20%20if%20(game.game_over())%20%7B%0A%20%20%20%20%20%20%20%20alert('Game%20over');%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20positionCount%20=%200;%0A%0A%20%20%20%20var%20bestMove%20=%20minimaxRoot(depth,%20game);%0A%0A%20%20%20%20return%20bestMove;%0A%7D%0A%0Afunction%20handleMouseoverSquare(square)%20%7B%0A%20%20%20%20var%20moves%20=%20game.moves(%7B%20square,%20verbose:%20true%20%7D);%0A%0A%20%20%20%20if%20(moves.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20moves.forEach(move%20=%3E%20greySquare(move.to));%0A%20%20%20%20%20%20%20%20greySquare(square);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20handleMouseoutSquare()%20%7B%0A%20%20%20%20removeGreySquares();%0A%7D%0A%0Afunction%20handleSnapEnd()%20%7B%0A%20%20%20%20board.position(game.fen());%0A%7D%0A%0Afunction%20removeGreySquares()%20%7B%0A%20%20%20%20$('#board%20.square-55d63').css('background',%20'');%0A%7D%0A%0Afunction%20greySquare(square)%20%7B%0A%20%20%20%20var%20squareEl%20=%20$('#board%20.square-'%20+%20square);%0A%20%20%20%20var%20background%20=%20'#a9a9a9';%0A%20%20%20%20%0A%20%20%20%20if%20(squareEl.hasClass('black-3c85d')%20===%20true)%20%7B%0A%20%20%20%20%20%20%20%20background%20=%20'#696969';%0A%20%20%20%20%7D%0A%0A%20%20%20%20squareEl.css('background',%20background);%0A%7D%0A#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_4E####LOGIC_4####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_4E####STEP_4E##