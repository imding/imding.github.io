79##STEP_1####INST_1##Introduction%0A%0A%5BScenario%5D%20Why%20is%20this%20useful?%0A%0A%5BLearning%20Outcome%5D%20Exactly%20what%20the%20learner%20will%20do.%0A%0A%5BResult%5D##INST_1E####CODE_1####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20minGrid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(minGrid%20*%20ir)%20:%20minGrid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20minGrid%20:%20Math.round(minGrid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialize();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialize()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20cellWidth%20=%20image.width%20*%20r%20/%20resolution%5B0%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20cellHeight%20=%20image.height%20*%20r%20/%20resolution%5B1%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7BcellWidth%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7BcellHeight%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(Number.isInteger(target.index))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0Aupdate.onclick%20=%20resetPuzzle;%0A%0Alink.onfocus%20=%20()%20=%3E%20%7B%0A%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmousedown%20=%20()%20=%3E%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.onmouseup%20=%20()%20=%3E%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A%7D;%0A%0Awindow.ontouchmove%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20()%20=%3E%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_1E####LOGIC_1####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_1E####STEP_1E####STEP_2####INST_2##Loading%20image%20-%201/4%0A%0AOur%20game%20is%20based%20on%20putting%20pieces%20together%20to%20make%20a%20complete%20image,%20therefore%20we%20will%20need%20to%20load%20an%20image%20into%20our%20game.%0A%0AWe%20can%20create%20a%20function%20and%20make%20it%20run%20when%20the%20entire%20page%20is%20loaded%20using%20the%20%60window.onload%60%20event.%0A%0A(***)%0A%0A(!)On%20+js#JavaScript#+1,%20create%20a%20function%20called%20*loadImage*%0A(!)On%20+js#JavaScript#+3,%20assign%20*loadImage*%20to%20the%20%60window.onload%60%20event##INST_2E####CODE_2####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20JavaScript%0A#BEGIN_EDITABLE#function%20loadImage()%20%7B%7D#END_EDITABLE#%0A%0A#BEGIN_EDITABLE#window.onload%20=%20loadImage;#END_EDITABLE###JS_E####CODE_2E####LOGIC_2####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60function%20loadImage()%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60window.onload%20=%20loadImage;%60);##JS_E####LOGIC_2E####STEP_2E####STEP_3####INST_3##Loading%20image%20-%202/4%0A%0AWe%20need%20a%20link%20in%20order%20to%20load%20any%20image.%0A%0AUse%20the%20%60%3Cinput%3E%60%20element%20to%20obtain%20the%20image%20link%20from%20the%20player.%0A%0A(***)%0A%0A(!)On%20+html#Jigsaw#+2,%20create%20an%20%60%3Cinput%3E%60%20element,%20set%20its%20*type*%20attribute%20to%20*%22text%22*%20and%20*id*%20to%20*%22link%22*%0A(!)On%20+js#JavaScript#+1,%20create%20a%20variable%20called%20*link*%20and%20reference%20the%20%60%3Cinput%3E%60%20element%20by%20its%20id##INST_3E####CODE_3####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09#BEGIN_EDITABLE#%3Cinput%20type=%22text%22%20id=%22link%22%3E#END_EDITABLE#%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20JavaScript%0A#BEGIN_EDITABLE#var%20link%20=%20document.getElementById(%22link%22);#END_EDITABLE#%0A%0Afunction%20loadImage()%20%7B%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_3E####LOGIC_3####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60%3Cinput%20type=%22text%22%20id=%22link%22%3E%60);##HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20link%20=%20document.getElementById(%22link%22);%60);##JS_E####LOGIC_3E####STEP_3E####STEP_4####INST_4##Loading%20image%20-%203/4%0A%0ATo%20load%20and%20store%20an%20image,%20we%20also%20need%20a%20variable.%0A%0A(***)%0A%0A(!)On%20+js#JavaScript#+1,%20create%20a%20variable%20called%20*image*%0A(!)On%20+js#loadImage()#+1,%20create%20an%20*img*%20element%20using%20%60document.createElement()%60%20and%20assign%20it%20to%20the%20variable%20*image*%0A(!)On%20+js#loadImage()#+2,%20assign%20%60link.value%60%20to%20%60image.src%60##INST_4E####CODE_4####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20JavaScript%0A#BEGIN_EDITABLE#var%20image;#END_EDITABLE#%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#image%20=%20document.createElement(%22img%22);#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#image.src%20=%20link.value;#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_4E####LOGIC_4####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20image;%60);%0Apass.if.js.editable(1).equivalent(%60image%20=%20document.createElement(%22img%22);%60);%0Apass.if.js.editable(2).equivalent(%60image.src%20=%20link.value;%60);##JS_E####LOGIC_4E####STEP_4E####STEP_5####INST_5##Loading%20image%20-%204/4%0A%0AAssigning%20a%20link%20to%20%60image.src%60%20is%20the%20same%20as%20doing%20%60%3Cimg%20src=%22%22%3E%60%20in%20HTML.%0A%0ANow%20we%20need%20to%20create%20another%20%60onload%60%20event%20for%20the%20image%20so%20we%20will%20know%20when%20it's%20fully%20loaded.%0A%0A(***)%0A%0A(!)On%20+html#Jigsaw#+2,%20add%20the%20*value*%20attribute%20and%20set%20it%20to%20*%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22*%0A(!)On%20+js#image.src#+2,%20assign%20a%20*nameless%20function*%20to%20the%20%60image.onload%60%20event%0A(*)*TIP:*%20a%20nameless%20function%20looks%20like%20this:%20%60function()%20%7B%7D%60##INST_5E####CODE_5####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20#BEGIN_EDITABLE#value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22#END_EDITABLE#%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#image.onload%20=%20function()%20%7B%7D;#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_5E####LOGIC_5####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%60);##HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60image.onload%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_5E####STEP_5E####STEP_6####INST_6##Calculating%20resolution%20-%201/2%0A%0AInside%20the%20nameless%20function%20is%20where%20we%20will%20write%20more%20code%20that%20will%20run%20after%20the%20image%20is%20loaded.%0A%0AFirst%20let's%20find%20out%20the%20ratio%20of%20the%20image%20width%20&%20height.%0A%0A(***)%0A%0A(!)On%20+js#image.onload#+1,%20create%20a%20variable%20called%20*imageRatio*%0A(!)On%20+js#if%20(#,%20use%20%60image.width%20%3E=%20image.height%60%20as%20the%20condition%20for%20the%20if%20statement%0A(!)On%20+js#if%20(#+1,%20divide%20%60image.width%60%20by%20%60image.height%60%20and%20assign%20the%20result%20to%20*imageRatio*%0A(!)On%20+js#else%20%7B#+1,%20divide%20%60image.height%60%20by%20%60image.width%60%20and%20assign%20the%20result%20to%20*imageRatio*##INST_6E####CODE_6####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20imageRatio;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#image.width%20%3E=%20image.height#END_EDITABLE#)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#imageRatio%20=%20image.width%20/%20image.height;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#imageRatio%20=%20image.height%20/%20image.width;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_6E####LOGIC_6####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20imageRatio;%60);%0Apass.if.js.editable(1).equivalent(%60image.width%20%3E=%20image.height%60);%0Apass.if.js.editable(2).equivalent(%60imageRatio%20=%20image.width%20/%20image.height;%60);%0Apass.if.js.editable(3).equivalent(%60imageRatio%20=%20image.height%20/%20image.width;%60);##JS_E####LOGIC_6E####STEP_6E####STEP_7####INST_7##Calculating%20resolution%20-%202/2%0A%0AThe%20resolution%20is%20a%20set%20of%202%20numbers,%20they%20represent%20the%20number%20of%20columns%20&%20rows%20into%20which%20we%20will%20slice%20the%20image.%0A%0A(***)%0A%0A(!)On%20+js#JavaScript#+1,%20create%20a%20variable%20called%20*minGrid*%20and%20assign%20a%20value%20of%20*2*%20to%20it%0A(!)On%20+js#JavaScript#+2,%20create%20a%20variable%20called%20*resolution*%0A(!)On%20+js#if%20(#+2,%20assign%20the%20array%20%60%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D%60%20to%20the%20variable%20*resolution*%0A(!)On%20+js#else%20%7B#+2,%20assign%20the%20array%20%60%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D%60%20to%20the%20variable%20*resolution*##INST_7E####CODE_7####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20JavaScript%0A#BEGIN_EDITABLE#var%20minGrid%20=%202;#END_EDITABLE#%0A#BEGIN_EDITABLE#var%20resolution;#END_EDITABLE#%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_7E####LOGIC_7####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20minGrid%20=%202;%60);%0Apass.if.js.editable(1).equivalent(%60var%20resolution;%60);%0Apass.if.js.editable(2).equivalent(%60resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%60);%0Apass.if.js.editable(3).equivalent(%60resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%60);##JS_E####LOGIC_7E####STEP_7E####STEP_8####INST_8##Setting%20up%20the%20puzzle%0A%0AOnce%20we%20have%20the%20resolution,%20we%20can%20start%20setting%20up%20the%20game.%0A%0A(***)%0A%0A(!)On%20+js#%7D;#-1,%20call%20the%20*setup*%20function%0A(!)On%20+js#%7D;#+3,%20create%20a%20function%20called%20*setup*%20and%20call%20the%20*generatePuzzle*%20function%20inside%20it%0A(!)On%20+js#loadImage;#-2,%20create%20a%20function%20called%20*generatePuzzle*##INST_8E####CODE_8####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#setup();#END_EDITABLE#%0A%20%20%20%20%7D;%0A%7D%0A%0A#BEGIN_EDITABLE#function%20setup()%20%7B%20generatePuzzle();%20%7D#END_EDITABLE#%0A%0A#BEGIN_EDITABLE#function%20generatePuzzle()%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_8E####LOGIC_8####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60setup();%60);%0Apass.if.js.editable(1).equivalent.to(%60function%20setup()%20%7B%20generatePuzzle()%20%7D%60).or(%60function%20setup()%20%7B%20generatePuzzle();%20%7D%60);%0Apass.if.js.editable(2).equivalent(%60function%20generatePuzzle()%20%7B%7D%60);##JS_E####LOGIC_8E####STEP_8E####STEP_9####INST_9##Generating%20puzzle%20pieces%20-%201/2%0A%0ATo%20generate%20the%20puzzle%20pieces,%20we%20need%20to%20multiply%20the%20two%20numbers%20in%20the%20*resolution*%20array%20to%20get%20the%20total%20number%20of%20puzzle%20pieces.%0A%0AThis%20can%20be%20done%20using%20the%20*for%20loop*.%0A%0A(***)%0A%0A(!)On%20+js#generatePuzzle()%20%7B#+1,%20create%20a%20*for%20loop*%20that%20matches%20the%20following%20description:%0A%5B-%0A%09(!)counter%20*i*%20starts%20at%20*0*%0A%09(!)it%20runs%20%60resolution%5B0%5D%20*%20resolution%5B1%5D%60%20times%0A%09(!)counter%20*i*%20increases%20by%20*1*%20every%20loop%0A-%5D##INST_9E####CODE_9####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_9E####LOGIC_9####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%7D%60);##JS_E####LOGIC_9E####STEP_9E####STEP_10####INST_10##Generating%20puzzle%20pieces%20-%202/2%0A%0AInside%20the%20*for%20loop*,%20we%20can%20start%20defining%20the%20various%20properties%20of%20each%20puzzle%20piece.%0A%0A(***)%0A%0A(!)On%20+js#i++#+1,%20create%20a%20variable%20called%20*piece*%20and%20assign%20a%20new%20*div*%20element%20to%20it%0A(*)*TIP:*%20use%20%60document.createElement()%60%20to%20create%20new%20elements.%0A(!)On%20+js#i++#+3,%20assign%20%60%22piece%22%20+%20i%60%20to%20%60piece.id%60%0A(!)On%20+js#i++#+4,%20assign%20%60%22piece%22%60%20to%20%60piece.className%60%0A(!)On%20+js#i++#+5,%20assign%20%60%22url(%22%20+%20image.src%20+%20%22)%22%60%20to%20%60piece.style.backgroundImage%60##INST_10E####CODE_10####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20piece%20=%20document.createElement('div');#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.id%20=%20%22piece%22%20+%20i;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.className%20=%20%22piece%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_10E####LOGIC_10####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20piece%20=%20document.createElement('div');%60);%0Apass.if.js.editable(1).equivalent(%60piece.id%20=%20%22piece%22%20+%20i;%60);%0Apass.if.js.editable(2).equivalent(%60piece.className%20=%20%22piece%22;%60);%0Apass.if.js.editable(3).equivalent(%60piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%60);##JS_E####LOGIC_10E####STEP_10E####STEP_11####INST_11##Screen%20&%20image%20size%20ratios%0A%0AWe%20can%20calculate%20the%20ratio%20between%20screen%20&%20image%20width%20as%20well%20as%20screen%20&%20image%20height,%20and%20make%20sure%20that%20the%20image%20always%20fits%20inside%20the%20screen%20by%20multiplying%20the%20image%20width%20&%20height%20by%20the%20smaller%20of%20the%202%20ratios.%0A%0A(***)%0A%0A(!)On%20+js#generatePuzzle()%20%7B#+1,%20create%20a%20variable%20called%20*hr*%20and%20assign%20to%20it%20the%20result%20of%20%60window.innerWidth%60%20divided%20by%20%60image.width%60%0A(!)On%20+js#generatePuzzle()%20%7B#+2,%20create%20a%20variable%20called%20*vr*%20and%20assign%20to%20it%20the%20result%20of%20%60window.innerHeight%60%20divided%20by%20%60image.height%60%0A(!)On%20+js#generatePuzzle()%20%7B#+3,%20create%20a%20variable%20called%20*r*%20and%20assign%20to%20it%20the%20smaller%20value%20between%20*hr*%20and%20*vr*%0A(*)*TIP:*%20use%20%60Math.min(a,%20b)%60%20to%20get%20the%20smaller%20value%20between%20*a*%20and%20*b*.##INST_11E####CODE_11####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#var%20hr%20=%20window.innerWidth%20/%20image.width;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#var%20vr%20=%20window.innerHeight%20/%20image.height;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#var%20r%20=%20Math.min(hr,%20vr);#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_11E####LOGIC_11####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20hr%20=%20window.innerWidth%20/%20image.width;%60);%0Apass.if.js.editable(1).equivalent(%60var%20vr%20=%20window.innerHeight%20/%20image.height;%60);%0Apass.if.js.editable(2).equivalent(%60var%20r%20=%20Math.min(hr,%20vr);%60);##JS_E####LOGIC_11E####STEP_11E####STEP_12####INST_12##Maximum%20width%20&%20height%0A%0AWe%20can%20further%20limit%20how%20much%20screen%20space%20the%20image%20will%20occupy%20by%20introducing%202%20variables.%0A%0A(***)%0A%0A(!)On%20+js#var%20image;#-2,%20create%20a%20variable%20called%20*maxWidth*%20and%20assign%20the%20value%20of%20*0.9*%20to%20it%0A(!)On%20+js#var%20image;#-1,%20create%20a%20variable%20called%20*maxHeight*%20and%20assign%20the%20value%20of%20*0.3*%20to%20it%0A(!)On%20+js#var%20hr#,%20multiply%20%60window.innerWidth%60%20by%20the%20variable%20*maxWidth*%0A(!)On%20+js#var%20vr#,%20multiply%20%60window.innerHeight%60%20by%20the%20variable%20*maxHeight*##INST_12E####CODE_12####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0A#BEGIN_EDITABLE#var%20maxWidth%20=%200.9;#END_EDITABLE#%0A#BEGIN_EDITABLE#var%20maxHeight%20=%200.3;#END_EDITABLE#%0Avar%20image;%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20#BEGIN_EDITABLE#window.innerWidth%20*%20maxWidth#END_EDITABLE#%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20#BEGIN_EDITABLE#window.innerHeight%20*%20maxHeight#END_EDITABLE#%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_12E####LOGIC_12####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20maxWidth%20=%200.9;%60);%0Apass.if.js.editable(1).equivalent(%60var%20maxHeight%20=%200.3;%60);%0Apass.if.js.editable(2).equivalent(%60window.innerWidth%20*%20maxWidth%60);%0Apass.if.js.editable(3).equivalent(%60window.innerHeight%20*%20maxHeight%60);##JS_E####LOGIC_12E####STEP_12E####STEP_13####INST_13##Puzzle%20container%20-%201/2%0A%0AThe%20puzzle%20container%20is%20a%20box%20where%20the%20player%20will%20put%20all%20the%20puzzle%20pieces%20into%20while%20trying%20to%20make%20a%20complete%20image.%0A%0A(***)%0A%0A(!)On%20+html#Jigsaw#+2,%20create%20a%20%60%3Cdiv%3E%60%20element%20and%20set%20the%20*id*%20attribute%20to%20*%22puzzleContainer%22*%0A(!)On%20+js#image;#+1,%20create%20a%20variable%20called%20*puzzleContainer*%20and%20reference%20the%20%60%3Cdiv%3E%60%20element%20by%20its%20id##INST_13E####CODE_13####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09#BEGIN_EDITABLE#%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E#END_EDITABLE#%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20image;%0A#BEGIN_EDITABLE#var%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);#END_EDITABLE#%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_13E####LOGIC_13####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%60);##HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%60);##JS_E####LOGIC_13E####STEP_13E####STEP_14####INST_14##Puzzle%20container%20-%202/2%0A%0AIn%20order%20for%20the%20game%20to%20be%20playable,%20the%20container%20needs%20to%20fit%20inside%20the%20screen.%0A%0AAnd%20with%20our%20previous%20ratio%20calculations,%20we%20can%20be%20sure%20that%20the%20container%20will%20take%20up%20a%20maximum%20of%2090%25%20of%20screen%20width%20and%2030%25%20of%20screen%20height.%0A%0A(***)%0A%0A(!)On%20+js#i++#-3,%20create%20a%20variable%20called%20*containerWidth*%20and%20assign%20%60image.width%20*%20r%60%20to%20it%0A(!)On%20+js#i++#-2,%20create%20a%20variable%20called%20*containerHeight*%20and%20assign%20%60image.height%20*%20r%60%20to%20it%0A(!)On%20+js#url(#+3,%20assign%20%60containerWidth%20+%20%22px%22%60%20to%20%60puzzleContainer.style.width%60%0A(!)On%20+js#url(#+4,%20assign%20%60containerHeight%20+%20%22px%22%60%20to%20%60puzzleContainer.style.height%60##INST_14E####CODE_14####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#var%20containerWidth%20=%20image.width%20*%20r;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#var%20containerHeight%20=%20image.height%20*%20r;#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_14E####LOGIC_14####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20containerWidth%20=%20image.width%20*%20r;%60);%0Apass.if.js.editable(1).equivalent(%60var%20containerHeight%20=%20image.height%20*%20r;%60);%0Apass.if.js.editable(2).equivalent(%60puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%60);%0Apass.if.js.editable(3).equivalent(%60puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%60);##JS_E####LOGIC_14E####STEP_14E####STEP_15####INST_15##Puzzle%20piece%20dimensions%0A%0AUsing%20the%20container%20width%20&%20height%20and%20the%20resolution,%20we%20can%20now%20calculate%20the%20width%20and%20height%20of%20each%20puzzle%20piece.%0A%0A(***)%0A%0A(!)On%20+js#var%20piece#+1,%20create%20a%20variable%20called%20*cellWidth*%20and%20assign%20%60containerWidth%20/%20resolution%5B0%5D%60%20to%20it%0A(!)On%20+js#var%20piece#+2,%20create%20a%20variable%20called%20*cellHeight*%20and%20assign%20%60containerHeight%20/%20resolution%5B1%5D%60%20to%20it%0A(!)On%20+js#url(#+1,%20assign%20%60cellWidth%20+%20%22px%22%60%20to%20%60piece.style.width%60%0A(!)On%20+js#url(#+2,%20assign%20%60cellHeight%20+%20%22px%22%60%20to%20%60piece.style.height%60##INST_15E####CODE_15####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.width%20=%20cellWidth%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.height%20=%20cellHeight%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_15E####LOGIC_15####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%60);%0Apass.if.js.editable(1).equivalent(%60var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%60);%0Apass.if.js.editable(2).equivalent(%60piece.style.width%20=%20cellWidth%20+%20%22px%22;%60);%0Apass.if.js.editable(3).equivalent(%60piece.style.height%20=%20cellHeight%20+%20%22px%22;%60);##JS_E####LOGIC_15E####STEP_15E####STEP_16####INST_16##Constructing%20puzzle%20array%0A%0AThe%20puzzle%20pieces%20will%20be%20moved%20around%20during%20gameplay%20and%20the%20game%20needs%20to%20respond%20to%20their%20positions%20and%20configurations%20accordingly.%0A%0ATo%20do%20that%20we%20need%20to%20store%20every%20piece%20into%20an%20array,%20so%20we%20can%20access%20them%20later.%0A%0A(***)%0A%0A(!)On%20+js#var%20maxHeight#+1,%20create%20a%20variable%20called%20*puzzle*%20and%20assign%20to%20it%20an%20empty%20array%0A(*)*TIP:*%20an%20ampty%20array%20looks%20like%20this:%20%60%5B%5D%60%0A(!)On%20+js#setup()%20%7B#+3,%20call%20the%20%60puzzle.forEach%60%20function%20and%20pass%20a%20nameless%20function%20as%20the%20argument.%20In%20addition,%20the%20nameless%20function%20must%20accept%202%20arguments%20and%20stores%20them%20in%20*piece*%20and%20*i*%0A(!)On%20+js#cellHeight%20+#+2,%20add%20*piece*%20to%20the%20*puzzle*%20array%20using%20%60.push()%60##INST_16E####CODE_16####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0A#BEGIN_EDITABLE#var%20puzzle%20=%20%5B%5D;#END_EDITABLE#%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#puzzle.forEach(function(piece,%20i)%20%7B%7D);#END_EDITABLE#%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle.push(piece);#END_EDITABLE#%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_16E####LOGIC_16####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20puzzle%20=%20%5B%5D;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle.forEach(function(piece,%20i)%20%7B%7D);%60);%0Apass.if.js.editable(2).equivalent(%60puzzle.push(piece);%60);##JS_E####LOGIC_16E####STEP_16E####STEP_17####INST_17##Adding%20pieces%20to%20container%0A%0ASo%20far%20we%20are%20still%20not%20seeing%20any%20puzzle%20piece%20in%20the%20output.%0A%0AThis%20is%20because%20we%20haven't%20added%20them%20to%20the%20page%20yet.%0A%0A(***)%0A%0A(!)On%20+js#piece,%20i#+1,%20add%20*piece*%20to%20*puzzleContainer*%20as%20a%20child%20element%20using%20%60.appendChild()%60##INST_17E####CODE_17####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleContainer.appendChild(piece);#END_EDITABLE#%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_17E####LOGIC_17####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzleContainer.appendChild(piece);%60);##JS_E####LOGIC_17E####STEP_17E####STEP_18####INST_18##Constructing%20puzzle%20grid%20array%20-%201/3%0A%0AIn%20addition%20to%20the%20puzzle%20array,%20we%20also%20need%20to%20keep%20track%20of%20each%20cell%20inside%20the%20puzzle%20container.%0A%0AFirst%20we%20need%20to%20know%20where%20they%20are.%20To%20get%20the%20x%20&%20y%20coordinates%20of%20the%20*n*th%20cell,%20we%20can%20use%20the%20following%20formulae:%0A%5B-%0A%09(*)x%20=%20(n-1)%20mod%20(number%20of%20columns)%20*%20cellWidth%0A%09(*)y%20=%20floor((n-1)%20/%20(number%20of%20columns))%20*%20cellHeight%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#var%20cellHeight#+1,%20create%20a%20variable%20called%20*cellX*%20and%20assign%20to%20it%20the%20x%20value%20using%20the%201st%20formula%20provided%20above%0A(!)On%20+js#var%20cellHeight#+2,%20create%20a%20variable%20called%20*cellY*%20and%20assign%20to%20it%20the%20y%20value%20using%20the%202nd%20formula%20provided%20above##INST_18E####CODE_18####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_18E####LOGIC_18####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%60);%0Apass.if.js.editable(1).equivalent(%60var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%60);##JS_E####LOGIC_18E####STEP_18E####STEP_19####INST_19##Constructing%20puzzle%20grid%20array%20-%202/3%0A%0AThe%20way%20we%20construct%20the%20grid%20array%20shares%20a%20very%20similar%20process%20with%20the%20*puzzle*%20array.%0A%0A(***)%0A%0A(!)On%20+js#var%20puzzle%20=#+1,%20create%20a%20variable%20called%20*puzzleGrid*%20and%20assign%20an%20empty%20array%20to%20it%0A(!)On%20+js#push(piece)#+2,%20create%20a%20variable%20called%20*cell*%20and%20assign%20an%20empty%20object%20to%20it%0A(*)*TIP:*%20an%20empty%20object%20looks%20like%20this:%20%60%7B%7D%60.%0A(!)On%20+js#push(piece)%20=#+4,%20add%20*cell*%20to%20the%20*puzzleGrid*%20array%20using%20%60.push()%60##INST_19E####CODE_19####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0A#BEGIN_EDITABLE#var%20puzzleGrid%20=%20%5B%5D;#END_EDITABLE#%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20cell%20=%20%7B%7D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleGrid.push(cell);#END_EDITABLE#%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_19E####LOGIC_19####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20puzzleGrid%20=%20%5B%5D;%60);%0Apass.if.js.editable(1).equivalent(%60var%20cell%20=%20%7B%7D;%60);%0Apass.if.js.editable(2).equivalent(%60puzzleGrid.push(cell);%60);##JS_E####LOGIC_19E####STEP_19E####STEP_20####INST_20##Constructing%20puzzle%20grid%20array%20-%203/3%0A%0AEach%20cell%20has%20the%20following%204%20properties:%0A%0A%5B-%0A%09(*)*x*:%20the%20x%20coordinate%20of%20the%20cell%0A%09(*)*y*:%20the%20y%20coordinate%20of%20the%20cell%0A%09(*)*isEmpty*:%20a%20Boolean%20(true%20or%20false)%20value%20indicating%20whether%20it%20is%20occupied%20by%20a%20puzzle%20piece%0A%09(*)*index*:%20an%20integer%20number%20equal%20to%201%20less%20than%20its%20position%20in%20the%20*puzzleGrid*%20array%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#%7B%7D#+2,%20assign%20*cellX*%20to%20%60cell.x%60%0A(!)On%20+js#%7B%7D#+3,%20assign%20*cellY*%20to%20%60cell.y%60%0A(!)On%20+js#%7B%7D#+4,%20assign%20*true*%20to%20%60cell.isEmpty%60%0A(!)On%20+js#%7B%7D#+5,%20assign%20*i*%20to%20%60cell.index%60##INST_20E####CODE_20####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20cell%20=%20%7B%7D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#cell.x%20=%20cellX;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#cell.y%20=%20cellY;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#cell.isEmpty%20=%20true;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#cell.index%20=%20i;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzleGrid.push(cell);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_20E####LOGIC_20####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60cell.x%20=%20cellX;%60);%0Apass.if.js.editable(1).equivalent(%60cell.y%20=%20cellY;%60);%0Apass.if.js.editable(2).equivalent(%60cell.isEmpty%20=%20true;%60);%0Apass.if.js.editable(3).equivalent(%60cell.index%20=%20i;%60);##JS_E####LOGIC_20E####STEP_20E####STEP_21####INST_21##Positioning%20puzzle%20pieces%0A%0AYou%20may%20see%20there%20being%20only%20one%20puzzle%20piece%20in%20the%20output,%20but%20actually%20there%20are%20%60resolution%5B0%5D%20*%20resolution%5B1%5D%60%20pieces,%20they're%20just%20all%20stacked%20together%20because%20we%20haven't%20positioned%20them%20yet.%0A%0ALet's%20fix%20that%20now.%0A%0A(***)%0A%0A(!)On%20+js#appendChild(piece)#+2,%20assign%20%60puzzleGrid%5Bi%5D.x%20+%20%22px%22%60%20to%20%60piece.style.left%60%0A(!)On%20+js#appendChild(piece)#+3,%20assign%20%60puzzleGrid%5Bi%5D.y%20+%20%22px%22%60%20to%20%60piece.style.top%60%0A(!)On%20+js#appendChild(piece)#+4,%20assign%20*false*%20to%20%60puzzleGrid%5Bi%5D.isEmpty%60##INST_21E####CODE_21####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleGrid%5Bi%5D.isEmpty%20=%20false;#END_EDITABLE#%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_21E####LOGIC_21####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%60);%0Apass.if.js.editable(1).equivalent(%60piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%60);%0Apass.if.js.editable(2).equivalent(%60puzzleGrid%5Bi%5D.isEmpty%20=%20false;%60);##JS_E####LOGIC_21E####STEP_21E####STEP_22####INST_22##Puzzle%20piece%20image%0A%0AIf%20you%20look%20closely,%20you%20will%20see%20that%20the%20background%20image%20for%20each%20piece%20is%20way%20too%20big,%20we%20need%20to%20resize%20it%20to%20be%20the%20same%20size%20as%20the%20puzzle%20container.%0A%0AAlso,%20all%20the%20pieces%20are%20showing%20the%20same%20part%20of%20the%20image,%20but%20since%20we%20already%20calculated%20the%20positions%20of%20each%20cell,%20we%20can%20use%20that%20to%20change%20the%20position%20of%20the%20background%20image.%0A%0A(***)%0A%0A(!)On%20+js#push(piece)#-3,%20assign%20%60containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22%60%20to%20%60piece.style.style.backgroundSize%60%0A(!)On%20+js#push(piece)#-2,%20assign%20%60-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22%60%20to%20%60piece.style.backgroundPosition%60##INST_22E####CODE_22####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_22E####LOGIC_22####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%60);%0Apass.if.js.editable(1).equivalent(%60piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%60);##JS_E####LOGIC_22E####STEP_22E####STEP_23####INST_23##Shuffling%20the%20pieces%20-%201/4%0A%0AWhat%20we%20have%20now%20is%20not%20much%20of%20a%20puzzle%20because%20all%20pieces%20are%20in%20the%20correct%20place.%0A%0ALet's%20shuffle%20them%20up%20a%20little%20bit.%0A%0A(***)%0A%0A(!)On%20+js#setup()%20%7B#+2,%20call%20the%20*shuffle*%20function%20and%20pass%20the%20array%20*puzzle*%20as%20the%20argument%0A(!)On%20+js#loadImage;#-2,%20create%20a%20function%20called%20*shuffle*%20that%20accepts%20an%20argument%20and%20stores%20it%20in%20*array*##INST_23E####CODE_23####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20#BEGIN_EDITABLE#shuffle(puzzle);#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0A#BEGIN_EDITABLE#function%20shuffle(array)%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_23E####LOGIC_23####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60shuffle(puzzle);%60);%0Apass.if.js.editable(1).equivalent(%60function%20shuffle(array)%20%7B%7D%60);##JS_E####LOGIC_23E####STEP_23E####STEP_24####INST_24##Shuffling%20the%20pieces%20-%202/4%0A%0AThe%20process%20of%20shuffling%20an%20array%20is%20as%20follows:%0A%0A%5B=%0A%09(*)Select%20an%20item%20from%20the%20array%0A%09(*)Save%20its%20value%20in%20a%20variable%0A%09(*)Overwrite%20it%20with%20a%20random%20item%20in%20the%20same%20array%0A%09(*)Overwrite%20the%20random%20item%20with%20the%20value%20of%20the%20first%20item%0A%09(*)Repeat%20the%20same%20process%20for%20every%20item%20in%20the%20array%0A=%5D%0A%0A(***)%0A%0A(!)On%20+js#(array)#+1,%20create%20a%20variable%20called%20*counter*%20and%20assign%20%60array.length%60%20to%20it%0A(!)On%20+js#(array)#+3,%20create%20a%20*while%20loop*%20with%20the%20condition%20%60counter%20%3E%200%60%20and%20inside%20the%20loop,%20reduce%20the%20variable%20*counter*%20by%20*1*%0A(*)*TIP:*%20it's%20a%20good%20idea%20to%20always%20make%20sure%20the%20stop%20condition%20of%20a%20loop%20can%20be%20met%20before%20running%20your%20code.##INST_24E####CODE_24####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#var%20counter%20=%20array.length;#END_EDITABLE#%0A%0A%20%20%20%20#BEGIN_EDITABLE#while%20(counter%20%3E%200)%20%7B%20counter--;%20%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_24E####LOGIC_24####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20counter%20=%20array.length;%60);%0Apass.if.js.editable(1).equivalent.to(%60while%20(counter%20%3E%200)%20%7B%20counter--%20%7D%60).or(%60while%20(counter%20%3E%200)%20%7B%20counter--;%20%7D%60).or(%60while%20(counter%20%3E%200)%20%7B%20counter%20=%20counter%20-%201%20%7D%60).or(%60while%20(counter%20%3E%200)%20%7B%20counter%20=%20counter%20-%201;%20%7D%60).or(%60while%20(counter%20%3E%200)%20%7B%20counter%20-=%201%20%7D%60).or(%60while%20(counter%20%3E%200)%20%7B%20counter%20-=%201;%20%7D%60);##JS_E####LOGIC_24E####STEP_24E####STEP_25####INST_25##Shuffling%20the%20pieces%20-%203/4%0A%0ATo%20select%20a%20random%20item%20from%20an%20array,%20we%20need%20to%20generate%20a%20random%20integer%20that%20is%20within%20the%20index%20range%20of%20the%20array.%20To%20do%20that%20we%20will%20need%20to%20use%20the%20following:%0A%0A%5B-%0A%09(*)%60Math.random()%60%20gives%20you%20a%20random%20decimal%20number%20that%20is%20always%20equal%20to%20or%20greater%20than%200%20but%20less%20than%201.%20For%20example,%20you%20can%20generate%20a%20random%20number%20between%200%20and%2010%20by%20writing%20%60Math.random()%20*%2010%60.%0A%09(*)%60Math.floor(number)%60%20gives%20you%20only%20the%20integer%20part%20of%20a%20given%20number%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#counter%20%3E%200#+1,%20create%20a%20variable%20called%20*randomIndex*%20and%20assign%20to%20it%20a%20*random%20integer*%20between%20*0*%20and%20*counter*##INST_25E####CODE_25####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);#END_EDITABLE#%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_25E####LOGIC_25####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60let%20index%20=%20Math.floor(Math.random()%20*%20counter);%60);##JS_E####LOGIC_25E####STEP_25E####STEP_26####INST_26##Shuffling%20the%20pieces%20-%204/4%0A%0ANow%20we%20have%20a%20loop%20that%20goes%20through%20every%20item%20in%20the%20puzzle%20array,%20as%20well%20as%20a%20random%20index%20number%20in%20every%20iteration,%20we%20can%20go%20ahead%20with%20the%20algorithm%20for%20swapping.%0A%0A(***)%0A%0A(!)On%20+js#counter--#+2,%20create%20a%20new%20variable%20called%20*item*%20and%20assign%20%60array%5Bcounter%5D%60%20to%20it%0A(!)On%20+js#counter--#+4,%20overwrite%20%60array%5Bcounter%5D%60%20with%20%60array%5BrandomIndex%5D%60%0A(!)On%20+js#counter--#+5,%20overwrite%20%60array%5BrandomIndex%5D%60%20with%20*item*##INST_26E####CODE_26####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#let%20item%20=%20array%5Bcounter%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#array%5BrandomIndex%5D%20=%20item;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20loadImage;##JS_E####CODE_26E####LOGIC_26####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60let%20item%20=%20array%5Bcounter%5D;%60);%0Apass.if.js.editable(1).equivalent(%60array%5Bcounter%5D%20=%20array%5Bindex%5D;%60);%0Apass.if.js.editable(2).equivalent(%60array%5Bindex%5D%20=%20item;%60);##JS_E####LOGIC_26E####STEP_26E####STEP_27####INST_27##Generating%20new%20puzzle%20-%201/4%0A%0ATo%20test%20our%20game%20in%20generating%20puzzles%20from%20any%20image,%20we%20will%20need%20a%20button.%0A%0A(***)%0A%0A(!)On%20+html#%3Cinput#+1,%20create%20a%20%60%3Cbutton%3E%60%20element%20and%20set%20its%20*id*%20attribute%20to%20*update*%20and%20text%20content%20to%20*Generate%20New%20Puzzle*%0A(!)On%20+js#var%20link#+1,%20create%20a%20variable%20called%20*update*%20and%20reference%20the%20%60%3Cbutton%3E%60%20element%20by%20id%0A(!)On%20+js#window.onload#-2,%20create%20a%20function%20called%20*resetPuzzle*%0A(!)On%20+js#window.onload#+2,%20assign%20*resetPuzzle*%20to%20the%20%60update.onclick%60%20event%0A##INST_27E####CODE_27####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09#BEGIN_EDITABLE#%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E#END_EDITABLE#%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0A#BEGIN_EDITABLE#var%20update%20=%20document.getElementById(%22update%22);#END_EDITABLE#%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0A#BEGIN_EDITABLE#function%20resetPuzzle()%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20#BEGIN_EDITABLE#update.onclick%20=%20resetPuzzle;#END_EDITABLE#%0A%7D;##JS_E####CODE_27E####LOGIC_27####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%60);##HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20update%20=%20document.getElementById(%22update%22);%60);%0Apass.if.js.editable(1).equivalent(%60function%20resetPuzzle()%20%7B%7D%60);%0Apass.if.js.editable(2).equivalent(%60update.onclick%20=%20resetPuzzle;%60);##JS_E####LOGIC_27E####STEP_27E####STEP_28####INST_28##Generating%20new%20puzzle%20-%202/4%0A%0AThe%20first%20thing%20we%20need%20to%20do%20before%20generating%20a%20new%20puzzle%20is%20to%20get%20rid%20of%20all%20the%20puzzle%20pieces%20in%20the%20game.%0A%0AYou%20can%20do%20this%20with%20the%20handy%20%60.forEach()%60%20function.%0A%0A(***)%0A%0A(!)On%20+js#resetPuzzle()%20%7B#+1,%20call%20the%20%60puzzle.forEach()%60%20function%20and%20pass%20a%20name%20less%20function%20as%20the%20argument.%20The%20nameless%20function%20must%20accept%20an%20argument%20and%20stores%20it%20in%20*piece*.##INST_28E####CODE_28####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#puzzle.forEach(function(piece)%20%7B%7D);#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;##JS_E####CODE_28E####LOGIC_28####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzle.forEach(function(piece)%20%7B%7D);%60);##JS_E####LOGIC_28E####STEP_28E####STEP_29####INST_29##Generating%20new%20puzzle%20-%203/4%0A%0ASimilar%20to%20how%20%60.appendChild()%60%20works,%20we%20can%20remove%20an%20HTML%20element%20from%20its%20parent%20using%20%60.removeChild()%60.%0A%0A(***)%0A%0A(!)On%20+js#resetPuzzle()%20%7B#+2,%20remove%20*piece*%20from%20the%20*puzzleContainer*%20element%20using%20%60.removeChild()%60##INST_29E####CODE_29####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleContainer.removeChild(piece);#END_EDITABLE#%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;##JS_E####CODE_29E####LOGIC_29####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzleContainer.removeChild(piece);%60);##JS_E####LOGIC_29E####STEP_29E####STEP_30####INST_30##Generating%20new%20puzzle%20-%204/4%0A%0AGenerating%20a%20new%20puzzle%20requires%20us%20to%20recreate%20the%20*array*%20and%20*arrayGrid*%20arrays,%20so%20we%20should%20empty%20them%20beforehand.%0A%0A(***)%0A%0A(!)On%20+js#removeChild(piece)#+3,%20assign%20an%20empty%20array%20to%20*puzzle*%0A(!)On%20+js#removeChild(piece)#+4,%20assign%20an%20empty%20array%20to%20*puzzleGrid*%0A(!)On%20+js#removeChild(piece)#+6,%20call%20the%20*loadImage*%20function##INST_30E####CODE_30####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.removeChild(piece);%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#puzzle%20=%20%5B%5D;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#puzzleGrid%20=%20%5B%5D;#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#loadImage();#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;##JS_E####CODE_30E####LOGIC_30####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzle%20=%20%5B%5D;%60);%0Apass.if.js.editable(1).equivalent(%60puzzleGrid%20=%20%5B%5D;%60);%0Apass.if.js.editable(2).equivalent(%60loadImage();%60);##JS_E####LOGIC_30E####STEP_30E####STEP_31####INST_31##Tray%20area%0A%0ANext%20we%20need%20to%20add%20an%20area%20to%20the%20game%20so%20players%20can%20manage%20their%20pieces.%0A%0AWe'll%20call%20this%20the%20tray%20area.%0A%0A(***)%0A%0A(!)On%20+html#update#+2,%20create%20a%20%60%3Cdiv%3E%60%20element%20and%20set%20its%20*id*%20attribute%20to%20*tray*%0A(!)On%20+js#var%20update#+1,%20create%20a%20variable%20called%20*tray*%20and%20reference%20the%20%60%3Cdiv%3E%60%20element%20by%20id##INST_31E####CODE_31####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09#BEGIN_EDITABLE#%3Cdiv%20id=%22tray%22%3E%3C/div%3E#END_EDITABLE#%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E##HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0A#BEGIN_EDITABLE#var%20tray%20=%20document.getElementById(%22tray%22);#END_EDITABLE#%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;##JS_E####CODE_31E####LOGIC_31####HTML##//%20Expectation:%0Apass.if.html.editable(0).equivalent(%60%3Cdiv%20id=%22tray%22%3E%3C/div%3E%60);##HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20tray%20=%20document.getElementById(%22tray%22);%60);%0Apass.if.js.editable(1).equivalent(%60tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%60);##JS_E####LOGIC_31E####STEP_31E####STEP_32####INST_32##Selecting%20a%20piece%20-%201/6%0A%0AThe%20UI%20of%20the%20game%20is%20all%20done!%0A%0AWe%20can%20move%20on%20to%20making%20the%20pieces%20respond%20to%20mouse%20actions%20such%20as%20click%20&%20drag.%0A%0A(***)%0A%0A(!)On%20+js#var%20tray#+1,%20create%20a%20variable%20called%20*mouseDown*%20and%20assign%20*false*%20to%20it%0A(!)On%20+js#window.onload#+5,%20assign%20a%20nameless%20function%20to%20the%20%60window.onmousedown%60%20event.%20In%20the%20nameless%20function,%20assign%20*true*%20to%20*mouseDown*##INST_32E####CODE_32####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0A#BEGIN_EDITABLE#var%20mouseDown%20=%20false;#END_EDITABLE#%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0A#BEGIN_EDITABLE#window.onmousedown%20=%20function()%20%7B%20mouseDown%20=%20true%20%7D;#END_EDITABLE###JS_E####CODE_32E####LOGIC_32####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20mouseDown%20=%20false;%60);%0Apass.if.js.editable(1).equivalent.or(%60window.onmousedown%20=%20function()%20%7B%20mouseDown%20=%20true%20%7D;%60).or(%60window.onmousedown%20=%20function()%20%7B%20mouseDown%20=%20true;%20%7D;%60);##JS_E####LOGIC_32E####STEP_32E####STEP_33####INST_33##Selecting%20a%20piece%20-%202/6%0A%0AThe%20first%20thing%20our%20game%20must%20capture%20is%20the%20act%20of%20pressing%20a%20mouse%20button.%0A%0A(***)%0A%0A(!)On%20+js#window.onload#-2,%20create%20a%20function%20called%20*selectPiece*%20that%20accepts%20an%20argument%20and%20stores%20it%20in%20*target*%0A(!)On%20+js#window.onmousedown#+2,%20call%20the%20*selectPiece*%20function%20and%20pass%20%60event.target%60%20as%20the%20argument%0A(*)*TIP:*%20in%20events%20such%20as%20%60.onload%60%20or%20%60.onclick%60,%20%60event.target%60%20represents%20the%20element%20that%20triggered%20the%20event.%20In%20the%20case%20of%20%60.onmousedown%60,%20it%20is%20the%20element%20that%20is%20directly%20under%20the%20mouse%20cursor%20when%20any%20mouse%20button%20is%20pressed%20down.##INST_33E####CODE_33####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0A#BEGIN_EDITABLE#function%20selectPiece(target)%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20#BEGIN_EDITABLE#selectPiece(event.target);#END_EDITABLE#%0A%7D;##JS_E####CODE_33E####LOGIC_33####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60function%20selectPiece(target)%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60selectPiece(event.target);%60);##JS_E####LOGIC_33E####STEP_33E####STEP_34####INST_34##Selecting%20a%20piece%20-%203/6%0A%0AWhen%20the%20play%20clicks%20on%20a%20puzzle%20piece,%20we%20will%20store%20its%20index%20in%20an%20variable%20called%20*activeIndex*,%20this%20will%20help%20us%20to%20keep%20track%20of%20which%20piece%20the%20player%20is%20trying%20to%20move%20around,%20as%20well%20as%20making%20sure%20only%20one%20piece%20is%20being%20moved%20at%20a%20time.%0A%0A(***)%0A%0A(!)On%20+js#var%20image;#-1,%20create%20a%20variable%20called%20*activeIndex*%0A(!)On%20+js#var%20image;#-1,%20create%20an%20*if%20statement*%20with%20%60Number.isInteger(activeIndex)%20==%20false%60%20as%20the%20condition%0A(*)*TIP:*%20we%20only%20want%20the%20*selectPiece*%20function%20to%20work%20if%20there%20is%20no%20puzzle%20piece%20being%20actively%20selected.##INST_34E####CODE_34####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0A#BEGIN_EDITABLE#var%20activeIndex;#END_EDITABLE#%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(!Number.isInteger(activeIndex))%20%7B%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;##JS_E####CODE_34E####LOGIC_34####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20activeIndex;%60);%0Apass.if.js.editable(1).equivalent.to(%60if%20(!Number.isInteger(activeIndex))%20%7B%7D%60).or(%60if%20(Number.isInteger(activeIndex)%20==%20false)%20%7B%7D%60);##JS_E####LOGIC_34E####STEP_34E####STEP_35####INST_35##Selecting%20a%20piece%20-%204/6%0A%0AThe%20next%20layer%20of%20logic%20in%20the%20*selectPiece*%20function%20will%20be%20to%20filter%20out%20anything%20that%20is%20not%20a%20puzzle%20piece.%0A%0ATo%20find%20out%20whether%20*target*%20is%20a%20puzzle%20piece,%20we%20can%20use%20the%20%60.includes()%60%20function.%0A%0A(***)%0A%0A(!)On%20+js#!Number#+1,%20create%20an%20*if%20statement*%20with%20%60puzzle.includes(target)%60%20as%20the%20condition.%20Inside%20the%20if%20statement,%20assign%20%60puzzle.indexOf(target)%60%20to%20*activeIndex*%0A(*)*TIP:*%20%60.indexOf()%60%20gives%20you%20the%20index%20number%20of%20an%20item%20within%20an%20array.%20For%20example,%20%60%5Balex,%20bell,%20cindy,%20dan%5D.indexOf(bell)%60%20will%20give%20you%201.##INST_35E####CODE_35####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(puzzle.includes(target))%20%7B%20activeIndex%20=%20puzzle.indexOf(target)%20%7D#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;##JS_E####CODE_35E####LOGIC_35####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(puzzle.includes(target))%20%7B%20activeIndex%20=%20puzzle.indexOf(target)%20%7D%60).or(%60if%20(puzzle.includes(target))%20%7B%20activeIndex%20=%20puzzle.indexOf(target);%20%7D%60);##JS_E####LOGIC_35E####STEP_35E####STEP_36####INST_36##Selecting%20a%20piece%20-%205/6%0A%0AAfter%20the%20first%20if%20statement%20block%20(+js#!Number#+1%20-%20js#indexOf#+2),%20variable%20*activeIndex*%20will%20be%20an%20integer%20number%20if%20the%20player%20clicked%20on%20a%20puzzle%20piece.%0A%0AWe%20want%20to%20continue%20our%20logic%20if%20the%20player%20did%20click%20on%20a%20puzzle%20piece.%0A%0A(***)%0A%0A(!)On%20+js#indexOf#+2,%20add%20an%20*else*%20block%20to%20the%20if%20statement,%20inside%20it,%20assign%20*null*%20to%20*activeIndex*%0A(!)On%20+js#indexOf#+4,%20create%20an%20*if%20statement*%20with%20%60Number.isInteger(activeIndex)%60%20as%20the%20condition##INST_36E####CODE_36####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%20activeIndex%20=%20null%20%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(Number.isInteger(activeIndex))%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;##JS_E####CODE_36E####LOGIC_36####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60else%20%7B%20activeIndex%20=%20null%20%7D%60).or(%60else%20%7B%20activeIndex%20=%20null;%20%7D%60);%0Apass.if.js.editable(1).equivalent(%60if%20(Number.isInteger(activeIndex))%20%7B%7D%60);##JS_E####LOGIC_36E####STEP_36E####STEP_37####INST_37##Selecting%20a%20piece%20-%206/6%0A%0AIf%20the%20condition%20on%20+js#(Number#%20is%20met%20then%20we%20know%20that%20the%20player%20clicked%20on%20a%20puzzle%20piece.%0A%0AWe%20then%20need%20to%20set%20the%20%60.isEmpty%60%20property%20on%20the%20puzzle%20grid%20underneath%20that%20piece%20to%20*true*.%0A%0A(***)%0A%0A(!)On%20+js#(Number#+1,%20assign%20*true*%20to%20%60puzzleGrid%5BactiveIndex%5D.isEmpty%60##INST_37E####CODE_37####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;##JS_E####CODE_37E####LOGIC_37####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%60);##JS_E####LOGIC_37E####STEP_37E####STEP_38####INST_38##Moving%20a%20piece%20-%201/6%0A%0AWe've%20managed%20to%20identify%20which%20puzzle%20piece%20the%20player%20clicks%20on%20now.%0A%0AThe%20next%20event%20we%20need%20to%20capture%20is%20the%20mouse%20move%20event.%0A%0A(***)%0A%0A(!)On%20+js#window.onload#-2,%20create%20a%20function%20called%20*movePiece*%20that%20accepts%202%20arguments%20and%20stores%20them%20in%20*clientX*%20and%20*clientY*%0A(!)On%20+js#event.target#+3,%20assign%20a%20nameless%20function%20to%20the%20%60window.onmousemove%60%20event##INST_38E####CODE_38####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A#BEGIN_EDITABLE#function%20movePiece(clientX,%20clientY)%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A#BEGIN_EDITABLE#window.onmousemove%20=%20function()%20%7B%7D;#END_EDITABLE###JS_E####CODE_38E####LOGIC_38####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60function%20movePiece(clientX,%20clientY)%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60window.onmousemove%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_38E####STEP_38E####STEP_39####INST_39##Moving%20a%20piece%20-%202/6%0A%0AInside%20the%20*movePiece*%20function,%20we%20also%20want%20to%20ensure%20that%20it%20only%20works%20when%20there%20is%20an%20active%20puzzle%20piece%20being%20selected.%0A%0AAnd%20we%20only%20want%20to%20call%20the%20*movePiece*%20function%20when%20the%20variable%20*mouseDown*%20is%20*true*.%0A%0A(***)%0A%0A(!)On%20+js#(clientX#+1,%20create%20an%20*if%20statement*%20with%20%60Number.isInteger(activeIndex)%60%20as%20the%20condition%0A(!)On%20+js#.onmousemove#+1,%20create%20an%20*if%20statement*%20with%20%60mouseDown%20==%20true%60%20as%20the%20condition,%20inside%20it,%20call%20the%20*movePiece*%20function%20and%20pass%20%60event.clientX,%20event.clientY%60%20as%20arguments%0A(*)*TIP:*%20in%20all%20*mouse%20events*,%20the%20%60.clientX%60%20and%20%60.clientY%60%20properties%20are%20the%20x%20&%20y%20mouse%20positions%20at%20the%20time%20of%20the%20event%20being%20triggered.##INST_39E####CODE_39####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(Number.isInteger(activeIndex))%20%7B%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(mouseDown)%20%7B%20movePiece(event.clientX,%20event.clientY)%20%7D#END_EDITABLE#%0A%7D;##JS_E####CODE_39E####LOGIC_39####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(Number.isInteger(activeIndex))%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent.to(%60if%20(mouseDown)%20%7B%20movePiece(event.clientX,%20event.clientY)%20%7D%60).or(%60if%20(mouseDown)%20%7B%20movePiece(event.clientX,%20event.clientY);%20%7D%60).orto(%60if%20(mouseDown%20==%20true)%20%7B%20movePiece(event.clientX,%20event.clientY)%20%7D%60).or(%60if%20(mouseDown%20==%20true)%20%7B%20movePiece(event.clientX,%20event.clientY);%20%7D%60);##JS_E####LOGIC_39E####STEP_39E####STEP_40####INST_40##Moving%20a%20piece%20-%203/6%0A%0ARemember%20that%20we%20added%20all%20the%20puzzle%20pieces%20as%20children%20of%20the%20*puzzleContainer*%20element?%20This%20means%20if%20a%20puzzle%20piece%20has%20its%20%60style.left%60%20set%20to%20*0px*,%20it'll%20be%200%20pixels%20away%20from%20the%20left%20side%20of%20the%20container,%20not%20the%20screen.%0A%0ATo%20account%20for%20this,%20we%20need%20to%20offset%20the%20value%20of%20*clientX*%20and%20*clientY*%20by%20the%20container's%20%60.offsetLeft%60%20and%20%60.offsetTop%60.%0A%0A(***)%0A%0A(!)On%20+js#(clientX#+2,%20create%20a%20variable%20called%20*offsetX*%20and%20assign%20%60clientX%20-%20puzzleContainer.offsetLeft%60%20to%20it%0A(!)On%20+js#(clientX#+3,%20create%20a%20variable%20called%20*offsetY*%20and%20assign%20%60clientY%20-%20puzzleContainer.offsetTop%60%20to%20it%0A(!)On%20+js#(clientX#+4,%20create%20a%20variable%20called%20*piece*%20and%20assign%20%60puzzle%5BactiveIndex%5D.getBoundingClientRect()%60%20to%20it%0A(*)*TIP:*%20this%20will%20allow%20us%20to%20use%20%60piece.width%60%20and%20%60piece.height%60%20later%20so%20our%20code%20is%20more%20readable.##INST_40E####CODE_40####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;##JS_E####CODE_40E####LOGIC_40####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%60);%0Apass.if.js.editable(1).equivalent(%60var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%60);%0Apass.if.js.editable(2).equivalent(%60var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%60);##JS_E####LOGIC_40E####STEP_40E####STEP_41####INST_41##Moving%20a%20piece%20-%204/6%0A%0ALike%20we%20did%20for%20the%20variable%20*activeIndex*,%20which%20indicates%20the%20index%20of%20an%20active%20puzzle%20piece,%20we%20need%20another%20variable%20for%20the%20index%20of%20the%20grid%20above%20which%20the%20active%20puzzle%20piece%20is%20hovering.%0A%0AUse%20the%20following%20formula%20to%20calculate%20the%20index%20of%20the%20active%20grid:%0A%0A(*)index%20=%20floor(offsetY%20/%20piece.height)%20*%20(number%20of%20columns)%20+%20floor(offsetX%20/%20piece.width)%0A%0A(***)%0A%0A(!)On%20+js#var%20image;#-1,%20create%20a%20variable%20called%20*activeGrid*%0A(!)On%20+js#Rect()#+2,%20assign%20the%20correct%20item%20in%20the%20*puzzleGrid*%20array%20to%20*activeGrid*%0A(*)*TIP:*%20use%20the%20provide%20formula%20to%20calculate%20the%20active%20grid%20index.##INST_41E####CODE_41####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0A#BEGIN_EDITABLE#var%20activeGrid;#END_EDITABLE#%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;##JS_E####CODE_41E####LOGIC_41####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20activeGrid;%60);%0Apass.if.js.editable(1).equivalent(%60activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%60);##JS_E####LOGIC_41E####STEP_41E####STEP_42####INST_42##Moving%20a%20piece%20-%205/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_42E####CODE_42####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;##JS_E####CODE_42E####LOGIC_42####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%20+%20%22px%22;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20+%20%22px%22;%60);##JS_E####LOGIC_42E####STEP_42E####STEP_43####INST_43##Moving%20a%20piece%20-%206/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_43E####CODE_43####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;##JS_E####CODE_43E####LOGIC_43####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%60).or(%60puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0';%20%7D);%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%60);##JS_E####LOGIC_43E####STEP_43E####STEP_44####INST_44##Dropping%20a%20piece%20-%201/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_44E####CODE_44####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0A#BEGIN_EDITABLE#function%20dropPiece(clientX,%20clientY)%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A#BEGIN_EDITABLE#window.onmouseup%20=%20function()%20%7B%7D;#END_EDITABLE###JS_E####CODE_44E####LOGIC_44####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60function%20dropPiece(clientX,%20clientY)%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60window.onmouseup%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_44E####STEP_44E####STEP_45####INST_45##Dropping%20a%20piece%20-%202/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_45E####CODE_45####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(Number.isInteger(activeIndex))%20%7B%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#mouseDown%20=%20false;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#dropPiece(event.clientX,%20event.clientY);#END_EDITABLE#%0A%7D;##JS_E####CODE_45E####LOGIC_45####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(1).equivalent(%60mouseDown%20=%20false;%60);%0Apass.if.js.editable(2).equivalent(%60dropPiece(event.clientX,%20event.clientY);%60);%0Apass.if.js.editable(0).equivalent(%60if%20(Number.isInteger(activeIndex))%20%7B%7D%60);##JS_E####LOGIC_45E####STEP_45E####STEP_46####INST_46##Dropping%20a%20piece%20-%203/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_46E####CODE_46####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#activeIndex%20=%20null;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_46E####LOGIC_46####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%7D%60);%0Apass.if.js.editable(1).equivalent(%60else%20%7B%7D%60);%0Apass.if.js.editable(2).equivalent(%60activeIndex%20=%20null;%60);##JS_E####LOGIC_46E####STEP_46E####STEP_47####INST_47##Dropping%20a%20piece%20-%204/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_47E####CODE_47####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(insideTrayX%20&&%20insideTrayY)%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_47E####LOGIC_47####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%60);%0Apass.if.js.editable(1).equivalent(%60var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%60);%0Apass.if.js.editable(2).equivalent(%60if%20(insideTrayX%20&&%20insideTrayY)%20%7B%7D%60);%0Apass.if.js.editable(3).equivalent(%60else%20%7B%7D%60);##JS_E####LOGIC_47E####STEP_47E####STEP_48####INST_48##Dropping%20a%20piece%20-%205/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_48E####CODE_48####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#placePiece(activeGrid);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.offsetLeft#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y:%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.offsetTop#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0A#BEGIN_EDITABLE#function%20placePiece(location)%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_48E####LOGIC_48####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60placePiece(activeGrid);%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.offsetLeft%60);%0Apass.if.js.editable(2).equivalent(%60puzzle%5BactiveIndex%5D.offsetTop%60);%0Apass.if.js.editable(3).equivalent(%60function%20placePiece(location)%20%7B%7D%60);##JS_E####LOGIC_48E####STEP_48E####STEP_49####INST_49##Dropping%20a%20piece%20-%206/8%0A%0AParagraph%0A%0AThe%20variable%20%60location%60%20having%20the%20%60index%60%20property%20means%20we're%20dropping%20the%20piece%20in%20the%20gird.%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_49E####CODE_49####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#if%20(Number.isInteger(location.index))%20%7B%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_49E####LOGIC_49####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%60);%0Apass.if.js.editable(2).equivalent(%60if%20(Number.isInteger(location.index))%20%7B%7D%60);##JS_E####LOGIC_49E####STEP_49E####STEP_50####INST_50##Dropping%20a%20piece%20-%207/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_50E####CODE_50####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.location%20=%20location;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_50E####LOGIC_50####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.location%20=%20location;%60);##JS_E####LOGIC_50E####STEP_50E####STEP_51####INST_51##Dropping%20a%20piece%20-%208/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_51E####CODE_51####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20item%20=%20puzzle%5Blocation.index%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D%20=%20item;#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_51E####LOGIC_51####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20item%20=%20puzzle%5Blocation.index%5D;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%60);%0Apass.if.js.editable(2).equivalent(%60puzzle%5BactiveIndex%5D%20=%20item;%60);##JS_E####LOGIC_51E####STEP_51E####STEP_52####INST_52##Checking%20the%20result%20-%201/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_52E####CODE_52####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#checkPuzzle();#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0A#BEGIN_EDITABLE#function%20checkPuzzle()%20%7B%7D#END_EDITABLE#%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_52E####LOGIC_52####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60checkPuzzle();%60);%0Apass.if.js.editable(1).equivalent(%60function%20checkPuzzle()%20%7B%7D%60);##JS_E####LOGIC_52E####STEP_52E####STEP_53####INST_53##Checking%20the%20result%20-%202/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_53E####CODE_53####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%7D);#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_53E####LOGIC_53####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%7D);%60);##JS_E####LOGIC_53E####STEP_53E####STEP_54####INST_54##Checking%20the%20result%20-%203/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_54E####CODE_54####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#return%20piece.id%20==%20%22piece%22%20+%20i;#END_EDITABLE#%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_54E####LOGIC_54####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60return%20piece.id%20==%20%22piece%22%20+%20i;%60);##JS_E####LOGIC_54E####STEP_54E####STEP_55####INST_55##Checking%20the%20result%20-%204/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_55E####CODE_55####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#if%20(pass)%20%7B%20resetPuzzle()%20%7D#END_EDITABLE#%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_55E####LOGIC_55####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(pass)%20%7B%20resetPuzzle()%20%7D%60).or(%60if%20(pass)%20%7B%20resetPuzzle();%20%7D%60);##JS_E####LOGIC_55E####STEP_55E####STEP_56####INST_56##Checking%20the%20result%20-%205/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_56E####CODE_56####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D)#END_EDITABLE#)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_56E####LOGIC_56####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D)%60).or(%60puzzleGrid.every(function(grid)%20%7B%20return%20grid.isEmpty%20==%20false%20%7D)%60).or(%60puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty;%20%7D)%60).or(%60puzzleGrid.every(function(grid)%20%7B%20return%20grid.isEmpty%20==%20false;%20%7D)%60);##JS_E####LOGIC_56E####STEP_56E####STEP_57####INST_57##Checking%20the%20result%20-%206/6%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_57E####CODE_57####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20#BEGIN_EDITABLE#activeIndex%20=%20null;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#activeGrid%20=%20null;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#mouseDown%20=%20false;#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;##JS_E####CODE_57E####LOGIC_57####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60activeIndex%20=%20null;%60);%0Apass.if.js.editable(1).equivalent(%60activeGrid%20=%20null;%60);%0Apass.if.js.editable(2).equivalent(%60mouseDown%20=%20false;%60);##JS_E####LOGIC_57E####STEP_57E####STEP_58####INST_58##Mobile%20usage%20-%201/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_58E####CODE_58####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A#BEGIN_EDITABLE#window.ontouchstart%20=%20function()%20%7B%7D;#END_EDITABLE#%0A%0A#BEGIN_EDITABLE#window.ontouchmove%20=%20function()%20%7B%7D;#END_EDITABLE#%0A%0A#BEGIN_EDITABLE#window.ontouchend%20=%20function()%20%7B%7D;#END_EDITABLE###JS_E####CODE_58E####LOGIC_58####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.ontouchstart%20=%20function()%20%7B%7D;%60);%0Apass.if.js.editable(1).equivalent(%60window.ontouchmove%20=%20function()%20%7B%7D;%60);%0Apass.if.js.editable(2).equivalent(%60window.ontouchend%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_58E####STEP_58E####STEP_59####INST_59##Mobile%20usage%20-%202/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_59E####CODE_59####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(event.touches.length%20==%201)%20%7B%20selectPiece(event.target)%20%7D#END_EDITABLE#%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20%0A%7D;##JS_E####CODE_59E####LOGIC_59####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(event.touches.length%20==%201)%20%7B%20selectPiece(event.target)%20%7D%60).or(%60if%20(event.touches.length%20==%201)%20%7B%20selectPiece(event.target);%20%7D%60);##JS_E####LOGIC_59E####STEP_59E####STEP_60####INST_60##Mobile%20usage%20-%203/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_60E####CODE_60####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(event.touches.length%20==%201)%20%7B%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY)%20%7D#END_EDITABLE#%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20%0A%7D;##JS_E####CODE_60E####LOGIC_60####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(event.touches.length%20==%201)%20%7B%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY)%20%7D%60).or(%60if%20(event.touches.length%20==%201)%20%7B%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%20%7D%60);##JS_E####LOGIC_60E####STEP_60E####STEP_61####INST_61##Mobile%20usage%20-%204/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_61E####CODE_61####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_61E####LOGIC_61####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_61E####STEP_61E####STEP_62####INST_62##Mobile%20usage%20-%205/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_62E####CODE_62####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20#BEGIN_EDITABLE#event.preventDefault();#END_EDITABLE#%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_62E####LOGIC_62####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60event.preventDefault();%60);##JS_E####LOGIC_62E####STEP_62E####STEP_63####INST_63##Better%20user%20experience%20-%201/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_63E####CODE_63####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.location%20=%20puzzleGrid%5Bi%5D;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#placePiece(puzzle%5BactiveIndex%5D.location);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_63E####LOGIC_63####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60piece.location%20=%20puzzleGrid%5Bi%5D;%60);%0Apass.if.js.editable(1).equivalent(%60placePiece(puzzle%5BactiveIndex%5D.location);%60);##JS_E####LOGIC_63E####STEP_63E####STEP_64####INST_64##Better%20user%20experience%20-%202/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_64E####CODE_64####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.offsetLeft#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y:%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.offsetTop#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_64E####LOGIC_64####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20outsideLocation;%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.offsetLeft%60);%0Apass.if.js.editable(2).equivalent(%60puzzle%5BactiveIndex%5D.offsetTop%60);##JS_E####LOGIC_64E####STEP_64E####STEP_65####INST_65##Better%20user%20experience%20-%203/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_65E####CODE_65####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location#END_EDITABLE#);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_65E####LOGIC_65####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location%60);%0Apass.if.js.editable(0).equivalent(%60puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%60);##JS_E####LOGIC_65E####STEP_65E####STEP_66####INST_66##Better%20user%20experience%20-%204/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_66E####CODE_66####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20newX;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20#BEGIN_EDITABLE#newX#END_EDITABLE#,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20#BEGIN_EDITABLE#newX#END_EDITABLE#,%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_66E####LOGIC_66####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20newX;%60);%0Apass.if.js.editable(1).equivalent(%60newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%60);%0Apass.if.js.editable(2).equivalent(%60newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%60);%0Apass.if.js.editable(3).equivalent(%60newX%60);%0Apass.if.js.editable(4).equivalent(%60newX%60);##JS_E####LOGIC_66E####STEP_66E####STEP_67####INST_67##Better%20user%20experience%20-%205/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_67E####CODE_67####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20newY;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20-%2020);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20#BEGIN_EDITABLE#newY#END_EDITABLE#%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20#BEGIN_EDITABLE#newY#END_EDITABLE#%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_67E####LOGIC_67####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20newY;%60);%0Apass.if.js.editable(1).equivalent(%60newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%60);%0Apass.if.js.editable(2).equivalent(%60newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20-%2020);%60);%0Apass.if.js.editable(3).equivalent(%60newY%60);%0Apass.if.js.editable(4).equivalent(%60newY%60);##JS_E####LOGIC_67E####STEP_67E####STEP_68####INST_68##Better%20user%20experience%20-%206/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_68E####CODE_68####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(#BEGIN_EDITABLE#Math.random()%20%3E%200.7#END_EDITABLE#)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#else%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_68E####LOGIC_68####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60Math.random()%20%3E%200.7%60);%0Apass.if.js.editable(1).equivalent(%60else%20%7B%7D%60);##JS_E####LOGIC_68E####STEP_68E####STEP_69####INST_69##Better%20user%20experience%20-%207/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_69E####CODE_69####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.left%20=%20randomX%20+%20'px';#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20#BEGIN_EDITABLE#randomX#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzleGrid%5Bi%5D.isEmpty%20=%20true;#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_69E####LOGIC_69####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%60);%0Apass.if.js.editable(1).equivalent(%60piece.style.left%20=%20randomX%20+%20'px';%60);%0Apass.if.js.editable(2).equivalent(%60randomX%60);%0Apass.if.js.editable(3).equivalent(%60puzzleGrid%5Bi%5D.isEmpty%20=%20true;%60);##JS_E####LOGIC_69E####STEP_69E####STEP_70####INST_70##Better%20user%20experience%20-%208/8%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_70E####CODE_70####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#piece.style.top%20=%20randomY%20+%20'px';#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20randomX,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y:%20#BEGIN_EDITABLE#randomY#END_EDITABLE#,%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_70E####LOGIC_70####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%60);%0Apass.if.js.editable(1).equivalent(%60piece.style.top%20=%20randomY%20+%20'px';%60);%0Apass.if.js.editable(2).equivalent(%60randomY%60);##JS_E####LOGIC_70E####STEP_70E####STEP_71####INST_71##Adding%20animation%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_71E####CODE_71####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';#END_EDITABLE#%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';#END_EDITABLE#%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_71E####LOGIC_71####HTML####HTML_E####CSS##//%20Expectation:%0Apass.if.css.editable(0).equivalent(%60transition-property:%20top,%20left;%60);##CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%60);%0Apass.if.js.editable(1).equivalent(%60puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%60);##JS_E####LOGIC_71E####STEP_71E####STEP_72####INST_72##Improving%20image%20loading%20-%201/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_72E####CODE_72####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#showPopup('Loading%20image...');#END_EDITABLE#%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#removePopup();#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_72E####LOGIC_72####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60showPopup('Loading%20image...');%60);%0Apass.if.js.editable(1).equivalent(%60removePopup();%60);##JS_E####LOGIC_72E####STEP_72E####STEP_73####INST_73##Improving%20image%20loading%20-%202/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_73E####CODE_73####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20#BEGIN_EDITABLE#var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%7D,%2010000);#END_EDITABLE#%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#clearTimeout(checkLoadStatus);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_73E####LOGIC_73####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%7D,%2010000);%60);%0Apass.if.js.editable(1).equivalent(%60clearTimeout(checkLoadStatus);%60);##JS_E####LOGIC_73E####STEP_73E####STEP_74####INST_74##Improving%20image%20loading%20-%203/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_74E####CODE_74####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(document.body.contains(popup.element))%20%7B%7D#END_EDITABLE#%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_74E####LOGIC_74####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60if%20(document.body.contains(popup.element))%20%7B%7D%60);##JS_E####LOGIC_74E####STEP_74E####STEP_75####INST_75##Improving%20image%20loading%20-%204/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_75E####CODE_75####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#removePopup();#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_75E####LOGIC_75####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60removePopup();%60);%0Apass.if.js.editable(1).equivalent(%60showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22);%60);##JS_E####LOGIC_75E####STEP_75E####STEP_76####INST_76##Improving%20image%20loading%20-%205/5%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_76E####CODE_76####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22,%20#BEGIN_EDITABLE#'Okay'#END_EDITABLE#,%20#BEGIN_EDITABLE#removePopup#END_EDITABLE#);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_76E####LOGIC_76####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60'Okay'%60);%0Apass.if.js.editable(1).equivalent(%60removePopup%60);##JS_E####LOGIC_76E####STEP_76E####STEP_77####INST_77##End%20game%20message%20-%201/2%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_77E####CODE_77####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22,%20'Okay',%20removePopup);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#showPopup(%22Well%20done!%20You%20successfully%20solved%20the%20puzzle.%22,%20%22Play%20again%22,%20function()%20%7B%7D);#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_77E####LOGIC_77####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60showPopup(%22Well%20done!%20You%20successfully%20solved%20the%20puzzle.%22,%20%22Play%20again%22,%20resetPuzzle);%60);##JS_E####LOGIC_77E####STEP_77E####STEP_78####INST_78##End%20game%20message%20-%202/2%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_78E####CODE_78####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22,%20'Okay',%20removePopup);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%22Well%20done!%20You%20successfully%20solved%20the%20puzzle.%22,%20%22Play%20again%22,%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#removePopup();#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#resetPuzzle();#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_78E####LOGIC_78####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60removePopup();%60);%0Apass.if.js.editable(1).equivalent(%60resetPuzzle();%60);##JS_E####LOGIC_78E####STEP_78E####STEP_79####INST_79##Generic%0A%0AParagraph%0A%0AParagraph%0A%0A(***)%0A%0A(!)On%20+type#key#,%20objective##INST_79E####CODE_79####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type=%22text%22%20id=%22link%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id=%22update%22%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%20%20%20%20%3C!--%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E--%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20color:%20white;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.5);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20#BEGIN_EDITABLE#transition-property:%20top,%20left;#END_EDITABLE#%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##var%20minGrid%20=%202;%0Avar%20resolution;%0Avar%20maxWidth%20=%200.9;%0Avar%20maxHeight%20=%200.3;%0Avar%20puzzle%20=%20%5B%5D;%0Avar%20puzzleGrid%20=%20%5B%5D;%0Avar%20activeIndex;%0Avar%20activeGrid;%0Avar%20image;%0Avar%20puzzleContainer%20=%20document.getElementById(%22puzzleContainer%22);%0Avar%20link%20=%20document.getElementById(%22link%22);%0Avar%20update%20=%20document.getElementById(%22update%22);%0Avar%20tray%20=%20document.getElementById(%22tray%22);%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20image...');%0A%20%20%20%20image%20=%20document.createElement(%22img%22);%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20var%20checkLoadStatus%20=%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%22Couldn't%20load%20the%20image%20after%2010%20seconds.%20Please%20make%20sure%20the%20image%20link%20is%20correct.%22,%20'Okay',%20removePopup);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20function()%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20imageRatio;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(image.width%20%3E=%20image.height)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.width%20/%20image.height;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BMath.round(minGrid%20*%20imageRatio),%20minGrid%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageRatio%20=%20image.height%20/%20image.width;%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%20=%20%5BminGrid,%20Math.round(minGrid%20*%20imageRatio)%5D;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setup();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%20%20%20%20%0A%20%20%20%20tray.style.height%20=%20window.innerHeight%20-%20tray.offsetTop%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20puzzle.forEach(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomX%20=%20Math.random()%20*%20(puzzleContainer.offsetWidth%20-%20piece.offsetWidth);%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20randomY%20=%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020%20+%20Math.random()%20*%20(tray.offsetHeight%20-%20piece.offsetHeight%20-%2040);%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20randomX%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20randomY%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.outsideLocation%20=%20%7B%20x:%20randomX,%20y:%20randomY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20var%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width;%0A%20%20%20%20var%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height;%0A%20%20%20%20var%20r%20=%20Math.min(hr,%20vr);%0A%20%20%20%20%0A%20%20%20%20var%20containerWidth%20=%20image.width%20*%20r;%0A%20%20%20%20var%20containerHeight%20=%20image.height%20*%20r;%0A%20%20%20%20%0A%20%20%20%20for%20(i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20var%20piece%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20var%20cellWidth%20=%20containerWidth%20/%20resolution%5B0%5D;%0A%20%20%20%20%20%20%20%20var%20cellHeight%20=%20containerHeight%20/%20resolution%5B1%5D;%0A%20%20%20%20%20%20%20%20var%20cellX%20=%20i%20%25%20resolution%5B0%5D%20*%20cellWidth;%0A%20%20%20%20%20%20%20%20var%20cellY%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20cellHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20piece.id%20=%20%22piece%22%20+%20i;%0A%20%20%20%20%20%20%20%20piece.className%20=%20%22piece%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%22url(%22%20+%20image.src%20+%20%22)%22;%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20cellWidth%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20cellHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20containerWidth%20+%20%22px%20%22%20+%20containerHeight%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20-cellX%20+%20%22px%20%22%20+%20-cellY%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20cellX,%20y:%20cellY,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20puzzleContainer.style.width%20=%20containerWidth%20+%20%22px%22;%0A%20%20%20%20puzzleContainer.style.height%20=%20containerHeight%20+%20%22px%22;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20var%20counter%20=%20array.length;%0A%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20randomIndex%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20counter--;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20item%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5BrandomIndex%5D;%0A%20%20%20%20%20%20%20%20array%5BrandomIndex%5D%20=%20item;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20puzzle.forEach(function(piece)%20%7B%20puzzleContainer.removeChild(piece)%20%7D);%0A%20%20%20%20%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(puzzle.includes(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.indexOf(target);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(function(piece)%20%7B%20piece.style.zIndex%20=%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20var%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft;%0A%20%20%20%20%20%20%20%20var%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop;%0A%20%20%20%20%20%20%20%20var%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20offsetX%20-%20piece.width%20/%202%20+%20%22px%22;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20offsetY%20-%20piece.height%20/%202%20+%20%22px%22;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayX%20=%20clientX%20%3E=%200%20&&%20clientX%20%3C=%20window.innerWidth;%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20insideTrayY%20=%20clientY%20%3E=%20tray.offsetTop%20&&%20clientY%20%3C=%20window.innerHeight;%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insideTrayX%20&&%20insideTrayY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newX;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newY;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetLeft,%200);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newX%20=%20Math.min(newX,%20puzzleGrid%5BpuzzleGrid.length%20-%201%5D.x);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.max(puzzle%5BactiveIndex%5D.offsetTop,%20tray.offsetTop%20-%20puzzleContainer.offsetTop%20+%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newY%20=%20Math.min(newY,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20puzzle%5BactiveIndex%5D.offsetHeight-%2020);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.outsideLocation%20=%20%7B%20x:%20newX,%20y:%20newY%20%7D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20newX,%20y:%20newY%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(puzzle%5BactiveIndex%5D.outsideLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(location)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.1s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20location.x%20+%20%22px%22;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20location.y%20+%20%22px%22;%0A%20%20%20%20%0A%20%20%20%20if%20(Number.isInteger(location.index))%20%7B%0A%20%20%20%20%20%20%20%20puzzleGrid%5Blocation.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20location;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20item%20=%20puzzle%5Blocation.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Blocation.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20item;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(function(grid)%20%7B%20return%20!grid.isEmpty%20%7D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20var%20pass%20=%20puzzle.every(function(piece,%20i)%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%22piece%22%20+%20i;%0A%20%20%20%20%7D);%0A%20%20%20%20%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%22Well%20done!%20You%20successfully%20solved%20the%20puzzle.%22,%20%22Play%20again%22,%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removePopup();%0A%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20removePopup()%20%7B%0A%20%20%20%20document.body.removeChild(popup.element);%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D%0A%0Awindow.onload%20=%20function()%20%7B%0A%20%20%20%20loadImage();%0A%20%20%20%20update.onclick%20=%20resetPuzzle;%0A%7D;%0A%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20==%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;##JS_E####CODE_79E####LOGIC_79####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_79E####STEP_79E##