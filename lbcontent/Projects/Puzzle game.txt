22##STEP_1####INST_1##Introduction%0A%0A%5BScenario%5D%20Why%20is%20this%20useful?%0A%0A%5BLearning%20Outcome%5D%20Exactly%20what%20the%20learner%20will%20do.%0A%0A%5BResult%5D##INST_1E####CODE_1####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0Aupdate.onclick%20=%20resetPuzzle;%0A%0Alink.onfocus%20=%20()%20=%3E%20%7B%0A%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0Awindow.onmousedown%20=%20()%20=%3E%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0Awindow.onmousemove%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.onmouseup%20=%20()%20=%3E%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0Awindow.ontouchstart%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A%7D;%0A%0Awindow.ontouchmove%20=%20()%20=%3E%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0Awindow.ontouchend%20=%20()%20=%3E%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_1E####LOGIC_1####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_1E####STEP_1E####STEP_2####INST_2##Loading%20the%20image%0A%0AWhen%20creating%20something%20of%20considerable%20complexity,%20in%20this%20case%20our%20puzzle%20game,%20it's%20wise%20to%20only%20let%20your%20code%20run%20after%20the%20page%20has%20fully%20loaded.%0A%0AWe%20can%20do%20this%20using%20the%20%60onload%60%20event.%0A%0A(***)%0A%0A(!)On%20+js#onresize#-2,%20make%20%60window.onload%60%20equal%20to%20%60loadImage%60%0A(*)*Tip:*%20this%20means%20that%20when%20everything%20inside%20the%20browser%20window%20is%20loaded,%20the%20%60loadImage%60%20function%20will%20run.%60%E2%80%9C##INST_2E####CODE_2####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%20%20%20%20%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20//%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0A#BEGIN_EDITABLE#window.onload%20=%20loadImage;#END_EDITABLE#%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20window.onmousedown%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20true;%0A//%20%20%20%20%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.onmousemove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_2E####LOGIC_2####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(1).equivalent(%60window.onload%20=%20loadImage;%60);##JS_E####LOGIC_2E####STEP_2E####STEP_3####INST_3##Shuffling%20the%20pieces%0A%0AThe%20image%20is%20now%20loaded%20using%20the%20link%20in%20the%20middle%20of%20the%20page%20(%20+js#image.src%20=%20link.value;#%20).%0A%0A%5Bimg::http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/04/puzzle_link.png%5D%0A%0AThe%20*generatePuzzle*%20function%20then%20sliced%20this%20image%20up%20into%20pieces%20(%20+js#generatePuzzle();#%20).%0A%0ABut%20the%20pieces%20are%20perfectly%20placed%20to%20make%20up%20the%20full%20image.%20To%20make%20things%20more%20interesting,%20let's%20mix%20them%20up.%0A%0A(***)%0A%0A(!)On%20+js#generatePuzzle();#+1,%20call%20the%20%60shuffle%60%20function%20and%20pass%20the%20%60puzzle%60%20array%20as%20argument##INST_3E####CODE_3####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20#BEGIN_EDITABLE#shuffle(puzzle);#END_EDITABLE#%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20window.onmousedown%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20true;%0A//%20%20%20%20%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.onmousemove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_3E####LOGIC_3####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60shuffle(puzzle);%60);##JS_E####LOGIC_3E####STEP_3E####STEP_4####INST_4##Adding%20events%20-%20mouse%20down%0A%0ANext,%20we%20need%20to%20be%20able%20to%20drag%20the%20pieces%20around,%20so%20that%20we%20can%20rearrange%20them%20back%20to%20make%20up%20the%20original%20image.%0A%0ALet's%20try%20using%20the%20mouse%20events.%0A%0A(***)%0A%0A(!)On%20+js#mouse%20down%20event#+1,%20make%20%60window.onmousedown%60%20equal%20to%20a%20nameless%20empty%20function%0A(*)*Tip:*%20nameless%20function%20(%20or%20*anonymous%20function*%20)%20can%20be%20written%20as%20%60function()%20%7B%7D%60.%60%E2%80%9C##INST_4E####CODE_4####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0A#BEGIN_EDITABLE#window.onmousedown%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.onmousedown%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20true;%0A//%20%20%20%20%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.onmousemove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_4E####LOGIC_4####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.onmousedown%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_4E####STEP_4E####STEP_5####INST_5##Selecting%20a%20puzzle%20piece%0A%0AWhen%20the%20mouse%20down%20event%20is%20detected,%20we%20need%20to%20do%202%20things:%0A%5B-%0A%09(*)Use%20a%20variable%20to%20remember%20this%20event%20so%20other%20parts%20of%20the%20game%20knows%20about%20the%20mouse%20being%20pressed%0A%09(*)Select%20a%20puzzle%20piece%20under%20the%20mouse%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#window.onmousedown#+1,%20make%20the%20variable%20%60mouseDown%60%20euqal%20to%20*true*%0A(!)On%20+js#window.onmousedown#+2,%20call%20the%20%60selectPiece%60%20function%20and%20pass%20%60event.target%60%20as%20an%20agrument%0A(*)*Tip:*%20%60event.target%60%20is%20whatever%20that%20triggered%20the%20%60window.onmousedown%60%20event.##INST_5E####CODE_5####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#mouseDown%20=%20true;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#selectPiece(event.target);#END_EDITABLE#%0A%7D;%0A%0A//%20window.onmousemove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_5E####LOGIC_5####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60mouseDown%20=%20true;%60);%0Apass.if.js.editable(1).equivalent(%60selectPiece(event.target);%60);##JS_E####LOGIC_5E####STEP_5E####STEP_6####INST_6##Adding%20events%20-%20mouse%20move%0A%0AIf%20you%20clicked%20on%20a%20puzzle%20piece%20now,%20nothing%20seems%20to%20happen.%20But%20actually%20if%20you%20check%20the%20console%20log,%20you%20will%20see%20some%20information%20about%20the%20piece%20you%20just%20clicked.%0A%0AKnowing%20which%20piece%20we%20selected,%20we%20can%20now%20try%20to%20move%20it%20with%20the%20mouse.%0A%0A(***)%0A%0A(!)On%20+js#mouse%20move%20event#+1,%20make%20%60window.onmousemove%60%20equal%20to%20a%20nameless%20empty%20function%60%E2%80%9C##INST_6E####CODE_6####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0A#BEGIN_EDITABLE#window.onmousemove%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.onmousemove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(mouseDown)%20movePiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_6E####LOGIC_6####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.onmousemove%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_6E####STEP_6E####STEP_7####INST_7##Moving%20a%20puzzle%20piece%0A%0AThe%20%60window.onmousemove%60%20event%20triggers%20with%20any%20mouse%20movement,%20however%20we%20don't%20want%20to%20move%20any%20piece%20the%20mouse%20moves%20over.%0A%0ARemember%20the%20*mouseDown*%20variable%20we%20created?%20Now%20it's%20time%20to%20put%20it%20to%20use.%0A%0A(***)%0A%0A(!)On%20+js#window.onmousemove#+1,%20create%20an%20*if%20statement*%20with%20the%20condition%20%60mouseDown%20==%20true%60%0A(!)On%20+js#window.onmousemove#+2,%20call%20the%20%60movePiece%60%20function%20and%20pass%20%60event.clientX,%20event.clientY%60%20as%20arguments%0A(*)*Tip:*%20%60clientX%60%20and%20%60clientY%60%20means%20the%20x%20and%20y%20coordinates%20of%20the%20mouse%20when%20it%20moves.##INST_7E####CODE_7####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(mouseDown%20==%20true)#END_EDITABLE#%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#movePiece(event.clientX,%20event.clientY);#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_7E####LOGIC_7####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(mouseDown)%60).or(%60if%20(mouseDown%20==%20true)%60).or(%60if%20(mouseDown%20===%20true)%60);%0Apass.if.js.editable(1).equivalent(%60movePiece(event.clientX,%20event.clientY);%60);##JS_E####LOGIC_7E####STEP_7E####STEP_8####INST_8##Adding%20events%20-%20mouse%20up%0A%0ANow%20we%20need%20a%20way%20to%20put%20the%20puzzle%20piece%20down.%0A%0A(***)%0A%0A(!)On%20+js#mouse%20up%20event#+1,%20make%20%60window.onmouseup%60%20equal%20to%20a%20nameless%20empty%20function##INST_8E####CODE_8####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0A#BEGIN_EDITABLE#window.onmouseup%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.onmouseup%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20mouseDown%20=%20false;%0A//%20%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A//%20%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_8E####LOGIC_8####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.onmouseup%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_8E####STEP_8E####STEP_9####INST_9##Dropping%20a%20puzzle%20piece%0A%0AAgain,%202%20things%20should%20happen%20when%20we%20let%20go%20of%20the%20mouse%20button:%0A%0A%5B-%0A%09(*)*mouseDown*%20should%20become%20*false*%20so%20moving%20the%20mouse%20won't%20move%20any%20puzzle%20piece%20until%20selected%0A%09(*)The%20selected%20puzzle%20piece%20should%20stop%20following%20the%20mouse%0A-%5D%0A%0A(***)%0A%0A(!)On%20+js#window.onmouseup#+1,%20make%20the%20variable%20%60mouseDown%60%20equal%20to%20*false*%0A(!)On%20+js#window.onmouseup#+2,%20call%20the%20%60dropPiece%60%20function%20and%20pass%20%60event.clientX,%20event.clientY%60%20as%20arguments##INST_9E####CODE_9####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#mouseDown%20=%20false;#END_EDITABLE#%0A%20%20%20%20#BEGIN_EDITABLE#dropPiece(event.clientX,%20event.clientY);#END_EDITABLE#%0A%7D;%0A%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_9E####LOGIC_9####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60mouseDown%20=%20false;%60);%0Apass.if.js.editable(1).equivalent(%60dropPiece(event.clientX,%20event.clientY);%60);##JS_E####LOGIC_9E####STEP_9E####STEP_10####INST_10##Mobile%20events%20-%20touch%20start%0A%0ASince%20mobile%20users%20don't%20have%20a%20mouse,%20we%20need%20to%20make%20our%20game%20playable%20using%20fingers%20only.%0A%0ASimilar%20to%20the%20mouse%20events,%20there%20are%20touch%20events%20too.%0A%0A(***)%0A%0A(!)On%20+js#touch%20start%20event#+1,%20make%20%60window.ontouchstart%60%20equal%20to%20a%20nameless%20empty%20function%0A(*)*Tip:*%20nameless%20function%20(%20or%20*anonymous%20function*%20)%20can%20be%20written%20as%20%60function()%20%7B%7D%60.%60%E2%80%9C##INST_10E####CODE_10####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0A#BEGIN_EDITABLE#window.ontouchstart%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.ontouchstart%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20selectPiece(event.target);%0A//%20%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_10E####LOGIC_10####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.ontouchstart%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_10E####STEP_10E####STEP_11####INST_11##Selecting%20a%20piece%0A%0AThe%20%60window.ontouchstart%60%20event%20is%20triggered%20once%20whenever%20a%20finger%20touches%20the%20screen.%0A%0AIt's%20possible%20that%20a%20user%20touches%20the%20screen%20with%20more%20than%201%20finger,%20however%20we%20don't%20really%20want%20to%20select%20and%20move%20more%20than%201%20puzzle%20piece%20at%20a%20time.%0A%0ATime%20for%20another%20*if%20statement*.%0A%0A(***)%0A%0A(!)On%20+js#window.ontouchstart#+1,%20create%20an%20*if%20statement*%20with%20the%20condition%20%60event.touches.length%20==%201%60%0A(*)*Tip:*%20%60event.touches%60%20is%20an%20array,%20it's%20length%20is%20the%20total%20number%20of%20finger%20touches%20that%20triggered%20the%20event.%0A(!)On%20+js#window.ontouchstart#+2,%20call%20the%20%60selectPiece%60%20function%20and%20pass%20%60event.target%60%20as%20argument##INST_11E####CODE_11####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#if%20(event.touches.length%20===%201)#END_EDITABLE#%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#selectPiece(event.target);#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_11E####LOGIC_11####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent.to(%60if%20(event.touches.length%20==%201)%60).or(%60if%20(event.touches.length%20===%201)%60);%0Apass.if.js.editable(1).equivalent(%60selectPiece(event.target);%60);##JS_E####LOGIC_11E####STEP_11E####STEP_12####INST_12##Mobile%20events%20-%20touch%20move%0A%0ANext,%20we%20will%20move%20the%20selected%20piece%20along%20with%20the%20finger.%0A%0A(***)%0A%0A(!)On%20+js#touch%20move%20event#,%20make%20%60window.ontouchmove%60%20equal%20to%20a%20nameless%20empty%20function##INST_12E####CODE_12####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0A#BEGIN_EDITABLE#window.ontouchmove%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.ontouchmove%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20if%20(event.touches.length%20===%201)%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A//%20%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20overscrolling%20on%20iPhones%0A//%20%20%20%20%20event.preventDefault();%0A//%20%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_12E####LOGIC_12####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.ontouchmove%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_12E####STEP_12E####STEP_13####INST_13##Moving%20a%20piece%0A%0ASame%20as%20the%20%60window.ontouchstart%60%20event,%20we%20only%20move%20the%20selected%20piece%20if%20there%20is%20only%201%20finger%20moving%20on%20the%20screen.%0A%0A(***)%0A%0A(!)On%20+js#window.ontouchmove#+2,%20call%20the%20%60movePiece%60%20function%20and%20pass%20%60event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY%60%20as%20argument%0A(!)On%20+js#prevent%20default#+1,%20call%20the%20%60event.preventDefault%60%20function%0A(*)*Tip:*%20This%20prevents%20the%20default%20functionalities%20such%20as%20over-scrolling%20on%20iPhones.##INST_13E####CODE_13####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);#END_EDITABLE#%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20#BEGIN_EDITABLE#event.preventDefault();#END_EDITABLE#%0A%7D;%0A%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_13E####LOGIC_13####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%60);%0Apass.if.js.editable(1).equivalent(%60event.preventDefault();%60);##JS_E####LOGIC_13E####STEP_13E####STEP_14####INST_14##Mobile%20events%20-%20touch%20end%0A%0AFinally,%20we%20drop%20the%20selected%20piece%20when%20the%20finger%20touch%20ends.%0A%0A(***)%0A%0A(!)On%20+js#touch%20end%20event#+1,%20make%20%60window.ontouchend%60%20equal%20to%20a%20nameless%20empty%20function%60%E2%80%9C##INST_14E####CODE_14####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0A#BEGIN_EDITABLE#window.ontouchend%20=%20function()%20%7B%7D;#END_EDITABLE#%0A//%20window.ontouchend%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A//%20%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_14E####LOGIC_14####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60window.ontouchend%20=%20function()%20%7B%7D;%60);##JS_E####LOGIC_14E####STEP_14E####STEP_15####INST_15##Dropping%20a%20piece%0A%0AThere%20is%20not%20need%20to%20check%20for%20number%20of%20touches%20here%20because,%20nothing%20would%20be%20selected%20or%20moved%20if%20there're%20multiple%20fingers%20on%20the%20screen.%0A%0A(***)%0A%0A(!)On%20+js#window.ontouchend#+1,%20call%20the%20%60dropPiece%60%20function%20and%20pass%20%60event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY%60%20as%20arguments%60%E2%80%9C##INST_15E####CODE_15####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20//%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%20%20%20%20//%20else%20%7B%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20//%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20//%20checkPuzzle();%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);#END_EDITABLE#%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_15E####LOGIC_15####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%60);##JS_E####LOGIC_15E####STEP_15E####STEP_16####INST_16##Checking%20the%20result%0A%0AEven%20if%20you%20complete%20the%20puzzle%20now,%20nothing%20would%20happen.%0A%0AIn%20order%20for%20the%20game%20to%20know%20a%20player%20has%20solved%20it%20puzzle,%20we%20need%20to%20do%20some%20checking.%0A%0A(***)%0A%0A(!)On%20+js#swap;#+2,%20call%20the%20%60checkPuzzle%60%20function%0A(*)*Tip:*%20Don't%20forget%20the%20brackets%20when%20calling%20a%20function.##INST_16E####CODE_16####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#checkPuzzle();#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass%20&&%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_16E####LOGIC_16####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60checkPuzzle();%60);##JS_E####LOGIC_16E####STEP_16E####STEP_17####INST_17##Extension:%20Optimizing%20the%20check%0A%0AThe%20*checkPuzzle*%20function%20runs%20every%20time%20you%20put%20a%20puzzle%20piece%20down.%0A%0AThis%20is%20quite%20inefficient,%20there%20is%20no%20real%20need%20to%20check%20at%20all%20until%20all%20the%20pieces%20have%20been%20put%20in%20place.%0A%0A(***)%0A%0A(!)*Challenge:*%20make%20your%20game%20check%20for%20the%20result%20only%20when%20every%20piece%20is%20in%20place%60%E2%80%9C##INST_17E####CODE_17####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20//%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%20%20%20%20%20%20%20%20//%20document.body.removeChild(popup.element);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20const%20stepCheck%20=%20puzzleGrid.every(grid%20=%3E%20!grid.isEmpty);%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_17E####LOGIC_17####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Afail('Please%20make%20your%20game%20check%20for%20the%20result%20only%20when%20every%20piece%20is%20in%20place.').on('checkPuzzle').var('stepCheck%20===%20false');##JS_E####LOGIC_17E####STEP_17E####STEP_18####INST_18##Indicating%20wait%20time%0A%0APeople%20have%20less%20patience%20when%20they're%20on%20the%20phone,%20they%20don't%20typically%20go%20get%20a%20cup%20of%20tea%20and%20come%20back%20like%20they%20do%20with%20a%20computer.%0A%0AFor%20this%20reason%20we%20need%20to%20clearly%20indicate%20any%20wait%20time%20while%20the%20image%20is%20being%20loaded.%0A%0A(***)%0A%0A(!)On%20+js#loadImage()%20%7B#+1,%20call%20the%20%60showPopup%60%20function%20and%20pass%20%60%22Loading%20Image...%22%60%20as%20argument%0A(!)On%20+js#image.onload#+1,%20call%20the%20%60document.body.removeChild%60%20function%20and%20pass%20%60popup.element%60%20as%20argument##INST_18E####CODE_18####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20#BEGIN_EDITABLE#showPopup('Loading%20Image...');#END_EDITABLE#%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#document.body.removeChild(popup.element);#END_EDITABLE#%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_18E####LOGIC_18####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60showPopup('Loading%20Image...');%60);%0Apass.if.js.editable(1).equivalent(%60document.body.removeChild(popup.element);%60);##JS_E####LOGIC_18E####STEP_18E####STEP_19####INST_19##Indicating%20result%0A%0AAnother%20aspect%20of%20designing%20a%20game%20is%20to%20always%20reward%20the%20player%20for%20their%20achievements.%0A%0AWhen%20the%20puzzle%20is%20solved,%20we%20should%20congratulate%20the%20player.%0A%0A(***)%0A%0A(!)Challenge:%20make%20your%20game%20show%20a%20congratulatory%20popup%20when%20player%20successfully%20solves%20the%20puzzle##INST_19E####CODE_19####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##let%20stepCheck;%0A//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20//%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20//%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20//%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20//%20%20%20%20%20%7D%0A%20%20%20%20//%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20//%20clearTimeout(checkLoadStatus);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);#END_EDITABLE#%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20stepCheck%20=%20true;%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A//%20update.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_19E####LOGIC_19####HTML####HTML_E####CSS####CSS_E####JS##pass.on('checkPuzzle').var('pass%20==%20true%20&&%20stepCheck%20==%20true');##JS_E####LOGIC_19E####STEP_19E####STEP_20####INST_20##Creating%20new%20puzzle%0A%0ASolving%20puzzles%20is%20fun%20and%20healthy,%20but%20doing%20the%20same%20puzzle%20over%20and%20over%20again%20can%20become%20boring.%0A%0AWe%20should%20allow%20the%20player%20to%20create%20new%20puzzles.%0A%0A(***)%0A%0A(!)On%20+js#image.onload#-2,%20make%20%60image.src%60%20equal%20to%20%60link.value%60%0A(*)*Tip:*%20%60link.value%60%20is%20the%20content%20of%20the%20text%20field%20in%20the%20middle%20of%20the%20page.%0A(!)On%20+js#=%20EVENTS%20=#+2,%20make%20%60update.onclick%60%20equal%20to%20the%20%60resetPuzzle%60%20function%0A(*)*Tip:*%20%60update%60%20is%20the%20button%20below%20the%20text%20field%20that%20says%20*Generate%20New%20Puzzle*.##INST_20E####CODE_20####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20#BEGIN_EDITABLE#image.src%20=%20link.value;#END_EDITABLE#%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0A#BEGIN_EDITABLE#update.onclick%20=%20resetPuzzle#END_EDITABLE#%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_20E####LOGIC_20####HTML####HTML_E####CSS####CSS_E####JS##//%20Expectation:%0Apass.if.js.editable(0).equivalent(%60image.src%20=%20link.value;%60);%0Apass.if.js.editable(1).equivalent(%60update.onclick%20=%20resetPuzzle;%60);##JS_E####LOGIC_20E####STEP_20E####STEP_21####INST_21##Extension:%20Increasing%20difficulty%0A%0ASome%20times%20we%20want%20things%20to%20be%20really%20challenging,%20so%20that%20we%20can%20feel%20really%20accomplished%20after%20conquering%20it.%0A%0A(***)%0A%0A(!)Challenge:%20make%20your%20game%20increase%20difficulty%20after%20the%20player%20successfully%20solves%20the%20puzzle.##INST_21E####CODE_21####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0A#BEGIN_EDITABLE#%0Avar%20score%20=%200;%0A//%20make%20new%20variables%20here%0A#END_EDITABLE#%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20#BEGIN_EDITABLE#%0A%20%20%20%20%20%20%20%20score++;%0A%20%20%20%20%20%20%20%20if%20(score%20==%203)%20grid++;%0A%20%20%20%20%20%20%20%20//%20increase%20difficulty%20here%0A%20%20%20%20%20%20%20%20#END_EDITABLE#%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0Aupdate.onclick%20=%20resetPuzzle;%0A%0A//%20link.onfocus%20=%20()%20=%3E%20%7B%0A//%20%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A//%20%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D##JS_E####CODE_21E####LOGIC_21####HTML####HTML_E####CSS####CSS_E####JS##pass.on('checkPuzzle').var('pass%20==%20true%20&&%20grid%20%3E%202');##JS_E####LOGIC_21E####STEP_21E####STEP_22####INST_22##Summary%0A%0AGreat%20job!%0A%0AYou've%20completed%20this%20project.##INST_22E####CODE_22####HTML##%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Cmeta%20content='width=device-width,%20initial-scale=1.0,%20maximum-scale=1.0,%20user-scalable=0'%20name='viewport'%20/%3E%0A%09%3Clink%20rel=%22stylesheet%22%20type=%22text/css%22%20href=%22style.css%22/%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EJigsaw%3C/h1%3E%0A%20%20%20%20%0A%09%3Cdiv%20id=%22puzzleContainer%22%3E%3C/div%3E%0A%09%0A%09%3Cinput%20type='text'%20id=%22link%22%20placeholder=%22Paste%20an%20image%20link%20here%20to%20create%20your%20own%20puzzle.%22%20value=%22http://bsdacademysandbox.com/curriculum/wp-content/uploads/2018/03/pa-keys.jpeg%22%3E%0A%09%3Cbutton%20id='update'%3EGenerate%20New%20Puzzle%3C/button%3E%0A%09%0A%09%3Cdiv%20id=%22tray%22%3E%3C/div%3E%0A%09%0A%09%3Cscript%20type=%22text/javascript%22%20src=%22https://cdn.firebase.com/js/client/2.2.0/firebase.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type=%22text/javascript%22%20src=%22script.js%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E#BEGIN_EDITABLE##END_EDITABLE###HTML_E####CSS##body%20%7B%0A%09margin:%200;%0A%20%20%20%20font-family:%20arial;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20overflow:%20hidden;%0A%20%20%20%20user-select:%20none;%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20margin:%2010px%200%205px%200;%0A%7D%0A%0A#link%20%7B%0A%20%20%20%20padding:%205px;%0A%20%20%20%20margin:%2010px%2020px;%0A%20%20%20%20width:%20calc(100%25%20-%2050px);%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%200.8em;%0A%20%20%20%20text-align:%20center;%0A%20%20%20%20border:%20none;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20background:%20rgba(255,%20255,%20255,%200.75);%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#puzzleContainer%20%7B%0A%20%20%20%20position:%20relative;%0A%20%20%20%20margin:%20auto;%0A%20%20%20%20border:%202px%20solid%20black;%0A%20%20%20%20border-radius:%205px;%0A%20%20%20%20background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#tray%20%7B%0A%09margin:%200;%0A%09width:%20100%25;%0A%09background:%20rgba(0,%200,%200,%200.75);%0A%7D%0A%0A#update%20%7B%0A%20%20%20%20margin-bottom:%2010px;%0A%20%20%20%20padding:%205px%2010px;%0A%20%20%20%20border-radius:%2010px;%0A%20%20%20%20font-family:%20monospace;%0A%20%20%20%20font-size:%201.1em;%0A%20%20%20%20border:%20none;%0A%20%20%20%20outline:%20none;%0A%7D%0A%0A#update:active%20%7B%0A%20%20%20%20background-color:%20skyblue;%0A%7D%0A%0A.piece%20%7B%0A%09display:%20inline-block;%0A%20%20%20%20position:%20absolute;%0A%20%20%20%20border-radius:%203px;%0A%20%20%20%20border:%20rgba(0,%200,%200,%200.1)%20solid%200.5px;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%20%20transition-property:%20top,%20left;%0A%20%20%20%20cursor:%20-webkit-grab;%0A%7D%0A%0A.piece:active%20%7B%0A%20%20%20%20cursor:%20-webkit-grabbing;%0A%7D%0A%0A.blue%20%7B%0A%20%20%20%20color:%20skyblue;%0A%7D%0A%0A.red%20%7B%0A%20%20%20%20color:%20indianred;%0A%7D%0A%0A.green%20%7B%0A%20%20%20%20color:%20rgb(67,%20199,%20144);%0A%7D%0A%0A.gold%20%7B%0A%20%20%20%20color:%20rgb(231,%20171,%2091);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###CSS_E####JS##//%20minimum%20resolution%20of%20the%20puzzle%0Avar%20grid%20=%202;%0A//%2090%25%20of%20window%20width%0Avar%20maxWidth%20=%200.9;%0A//%2030%25%20of%20window%20height%0Avar%20maxHeight%20=%200.3;%0A//%20array%20holding%20all%20the%20puzzle%20pieces%0Avar%20puzzle%20=%20%5B%5D;%0A//%20array%20of%20grids%20(%20where%20pieces%20go%20)%0Avar%20puzzleGrid%20=%20%5B%5D;%0A//%20the%20puzzle%20image%0Avar%20image;%0A//%20actual%20resolution%20of%20the%20puzzle%20i.e%202%20x%203%0Avar%20resolution;%0A//%20index%20of%20the%20puzzle%20pieces%20being%20picked%20up%0Avar%20activeIndex;%0A//%20index%20of%20the%20grid%20that%20is%20being%20hovered%20over%0Avar%20activeGrid;%0A//%20the%20location%20of%20the%20active%20piece%20before%20being%20picked%20up%0Avar%20secondaryLocation;%0Avar%20bg%20=%20%7B%20wrapper:%20null,%20image:%20null%20%7D;%0Avar%20mouseDown%20=%20false;%0Avar%20popup;%0A%0Avar%20score%20=%200;%0A%0A//%20=====%20FUNCTIONS%20=====%20//%0A%0Afunction%20setBackground()%20%7B%0A%20%20%20%20if%20(!Array.from(document.body.children).includes(bg.wrapper))%20%7B%0A%20%20%20%20%20%20%20%20bg.wrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20bg.image%20=%20document.createElement('img');%0A%0A%20%20%20%20%20%20%20%20bg.wrapper.appendChild(bg.image);%0A%20%20%20%20%20%20%20%20document.body.appendChild(bg.wrapper);%0A%0A%20%20%20%20%20%20%20%20style(%5Bbg.wrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20%20%20%20%20width:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20height:%20'100%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20background:%20'black',%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'0.75',%0A%20%20%20%20%20%20%20%20%20%20%20%20overflow:%20'hidden',%0A%20%20%20%20%20%20%20%20%20%20%20%20z_index:%20'-2',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20bg.image.src%20=%20image.src;%0A%0A%20%20%20%20style(%5Bbg.image%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%20%20width:%20window.innerWidth%20%3E%20bg.image.width%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20height:%20window.innerHeight%20%3E%20bg.image.height%20?%20'110%25'%20:%20'',%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20filter:%20'grayscale(0.5)%20blur(10px)',%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20loadImage()%20%7B%0A%20%20%20%20showPopup('Loading%20Image...');%0A%0A%20%20%20%20const%20checkLoadStatus%20=%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document.body.contains(popup.element))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Couldn't%20load%20the%20image%20after%2010%20seconds,%20please%20make%20sure%20the%20image%20link%20is%20correct.%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20=%3E%20document.body.removeChild(popup.element)%0A%20%20%20%20%20%20%20%20%20%20%20%20);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%2010000);%0A%0A%20%20%20%20image%20=%20document.createElement('img');%0A%20%20%20%20image.src%20=%20link.value;%0A%0A%20%20%20%20image.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20clearTimeout(checkLoadStatus);%0A%0A%20%20%20%20%20%20%20%20const%20ir%20=%20image.width%20/%20image.height;%0A%0A%20%20%20%20%20%20%20%20resolution%20=%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20Math.round(grid%20*%20ir)%20:%20grid,%0A%20%20%20%20%20%20%20%20%20%20%20%20ir%20%3E=%200%20?%20grid%20:%20Math.round(grid%20*%20ir),%0A%20%20%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20%20%20setBackground();%0A%20%20%20%20%20%20%20%20initialze();%0A%20%20%20%20%7D;%0A%7D%0A%0Afunction%20initialze()%20%7B%0A%20%20%20%20generatePuzzle();%0A%20%20%20%20shuffle(puzzle);%0A%0A%20%20%20%20tray.style.height%20=%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60;%0A%0A%20%20%20%20puzzle.forEach((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20puzzleContainer.appendChild(piece);%0A%20%20%20%20%20%20%20%20piece.location%20=%20puzzleGrid%5Bi%5D;%0A%0A%20%20%20%20%20%20%20%20//%20put%20random%20pieces%20into%20the%20tray%20area%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.7)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20puzzleGrid%5Bi%5D.x;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20puzzleGrid%5Bi%5D.y;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5Bi%5D.isEmpty%20=%20true;%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.left%20=%20range(10,%20puzzleContainer.offsetWidth%20-%20piece.offsetWidth%20-%2010)%20+%20'px';%0A%20%20%20%20%20%20%20%20%20%20%20%20piece.style.top%20=%20range(tray.offsetTop,%20window.innerHeight%20-%20puzzleContainer.offsetTop%20-%20piece.offsetHeight)%20-%2020%20+%20'px';%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D);%0A%7D%0A%0Afunction%20generatePuzzle()%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20hr%20=%20window.innerWidth%20*%20maxWidth%20/%20image.width,%0A%20%20%20%20%20%20%20%20vr%20=%20window.innerHeight%20*%20maxHeight%20/%20image.height,%0A%20%20%20%20%20%20%20%20r%20=%20Math.min(hr,%20vr);%0A%0A%20%20%20%20//%20loop%20to%20create%20all%20pieces%20in%20the%20puzzle%0A%20%20%20%20for%20(let%20i%20=%200;%20i%20%3C%20resolution%5B0%5D%20*%20resolution%5B1%5D;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20=%20i%20%25%20resolution%5B0%5D%20*%20(image.width%20*%20r%20/%20resolution%5B0%5D),%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20=%20Math.floor(i%20/%20resolution%5B0%5D)%20*%20(image.height%20*%20r%20/%20resolution%5B1%5D);%0A%0A%20%20%20%20%20%20%20%20piece.id%20=%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%20%20%20%20piece.className%20=%20'piece';%0A%20%20%20%20%20%20%20%20piece.style.width%20=%20%60$%7Bimage.width%20*%20r%20/%20resolution%5B0%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.height%20=%20%60$%7Bimage.height%20*%20r%20/%20resolution%5B1%5D%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundImage%20=%20%60url($%7Bimage.src%7D)%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundSize%20=%20%60$%7Bimage.width%20*%20r%7Dpx%20%20$%7Bimage.height%20*%20r%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.backgroundPosition%20=%20%60-$%7Bx%7Dpx%20-$%7By%7Dpx%60;%0A%20%20%20%20%20%20%20%20piece.style.zIndex%20=%20'0';%0A%0A%20%20%20%20%20%20%20%20//%20store%20each%20piece%20in%20an%20array%0A%20%20%20%20%20%20%20%20puzzle.push(piece);%0A%20%20%20%20%20%20%20%20puzzleGrid.push(%7B%20x:%20%60$%7Bx%7Dpx%60,%20y:%20%60$%7By%7Dpx%60,%20isEmpty:%20true,%20index:%20i%20%7D);%0A%20%20%20%20%7D%0A%0A%20%20%20%20puzzleContainer.style.width%20=%20%60$%7Bimage.width%20*%20r%7Dpx%60;%0A%20%20%20%20puzzleContainer.style.height%20=%20%60$%7Bimage.height%20*%20r%7Dpx%60;%0A%7D%0A%0Afunction%20shuffle(array)%20%7B%0A%20%20%20%20let%20counter%20=%20array.length;%0A%0A%20%20%20%20//%20While%20there%20are%20elements%20in%20the%20array%0A%20%20%20%20while%20(counter%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20//%20Pick%20a%20random%20index%0A%20%20%20%20%20%20%20%20let%20index%20=%20Math.floor(Math.random()%20*%20counter);%0A%0A%20%20%20%20%20%20%20%20//%20Decrease%20counter%20by%201%0A%20%20%20%20%20%20%20%20counter--;%0A%0A%20%20%20%20%20%20%20%20//%20And%20swap%20the%20last%20element%20with%20it%0A%20%20%20%20%20%20%20%20let%20temp%20=%20array%5Bcounter%5D;%0A%20%20%20%20%20%20%20%20array%5Bcounter%5D%20=%20array%5Bindex%5D;%0A%20%20%20%20%20%20%20%20array%5Bindex%5D%20=%20temp;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20selectPiece(target)%20%7B%0A%20%20%20%20if%20(!Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20activeIndex%20=%20puzzle.includes(target)%20?%20puzzle.indexOf(target)%20:%20null;%0A%0A%20%20%20%20%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Active:',%20puzzle%5BactiveIndex%5D.id,%20%60puzzle%5B$%7Bpuzzle%5BactiveIndex%5D.location.index%7D%5D%60);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle.forEach(piece%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(piece)%20piece.style.zIndex%20=%20'0';%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.zIndex%20=%20'1';%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(puzzleGrid%5BactiveIndex%5D.isEmpty)%20secondaryLocation%20=%20%7B%20x:%20puzzle%5BactiveIndex%5D.offsetLeft%20+%20'px',%20y:%20puzzle%5BactiveIndex%5D.offsetTop%20+%20'px'%20%7D;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5BactiveIndex%5D.isEmpty;%0A%20%20%20%20%20%20%20%20%20%20%20%20puzzleGrid%5BactiveIndex%5D.isEmpty%20=%20true;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D,%20puzzleGrid%5BactiveIndex%5D.isEmpty);%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20movePiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetX%20=%20clientX%20-%20puzzleContainer.offsetLeft,%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetY%20=%20clientY%20-%20puzzleContainer.offsetTop,%0A%20%20%20%20%20%20%20%20%20%20%20%20piece%20=%20puzzle%5BactiveIndex%5D.getBoundingClientRect();%0A%0A%20%20%20%20%20%20%20%20activeGrid%20=%20puzzleGrid%5BMath.floor(offsetY%20/%20piece.height)%20*%20resolution%5B0%5D%20+%20Math.floor(offsetX%20/%20piece.width)%5D;%0A%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0s';%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20%60$%7BoffsetX%20-%20puzzle%5BactiveIndex%5D.offsetWidth%20/%202%7Dpx%60;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20%60$%7BoffsetY%20-%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%7Dpx%60;%0A%0A%20%20%20%20%20%20%20%20console.clear();%0A%20%20%20%20%20%20%20%20console.log('Picked%20up%20from',%20puzzleGrid%5BactiveIndex%5D);%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.isEmpty:%20$%7BpuzzleGrid%5BactiveIndex%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20if%20(activeGrid)%20console.log('Hovering%20above',%20activeGrid);%0A%20%20%20%20%20%20%20%20else%20console.log('Hovering%20outside%20puzzle.');%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20dropPiece(clientX,%20clientY)%20%7B%0A%20%20%20%20if%20(Number.isInteger(activeIndex))%20%7B%0A%20%20%20%20%20%20%20%20if%20(activeGrid%20&&%20activeGrid.isEmpty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placePiece(activeGrid);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20=%20clientX%20%3E=%20tray.offsetLeft%20&&%20clientX%20%3C=%20tray.offsetLeft%20+%20tray.offsetWidth,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20=%20clientY%20%3E=%20tray.offsetTop%20+%20puzzle%5BactiveIndex%5D.offsetHeight%20/%202%20&&%20clientY%20%3C=%20tray.offsetTop%20+%20tray.offsetHeight;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20dropped%20inside%20the%20blue%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(h%20&&%20v)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(%7B%20x:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetLeft%7Dpx%60,%20y:%20%60$%7Bpuzzle%5BactiveIndex%5D.offsetTop%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Dropped%20in%20tray.');%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placePiece(secondaryLocation%20%7C%7C%20puzzle%5BactiveIndex%5D.location);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20secondaryLocation%20=%20null;%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20placePiece(target)%20%7B%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.transitionDuration%20=%20'0.2s';%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.left%20=%20target.x;%0A%20%20%20%20puzzle%5BactiveIndex%5D.style.top%20=%20target.y;%0A%0A%20%20%20%20if%20(target.hasOwnProperty('index'))%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20=%20puzzleGrid%5Btarget.index%5D.isEmpty;%0A%20%20%20%20%20%20%20%20puzzleGrid%5Btarget.index%5D.isEmpty%20=%20false;%0A%20%20%20%20%20%20%20%20console.log(%60puzzleGrid%5B$%7Btarget.index%7D%5D.isEmpty:%20$%7Bs%7D%20=%3E%20$%7BpuzzleGrid%5Btarget.index%5D.isEmpty%7D%60);%0A%0A%20%20%20%20%20%20%20%20s%20=%20puzzle%5BactiveIndex%5D.location;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D.location%20=%20target;%0A%20%20%20%20%20%20%20%20console.log(%60puzzle%5B$%7BactiveIndex%7D%5D.location:%60,%20s,%20'=%3E',%20puzzle%5BactiveIndex%5D.location);%0A%0A%20%20%20%20%20%20%20%20//%20swap%20pieces%20in%20the%20puzzle%20array%0A%20%20%20%20%20%20%20%20const%20swap%20=%20puzzle%5Btarget.index%5D;%0A%20%20%20%20%20%20%20%20puzzle%5Btarget.index%5D%20=%20puzzle%5BactiveIndex%5D;%0A%20%20%20%20%20%20%20%20puzzle%5BactiveIndex%5D%20=%20swap;%0A%0A%20%20%20%20%20%20%20%20if%20(puzzleGrid.every(grid%20=%3E%20!grid.isEmpty))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkPuzzle();%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20checkPuzzle()%20%7B%0A%20%20%20%20let%20pass%20=%20puzzle.every((piece,%20i)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20piece.id%20==%20%60piece$%7Bi%7D%60;%0A%20%20%20%20%7D);%0A%0A%20%20%20%20//%20solved%20current%20puzzle%0A%20%20%20%20if%20(pass)%20%7B%0A%20%20%20%20%20%20%20%20score++;%0A%20%20%20%20%20%20%20%20if%20(score%20==%203)%20grid++;%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20showPopup(%0A%20%20%20%20%20%20%20%20%20%20%20%20'Congratulations!%3Cbr%3EYou%20solved%20the%20puzzles!%3Cbr%3E',%0A%20%20%20%20%20%20%20%20%20%20%20%20'Okay',%0A%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(popup.element);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resetPuzzle();%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20resetPuzzle()%20%7B%0A%20%20%20%20image%20=%20null;%0A%20%20%20%20puzzle.forEach(piece%20=%3E%20puzzleContainer.removeChild(piece));%0A%0A%20%20%20%20puzzle%20=%20%5B%5D;%0A%20%20%20%20puzzleGrid%20=%20%5B%5D;%0A%20%20%20%20activeIndex%20=%20null;%0A%20%20%20%20activeGrid%20=%20null;%0A%20%20%20%20mouseDown%20=%20false;%0A%0A%20%20%20%20loadImage();%0A%7D%0A%0Afunction%20showPopup(messageContent,%20buttonText,%20action,%20close%20=%20false,%20closeAction)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%20%20%20%20wrapper%20=%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20logo%20=%20document.createElement('img'),%0A%20%20%20%20%20%20%20%20message%20=%20document.createElement('h2'),%0A%20%20%20%20%20%20%20%20button%20=%20document.createElement('button'),%0A%20%20%20%20%20%20%20%20btnClose%20=%20document.createElement('button');%0A%0A%20%20%20%20popup%20=%20%7B%0A%20%20%20%20%20%20%20%20element:%20document.createElement('div'),%0A%20%20%20%20%20%20%20%20wrapper:%20wrapper,%0A%20%20%20%20%20%20%20%20message:%20message,%0A%20%20%20%20%20%20%20%20button:%20button,%0A%20%20%20%20%20%20%20%20logo:%20logo,%0A%20%20%20%20%7D;%0A%0A%20%20%20%20logo.src%20=%20'https://app.bsdlaunchbox.com/resources/bsdlogo.png';%0A%20%20%20%20message.innerHTML%20=%20messageContent;%0A%0A%20%20%20%20wrapper.appendChild(message);%0A%0A%20%20%20%20if%20(buttonText)%20%7B%0A%20%20%20%20%20%20%20%20button.textContent%20=%20buttonText;%0A%20%20%20%20%20%20%20%20button.onclick%20=%20action;%0A%20%20%20%20%20%20%20%20wrapper.appendChild(button);%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style(%5BbtnClose%5D,%20%7B%20margin_left:%20'10px'%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.textContent%20=%20'Cancel';%0A%20%20%20%20%20%20%20%20%20%20%20%20btnClose.onclick%20=%20closeAction;%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapper.appendChild(btnClose);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.body.appendChild(popup.element);%0A%20%20%20%20popup.element.appendChild(wrapper);%0A%0A%20%20%20%20style(%5Bpopup.element%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20top:%20'0',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%7Dpx%60,%0A%20%20%20%20%20%20%20%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60,%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(255,%20255,%20255,%200.8)',%0A%20%20%20%20%20%20%20%20z_index:%20'2',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bwrapper%5D,%20%7B%0A%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20width:%20%60$%7Bwindow.innerWidth%20-%2050%7Dpx%60,%0A%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20top:%20'50%25',%0A%20%20%20%20%20%20%20%20transform:%20'translate(-50%25,%20-50%25)',%0A%20%20%20%20%20%20%20%20border_radius:%20'10px',%0A%20%20%20%20%20%20%20%20padding:%20'0%2020px%2020px%2020px',%0A%20%20%20%20%20%20%20%20background_color:%20'rgba(0,%200,%200,%200.8)',%0A%20%20%20%20%20%20%20%20box_sizing:%20'border-box',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20style(%5Bmessage%5D,%20%7B%0A%20%20%20%20%20%20%20%20margin_top:%20'0',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20color:%20'ghostwhite',%0A%20%20%20%20%20%20%20%20line_height:%20'1.5em',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20if%20(buttonText%20%7C%7C%20close)%20style(%5Bbutton,%20btnClose%5D,%20%7B%0A%20%20%20%20%20%20%20%20border:%20'none',%0A%20%20%20%20%20%20%20%20border_radius:%20%60$%7Bbutton.offsetHeight%20/%202%7Dpx%60,%0A%20%20%20%20%20%20%20%20padding:%20'5px%2010px',%0A%20%20%20%20%20%20%20%20cursor:%20'pointer',%0A%20%20%20%20%20%20%20%20outline:%20'none',%0A%20%20%20%20%20%20%20%20font_family:%20'Monospace',%0A%20%20%20%20%20%20%20%20font_size:%20'1.2em',%0A%20%20%20%20%20%20%20%20color:%20'black',%0A%20%20%20%20%20%20%20%20background_color:%20'ghostwhite',%0A%20%20%20%20%7D);%0A%0A%20%20%20%20logo.onload%20=%20()%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%20opacity:%20'0'%20%7D);%0A%20%20%20%20%20%20%20%20popup.element.appendChild(logo);%0A%0A%20%20%20%20%20%20%20%20const%20sizeRatio%20=%20window.innerWidth%20*%200.15%20/%20logo.offsetWidth;%0A%20%20%20%20%20%20%20%20style(%5Bwrapper%5D,%20%7B%20padding_top:%20%60$%7B10%20+%20(logo.offsetHeight%20/%202)%20*%20sizeRatio%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Blogo%5D,%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position:%20'absolute',%0A%20%20%20%20%20%20%20%20%20%20%20%20left:%20'50%25',%0A%20%20%20%20%20%20%20%20%20%20%20%20transform:%20%60translateX(-50%25)%20scale($%7BsizeRatio%7D)%20%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20top:%20%60$%7Bwrapper.offsetTop%20-%20(wrapper.offsetHeight%20/%202)%20-%20(logo.offsetHeight%20/%202)%7Dpx%60,%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity:%20'1',%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D;%0A%7D%0A%0A//%20=====%20EVENTS%20=====%20//%0A%0Aupdate.onclick%20=%20resetPuzzle;%0A%0Alink.onfocus%20=%20()%20=%3E%20%7B%0A%20%20%20%20link.setSelectionRange(0,%20link.value.length);%0A%7D;%0A%0Awindow.onload%20=%20loadImage;%0A%0Awindow.onresize%20=%20()%20=%3E%20%7B%0A%20%20%20%20style(%5Bspare%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%20-%20tray.offsetTop%7Dpx%60%20%7D);%0A%0A%20%20%20%20if%20(popup)%20%7B%0A%20%20%20%20%20%20%20%20style(%5Bpopup.element%5D,%20%7B%20height:%20%60$%7Bwindow.innerHeight%7Dpx%60%20%7D);%0A%20%20%20%20%20%20%20%20style(%5Bpopup.logo%5D,%20%7B%20top:%20%60$%7Bpopup.wrapper.offsetTop%20-%20(popup.wrapper.offsetHeight%20/%202)%20-%20(popup.logo.offsetHeight%20/%202)%7Dpx%60%20%7D);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20down%20event%0Awindow.onmousedown%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20true;%0A%20%20%20%20selectPiece(event.target);%0A%7D;%0A%0A//%20mouse%20move%20event%0Awindow.onmousemove%20=%20function()%20%7B%0A%20%20%20%20if%20(mouseDown%20==%20true)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.clientX,%20event.clientY);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20mouse%20up%20event%0Awindow.onmouseup%20=%20function()%20%7B%0A%20%20%20%20mouseDown%20=%20false;%0A%20%20%20%20dropPiece(event.clientX,%20event.clientY);%0A%7D;%0A%0A//%20touch%20start%20event%0Awindow.ontouchstart%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20selectPiece(event.target);%0A%20%20%20%20%7D%0A%7D;%0A%0A//%20touch%20move%20event%0Awindow.ontouchmove%20=%20function()%20%7B%0A%20%20%20%20if%20(event.touches.length%20===%201)%20%7B%0A%20%20%20%20%20%20%20%20movePiece(event.touches%5B0%5D.clientX,%20event.touches%5B0%5D.clientY);%0A%20%20%20%20%7D%0A%20%20%20%20//%20prevent%20default%20touch%20move%20functionalities%20such%20as%20over-scrolling%20on%20iPhones%0A%20%20%20%20event.preventDefault();%0A%7D;%0A%0A//%20touch%20end%20event%0Awindow.ontouchend%20=%20function()%20%7B%0A%20%20%20%20dropPiece(event.changedTouches%5B0%5D.clientX,%20event.changedTouches%5B0%5D.clientY);%0A%7D;%0A%0A//%20=====%20UTILITY%20=====%20//%0A%0Afunction%20range(min,%20max,%20int%20=%20false)%20%7B%0A%20%20%20%20const%20r%20=%20Math.random()%20*%20(max%20-%20min)%20+%20min;%0A%20%20%20%20return%20int%20?%20Math.round(r)%20:%20r;%0A%7D%0A%0Afunction%20style(elem,%20declarations)%20%7B%0A%20%20%20%20Object.keys(declarations).forEach(d%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20elem.forEach(e%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(declarations%5Bd%5D)%20e.style%5Bd.replace(/_/,%20'-')%5D%20=%20declarations%5Bd%5D;%0A%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D);%0A%7D#BEGIN_EDITABLE##END_EDITABLE###JS_E####CODE_22E####LOGIC_22####HTML####HTML_E####CSS####CSS_E####JS####JS_E####LOGIC_22E####STEP_22E##